(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app-94629317"],{"0276":function(t,e,r){"use strict";r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1");var n=r("1c35"),i=r("aecc"),s=r("5319"),o=r("8ab6"),a=r("d129"),c=r("fa13"),u=r("8df2"),l=r("9ea2"),h=r("d920"),d=r("502a"),p=r("e01f"),m=r("136e"),g=r("00e3"),b=r("fb4a");function y(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}function f(t){if(t&&"object"===typeof t&&"default"in t)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var w=y(s),k=y(o),S=f(u),v=y(d),I=y(p),M=y(m);const A=i.ed25519.utils.randomPrivateKey,O=()=>{const t=i.ed25519.utils.randomPrivateKey(),e=T(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},T=i.ed25519.getPublicKey;function _(t){try{return i.ed25519.ExtendedPoint.fromHex(t),!0}catch{return!1}}const E=(t,e)=>i.ed25519.sign(t,e.slice(0,32)),j=i.ed25519.verify,B=t=>n.Buffer.isBuffer(t)?t:t instanceof Uint8Array?n.Buffer.from(t.buffer,t.byteOffset,t.byteLength):n.Buffer.from(t);class N{constructor(t){Object.assign(this,t)}encode(){return n.Buffer.from(c.serialize(P,this))}static decode(t){return c.deserialize(P,this,t)}static decodeUnchecked(t){return c.deserializeUnchecked(P,this,t)}}class x extends N{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map(t=>{this.enum=t})}}const P=new Map;var R;let L;const z=32,W=32;function U(t){return void 0!==t._bn}let C=1;L=Symbol.toStringTag;class D extends N{constructor(t){if(super({}),this._bn=void 0,U(t))this._bn=t._bn;else{if("string"===typeof t){const e=k.default.decode(t);if(e.length!=W)throw new Error("Invalid public key input");this._bn=new w.default(e)}else this._bn=new w.default(t);if(this._bn.byteLength()>W)throw new Error("Invalid public key input")}}static unique(){const t=new D(C);return C+=1,new D(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return k.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n.Buffer);if(t.length===W)return t;const e=n.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[L](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n.Buffer.concat([t.toBuffer(),n.Buffer.from(e),r.toBuffer()]),s=a.sha256(i);return new D(s)}static createProgramAddressSync(t,e){let r=n.Buffer.alloc(0);t.forEach((function(t){if(t.length>z)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,B(t)])})),r=n.Buffer.concat([r,e.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=a.sha256(r);if(_(i))throw new Error("Invalid seeds, address must fall off the curve");return new D(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new D(t);return _(e.toBytes())}}R=D,D.default=new R("11111111111111111111111111111111"),P.set(D,{kind:"struct",fields:[["_bn","u256"]]});class V{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=B(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=B(A()),this._publicKey=B(T(this._secretKey))}get publicKey(){return new D(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const F=new D("BPFLoader1111111111111111111111111111111111"),K=1232,Q=127,Z=64;class q extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(q.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class H extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(H.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Y extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Y.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class J{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const G=(t="publicKey")=>S.blob(32,t),X=(t="signature")=>S.blob(64,t),$=(t="string")=>{const e=S.struct([S.u32("length"),S.u32("lengthPadding"),S.blob(S.offset(S.u32(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n.Buffer.from(t,"utf8")};return i(s,e,r)},s.alloc=t=>S.u32().span+S.u32().span+n.Buffer.from(t,"utf8").length,s},tt=(t="authorized")=>S.struct([G("staker"),G("withdrawer")],t),et=(t="lockup")=>S.struct([S.ns64("unixTimestamp"),S.ns64("epoch"),G("custodian")],t),rt=(t="voteInit")=>S.struct([G("nodePubkey"),G("authorizedVoter"),G("authorizedWithdrawer"),S.u8("commission")],t),nt=(t="voteAuthorizeWithSeedArgs")=>S.struct([S.u32("voteAuthorizationType"),G("currentAuthorityDerivedKeyOwnerPubkey"),$("currentAuthorityDerivedKeySeed"),G("newAuthorized")],t);function it(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return it({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function st(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function ot(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function at(t,e){if(!t)throw new Error(e||"Assertion failed")}class ct{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new ct(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];at(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{at(e.length>0,"Expected at least one writable signer key");const[t]=e[0];at(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new D(t)),...r.map(([t])=>new D(t)),...n.map(([t])=>new D(t)),...i.map(([t])=>new D(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new D(i),s=t.findIndex(t=>t.equals(e));s>=0&&(at(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class ut{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new D(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new J(this.staticAccountKeys)}static compile(t){const e=ct.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new J(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:k.default.encode(t.data)}));return new ut({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ot(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(k.default.decode(t.data));let s=[];ot(s,e.length);let o=[];return ot(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:e,dataLength:n.Buffer.from(o),data:i}});let i=[];ot(i,r.length);let s=n.Buffer.alloc(K);n.Buffer.from(i).copy(s);let o=i.length;r.forEach(t=>{const e=S.struct([S.u8("programIdIndex"),S.blob(t.keyIndicesCount.length,"keyIndicesCount"),S.seq(S.u8("keyIndex"),t.keyIndices.length,"keyIndices"),S.blob(t.dataLength.length,"dataLength"),S.seq(S.u8("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=S.struct([S.blob(1,"numRequiredSignatures"),S.blob(1,"numReadonlySignedAccounts"),S.blob(1,"numReadonlyUnsignedAccounts"),S.blob(e.length,"keyCount"),S.seq(G("key"),t,"keys"),G("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(e),keys:this.accountKeys.map(t=>B(t.toBytes())),recentBlockhash:k.default.decode(this.recentBlockhash)};let u=n.Buffer.alloc(2048);const l=a.encode(c,u);return s.copy(u,l),u.slice(0,l+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Q))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=st(e);let a=[];for(let d=0;d<o;d++){const t=e.splice(0,W);a.push(new D(n.Buffer.from(t)))}const c=e.splice(0,W),u=st(e);let l=[];for(let d=0;d<u;d++){const t=e.shift(),r=st(e),i=e.splice(0,r),s=st(e),o=e.splice(0,s),a=k.default.encode(n.Buffer.from(o));l.push({programIdIndex:t,accounts:i,data:a})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:k.default.encode(n.Buffer.from(c)),accountKeys:a,instructions:l};return new ut(h)}}class lt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new J(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=ct.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new J(o,n),c=a.compileInstructions(t.instructions);return new lt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();ot(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ot(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();ot(i,this.addressTableLookups.length);const s=S.struct([S.u8("prefix"),S.struct([S.u8("numRequiredSignatures"),S.u8("numReadonlySignedAccounts"),S.u8("numReadonlyUnsignedAccounts")],"header"),S.blob(t.length,"staticAccountKeysLength"),S.seq(G(),this.staticAccountKeys.length,"staticAccountKeys"),G("recentBlockhash"),S.blob(r.length,"instructionsLength"),S.blob(e.length,"serializedInstructions"),S.blob(i.length,"addressTableLookupsLength"),S.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(K),a=128,c=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:k.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,c)}serializeInstructions(){let t=0;const e=new Uint8Array(K);for(const r of this.compiledInstructions){const n=Array();ot(n,r.accountKeyIndexes.length);const i=Array();ot(i,r.data.length);const s=S.struct([S.u8("programIdIndex"),S.blob(n.length,"encodedAccountKeyIndexesLength"),S.seq(S.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),S.blob(i.length,"encodedDataLength"),S.blob(r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(K);for(const r of this.addressTableLookups){const n=Array();ot(n,r.writableIndexes.length);const i=Array();ot(i,r.readonlyIndexes.length);const s=S.struct([G("accountKey"),S.blob(n.length,"encodedWritableIndexesLength"),S.seq(S.u8(),r.writableIndexes.length,"writableIndexes"),S.blob(i.length,"encodedReadonlyIndexesLength"),S.seq(S.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&Q;at(r!==n,"Expected versioned message but received legacy message");const i=n;at(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=st(e);for(let p=0;p<a;p++)o.push(new D(e.splice(0,W)));const c=k.default.encode(e.splice(0,W)),u=st(e),l=[];for(let p=0;p<u;p++){const t=e.shift(),r=st(e),n=e.splice(0,r),i=st(e),s=new Uint8Array(e.splice(0,i));l.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const h=st(e),d=[];for(let p=0;p<h;p++){const t=new D(e.splice(0,W)),r=st(e),n=e.splice(0,r),i=st(e),s=e.splice(0,i);d.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new lt({header:s,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:l,addressTableLookups:d})}}const ht={deserializeMessageVersion(t){const e=t[0],r=e&Q;return r===e?"legacy":r},deserialize:t=>{const e=ht.deserializeMessageVersion(t);if("legacy"===e)return ut.from(t);if(0===e)return lt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dt=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const pt=n.Buffer.alloc(Z).fill(0);class mt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class gt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new mt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let m=0;m<e.length;m++)if(void 0===e[m].programId)throw new Error(`Transaction instruction index ${m} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new D(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const m of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(m.publicKey));if(!(t>-1))throw new Error("unknown signer: "+m.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,c=0,u=0;const l=[],h=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(c+=1)):(h.push(t.toString()),r||(u+=1))});const d=l.concat(h),p=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:k.default.encode(e)}});return p.forEach(t=>{at(t.programIdIndex>=0),t.accounts.forEach(t=>at(t>=0))}),new ut({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:t,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=E(r,t.secretKey);this._addSignature(t.publicKey,B(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){at(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n.Buffer.from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):j(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];ot(r,e.length);const i=r.length+64*e.length+t.length,s=n.Buffer.alloc(i);return at(e.length<256),n.Buffer.from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(at(64===t.length,"signature has invalid length"),n.Buffer.from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),at(s.length<=K,`Transaction too large: ${s.length} > ${K}`),s}get keys(){return at(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return at(1===this.instructions.length),this.instructions[0].programId}get data(){return at(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=st(e);let i=[];for(let s=0;s<r;s++){const t=e.splice(0,Z);i.push(k.default.encode(n.Buffer.from(t)))}return gt.populate(ut.from(e),i)}static populate(t,e=[]){const r=new gt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==k.default.encode(pt)?null:k.default.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new mt({keys:n,programId:t.accountKeys[e.programIdIndex],data:k.default.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class bt{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;at(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;at(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new mt({programId:e,data:B(p.data),keys:t}))}return new bt({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return ut.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return lt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class yt{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)at(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Z));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ot(e,this.signatures.length);const r=S.struct([S.blob(e.length,"encodedSignaturesLength"),S.seq(X(),this.signatures.length,"signatures"),S.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=st(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,Z)));const i=ht.deserialize(new Uint8Array(e));return new yt(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));at(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=E(e,n.secretKey)}}addSignature(t,e){at(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));at(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const ft=160,wt=64,kt=ft/wt,St=1e3/kt,vt=new D("SysvarC1ock11111111111111111111111111111111"),It=new D("SysvarEpochSchedu1e111111111111111111111111"),Mt=new D("Sysvar1nstructions1111111111111111111111111"),At=new D("SysvarRecentB1ockHashes11111111111111111111"),Ot=new D("SysvarRent111111111111111111111111111111111"),Tt=new D("SysvarRewards111111111111111111111111111111"),_t=new D("SysvarS1otHashes111111111111111111111111111"),Et=new D("SysvarS1otHistory11111111111111111111111111"),jt=new D("SysvarStakeHistory1111111111111111111111111");async function Bt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Nt(t){return new Promise(e=>setTimeout(e,t))}function xt(t,e){const r=t.layout.span>=0?t.layout.span:it(t,e),i=n.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}function Pt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const Rt=S.nu64("lamportsPerSignature"),Lt=S.struct([S.u32("version"),S.u32("state"),G("authorizedPubkey"),G("nonce"),S.struct([Rt],"feeCalculator")]),zt=Lt.span;class Wt{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Lt.decode(B(t),0);return new Wt({authorizedPubkey:new D(e.authorizedPubkey),nonce:new D(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ut=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Ct=t=>e=>{const r=u.blob(t,e),{encode:i,decode:s}=Ut(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return l.toBigIntLE(n.Buffer.from(r))},o.encode=(e,r,n)=>{const s=l.toBufferLE(e,t);return i(s,r,n)},o},Dt=Ct(8);class Vt{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Ft))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=Pt(Ft.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new D(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Pt(Ft.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=Pt(Ft.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new D(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Pt(Ft.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=Pt(Ft.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,space:n,programId:new D(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Pt(Ft.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new D(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=Pt(Ft.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,programId:new D(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:s}=Pt(Ft.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new D(e),seed:r,lamports:n,space:i,programId:new D(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Pt(Ft.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new D(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Ft.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Pt(Ft.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Pt(Ft.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new D(e)}}static checkProgramId(t){if(!t.equals(Kt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ft=Object.freeze({Create:{index:0,layout:S.struct([S.u32("instruction"),S.ns64("lamports"),S.ns64("space"),G("programId")])},Assign:{index:1,layout:S.struct([S.u32("instruction"),G("programId")])},Transfer:{index:2,layout:S.struct([S.u32("instruction"),Dt("lamports")])},CreateWithSeed:{index:3,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),S.ns64("lamports"),S.ns64("space"),G("programId")])},AdvanceNonceAccount:{index:4,layout:S.struct([S.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:S.struct([S.u32("instruction"),G("authorized")])},AuthorizeNonceAccount:{index:7,layout:S.struct([S.u32("instruction"),G("authorized")])},Allocate:{index:8,layout:S.struct([S.u32("instruction"),S.ns64("space")])},AllocateWithSeed:{index:9,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),S.ns64("space"),G("programId")])},AssignWithSeed:{index:10,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),G("programId")])},TransferWithSeed:{index:11,layout:S.struct([S.u32("instruction"),Dt("lamports"),$("seed"),G("programId")])},UpgradeNonceAccount:{index:12,layout:S.struct([S.u32("instruction")])}});class Kt{constructor(){}static createAccount(t){const e=Ft.Create,r=xt(e,{lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});return new mt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Ft.TransferWithSeed;e=xt(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Ft.Transfer;e=xt(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Ft.AssignWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Ft.Assign;e=xt(n,{programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ft.CreateWithSeed,r=xt(e,{base:B(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new mt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new gt;"basePubkey"in t&&"seed"in t?e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zt,programId:this.programId})):e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Ft.InitializeNonceAccount,r=xt(e,{authorized:B(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new mt(n)}static nonceAdvance(t){const e=Ft.AdvanceNonceAccount,r=xt(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new mt(n)}static nonceWithdraw(t){const e=Ft.WithdrawNonceAccount,r=xt(e,{lamports:t.lamports});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:Ot,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Ft.AuthorizeNonceAccount,r=xt(e,{authorized:B(t.newAuthorizedPubkey.toBuffer())});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Ft.AllocateWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Ft.Allocate;e=xt(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}}Kt.programId=new D("11111111111111111111111111111111");const Qt=K-300;class Zt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Zt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new gt,a.add(Kt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new gt,a.add(Kt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new gt,a.add(Kt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new gt).add(Kt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await Bt(t,a,[e,r],{commitment:"confirmed"})}const o=S.struct([S.u32("instruction"),S.u32("offset"),S.u32("bytesLength"),S.u32("bytesLengthPadding"),S.seq(S.u8("byte"),S.offset(S.u32(),-8),"bytes")]),a=Zt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new gt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(Bt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await Nt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=S.struct([S.u32("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new gt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(St/2)))}}return!0}}Zt.chunkSize=Qt;const qt=new D("BPFLoader2111111111111111111111111111111111");class Ht{static getMinNumSignatures(t){return Zt.getMinNumSignatures(t)}static load(t,e,r,n,i){return Zt.load(t,e,r,i,n)}}function Yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Jt=Object.prototype.toString,Gt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Xt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Xt(t.toJSON(),e);if(c=Jt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Xt(t[r],!0)+",";return n>-1&&(i+=Xt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Gt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Xt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var $t=function(t){var e=Xt(t,!1);if(void 0!==e)return""+e},te=Yt($t);const ee=32;function re(t){let e=0;while(t>1)t/=2,e++;return e}function ne(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class ie{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=re(ne(t+ee+1))-re(ee)-1,r=this.getSlotsInEpoch(e),n=t-(r-ee);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ee:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+re(ee)):this.slotsPerEpoch}}class se extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}const oe={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ae extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var ce=globalThis.fetch;class ue extends I.default{constructor(t,e,r){const n=t=>{const r=M.default(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function le(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const he=56;class de{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=le(pe,t),r=t.length-he;at(r>=0,"lookup table is invalid"),at(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=S.struct([S.seq(G(),n,"addresses")]).decode(t.slice(he));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new D(e.authority[0]):void 0,addresses:i.map(t=>new D(t))}}}const pe={index:1,layout:S.struct([S.u32("typeIndex"),Dt("deactivationSlot"),S.nu64("lastExtendedSlot"),S.u8("lastExtendedStartIndex"),S.u8(),S.seq(G(),S.offset(S.u8(),-1),"authority")])},me=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function ge(t){const e=t.match(me);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const be=h.coerce(h.instance(D),h.string(),t=>new D(t)),ye=h.tuple([h.string(),h.literal("base64")]),fe=h.coerce(h.instance(n.Buffer),ye,t=>n.Buffer.from(t[0],"base64")),we=3e4;function ke(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Se(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function ve(t){return h.union([h.type({jsonrpc:h.literal("2.0"),id:h.string(),result:t}),h.type({jsonrpc:h.literal("2.0"),id:h.string(),error:h.type({code:h.unknown(),message:h.string(),data:h.optional(h.any())})})])}const Ie=ve(h.unknown());function Me(t){return h.coerce(ve(t),Ie,e=>"error"in e?e:{...e,result:h.create(e.result,t)})}function Ae(t){return Me(h.type({context:h.type({slot:h.number()}),value:t}))}function Oe(t){return h.type({context:h.type({slot:h.number()}),value:t})}function Te(t,e){return 0===t?new lt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new D(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new ut(e)}const _e=h.type({foundation:h.number(),foundationTerm:h.number(),initial:h.number(),taper:h.number(),terminal:h.number()}),Ee=Me(h.array(h.nullable(h.type({epoch:h.number(),effectiveSlot:h.number(),amount:h.number(),postBalance:h.number(),commission:h.optional(h.nullable(h.number()))})))),je=h.array(h.type({slot:h.number(),prioritizationFee:h.number()})),Be=h.type({total:h.number(),validator:h.number(),foundation:h.number(),epoch:h.number()}),Ne=h.type({epoch:h.number(),slotIndex:h.number(),slotsInEpoch:h.number(),absoluteSlot:h.number(),blockHeight:h.optional(h.number()),transactionCount:h.optional(h.number())}),xe=h.type({slotsPerEpoch:h.number(),leaderScheduleSlotOffset:h.number(),warmup:h.boolean(),firstNormalEpoch:h.number(),firstNormalSlot:h.number()}),Pe=h.record(h.string(),h.array(h.number())),Re=h.nullable(h.union([h.type({}),h.string()])),Le=h.type({err:Re}),ze=h.literal("receivedSignature"),We=h.type({"solana-core":h.string(),"feature-set":h.optional(h.number())}),Ue=Ae(h.type({err:h.nullable(h.union([h.type({}),h.string()])),logs:h.nullable(h.array(h.string())),accounts:h.optional(h.nullable(h.array(h.nullable(h.type({executable:h.boolean(),owner:h.string(),lamports:h.number(),data:h.array(h.string()),rentEpoch:h.optional(h.number())}))))),unitsConsumed:h.optional(h.number()),returnData:h.optional(h.nullable(h.type({programId:h.string(),data:h.tuple([h.string(),h.literal("base64")])})))})),Ce=Ae(h.type({byIdentity:h.record(h.string(),h.array(h.number())),range:h.type({firstSlot:h.number(),lastSlot:h.number()})}));function De(t,e,r,n,i,s){const o=r||ce;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new v.default(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},hn)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await Nt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function Ve(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Fe(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Ke=Me(_e),Qe=Me(Be),Ze=Me(je),qe=Me(Ne),He=Me(xe),Ye=Me(Pe),Je=Me(h.number()),Ge=Ae(h.type({total:h.number(),circulating:h.number(),nonCirculating:h.number(),nonCirculatingAccounts:h.array(be)})),Xe=h.type({amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}),$e=Ae(h.array(h.type({address:be,amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}))),tr=Ae(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:fe,rentEpoch:h.number()})}))),er=h.type({program:h.string(),parsed:h.unknown(),space:h.number()}),rr=Ae(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:er,rentEpoch:h.number()})}))),nr=Ae(h.array(h.type({lamports:h.number(),address:be}))),ir=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:fe,rentEpoch:h.number()}),sr=h.type({pubkey:be,account:ir}),or=h.coerce(h.union([h.instance(n.Buffer),er]),h.union([ye,er]),t=>Array.isArray(t)?h.create(t,fe):t),ar=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:or,rentEpoch:h.number()}),cr=h.type({pubkey:be,account:ar}),ur=h.type({state:h.union([h.literal("active"),h.literal("inactive"),h.literal("activating"),h.literal("deactivating")]),active:h.number(),inactive:h.number()}),lr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Re,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),hr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Re,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),dr=h.type({subscription:h.number(),result:Oe(ir)}),pr=h.type({pubkey:be,account:ir}),mr=h.type({subscription:h.number(),result:Oe(pr)}),gr=h.type({parent:h.number(),slot:h.number(),root:h.number()}),br=h.type({subscription:h.number(),result:gr}),yr=h.union([h.type({type:h.union([h.literal("firstShredReceived"),h.literal("completed"),h.literal("optimisticConfirmation"),h.literal("root")]),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("createdBank"),parent:h.number(),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("frozen"),slot:h.number(),timestamp:h.number(),stats:h.type({numTransactionEntries:h.number(),numSuccessfulTransactions:h.number(),numFailedTransactions:h.number(),maxTransactionsPerEntry:h.number()})}),h.type({type:h.literal("dead"),slot:h.number(),timestamp:h.number(),err:h.string()})]),fr=h.type({subscription:h.number(),result:yr}),wr=h.type({subscription:h.number(),result:Oe(h.union([Le,ze]))}),kr=h.type({subscription:h.number(),result:h.number()}),Sr=h.type({pubkey:h.string(),gossip:h.nullable(h.string()),tpu:h.nullable(h.string()),rpc:h.nullable(h.string()),version:h.nullable(h.string())}),vr=h.type({votePubkey:h.string(),nodePubkey:h.string(),activatedStake:h.number(),epochVoteAccount:h.boolean(),epochCredits:h.array(h.tuple([h.number(),h.number(),h.number()])),commission:h.number(),lastVote:h.number(),rootSlot:h.nullable(h.number())}),Ir=Me(h.type({current:h.array(vr),delinquent:h.array(vr)})),Mr=h.union([h.literal("processed"),h.literal("confirmed"),h.literal("finalized")]),Ar=h.type({slot:h.number(),confirmations:h.nullable(h.number()),err:Re,confirmationStatus:h.optional(Mr)}),Or=Ae(h.array(h.nullable(Ar))),Tr=Me(h.number()),_r=h.type({accountKey:be,writableIndexes:h.array(h.number()),readonlyIndexes:h.array(h.number())}),Er=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(h.string()),header:h.type({numRequiredSignatures:h.number(),numReadonlySignedAccounts:h.number(),numReadonlyUnsignedAccounts:h.number()}),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()})),recentBlockhash:h.string(),addressTableLookups:h.optional(h.array(_r))})}),jr=h.type({pubkey:be,signer:h.boolean(),writable:h.boolean(),source:h.optional(h.union([h.literal("transaction"),h.literal("lookupTable")]))}),Br=h.type({accountKeys:h.array(jr),signatures:h.array(h.string())}),Nr=h.type({parsed:h.unknown(),program:h.string(),programId:be}),xr=h.type({accounts:h.array(be),data:h.string(),programId:be}),Pr=h.union([xr,Nr]),Rr=h.union([h.type({parsed:h.unknown(),program:h.string(),programId:h.string()}),h.type({accounts:h.array(h.string()),data:h.string(),programId:h.string()})]),Lr=h.coerce(Pr,Rr,t=>"accounts"in t?h.create(t,xr):h.create(t,Nr)),zr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(jr),instructions:h.array(Lr),recentBlockhash:h.string(),addressTableLookups:h.optional(h.nullable(h.array(_r)))})}),Wr=h.type({accountIndex:h.number(),mint:h.string(),owner:h.optional(h.string()),uiTokenAmount:Xe}),Ur=h.type({writable:h.array(be),readonly:h.array(be)}),Cr=h.type({err:Re,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()}))})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Wr))),postTokenBalances:h.optional(h.nullable(h.array(Wr))),loadedAddresses:h.optional(Ur),computeUnitsConsumed:h.optional(h.number())}),Dr=h.type({err:Re,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(Lr)})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Wr))),postTokenBalances:h.optional(h.nullable(h.array(Wr))),loadedAddresses:h.optional(Ur),computeUnitsConsumed:h.optional(h.number())}),Vr=h.union([h.literal(0),h.literal("legacy")]),Fr=h.type({pubkey:h.string(),lamports:h.number(),postBalance:h.nullable(h.number()),rewardType:h.nullable(h.string()),commission:h.optional(h.nullable(h.number()))}),Kr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Er,meta:h.nullable(Cr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Zr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Cr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:zr,meta:h.nullable(Dr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Hr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Dr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Yr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Jr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Er,meta:h.nullable(Cr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number())}))),Gr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),signatures:h.array(h.string()),blockTime:h.nullable(h.number())}))),Xr=Me(h.nullable(h.type({slot:h.number(),meta:h.nullable(Cr),blockTime:h.optional(h.nullable(h.number())),transaction:Er,version:h.optional(Vr)}))),$r=Me(h.nullable(h.type({slot:h.number(),transaction:zr,meta:h.nullable(Dr),blockTime:h.optional(h.nullable(h.number())),version:h.optional(Vr)}))),tn=Ae(h.type({blockhash:h.string(),feeCalculator:h.type({lamportsPerSignature:h.number()})})),en=Ae(h.type({blockhash:h.string(),lastValidBlockHeight:h.number()})),rn=Ae(h.boolean()),nn=h.type({slot:h.number(),numTransactions:h.number(),numSlots:h.number(),samplePeriodSecs:h.number()}),sn=Me(h.array(nn)),on=Ae(h.nullable(h.type({feeCalculator:h.type({lamportsPerSignature:h.number()})}))),an=Me(h.string()),cn=Me(h.string()),un=h.type({err:Re,logs:h.array(h.string()),signature:h.string()}),ln=h.type({result:Oe(un),subscription:h.number()}),hn={"solana-client":"js/0.0.0-development"};class dn{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=Se(e),s=this._buildArgs([],n,void 0,i),o=te(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=h.create(e,Me(h.number()));if("error"in r)throw new ae(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ke(t),this._rpcWsEndpoint=r||ge(t),this._rpcClient=De(t,n,i,s,o,a),this._rpcRequest=Ve(this._rpcClient),this._rpcBatchRequest=Fe(this._rpcClient),this._rpcWebSocket=new ue(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=h.create(s,Ae(h.number()));if("error"in o)throw new ae(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=h.create(e,Me(h.nullable(h.number())));if("error"in r)throw new ae(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=h.create(t,Me(h.number()));if("error"in e)throw new ae(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=h.create(t,Je);if("error"in e)throw new ae(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=h.create(r,Ge);if("error"in n)throw new ae(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=h.create(n,Ae(Xe));if("error"in i)throw new ae(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=h.create(n,Ae(Xe));if("error"in i)throw new ae(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Se(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=h.create(a,tr);if("error"in c)throw new ae(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=h.create(s,rr);if("error"in o)throw new ae(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=h.create(n,nr);if("error"in i)throw new ae(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=h.create(n,$e);if("error"in i)throw new ae(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,Ae(h.nullable(ir)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,Ae(h.nullable(ar)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,Ae(h.array(h.nullable(ar))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,Ae(h.array(h.nullable(ir))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Se(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=h.create(o,Me(ur));if("error"in a)throw new ae(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=h.array(sr),u=!0===s.withContext?h.create(a,Ae(c)):h.create(a,Me(c));if("error"in u)throw new ae(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=h.create(s,Me(h.array(cr)));if("error"in o)throw new ae(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=k.default.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return at(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:dt.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:dt.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await Nt(1e3),i)return;if(t=await n(),i)return}e({__type:dt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==dt.PROCESSED)throw new q(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:dt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Nt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===dt.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await Nt(400)}if(null===(d=n)||void 0===d||!d.value)throw new Y(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Y(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:dt.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==dt.PROCESSED)throw new H(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=h.create(t,Me(h.array(Sr)));if("error"in e)throw new ae(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=h.create(r,Ir);if("error"in n)throw new ae(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=h.create(i,Me(h.string()));if("error"in s)throw new ae(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=h.create(n,Me(h.array(be)));if("error"in i)throw new ae(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);at(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=h.create(n,Or);if("error"in i)throw new ae(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=h.create(r,Ke);if("error"in n)throw new ae(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Se(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=h.create(o,Ee);if("error"in a)throw new ae(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=h.create(t,Qe);if("error"in e)throw new ae(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=h.create(i,qe);if("error"in s)throw new ae(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=h.create(t,He);if("error"in e)throw new ae(e.error,"failed to get epoch schedule");const r=e.result;return new ie(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=h.create(t,Ye);if("error"in e)throw new ae(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=h.create(n,Tr);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=h.create(r,tn);if("error"in n)throw new ae(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=h.create(e,sn);if("error"in r)throw new ae(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=h.create(n,on);if("error"in i)throw new ae(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=B(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=h.create(i,Ae(h.nullable(h.number())));if("error"in s)throw new ae(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=h.create(i,Ze);if("error"in s)throw new ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=h.create(i,en);if("error"in s)throw new ae(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=h.create(s,rn);if("error"in o)throw new ae(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=h.create(t,Me(We));if("error"in e)throw new ae(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=h.create(t,Me(h.string()));if("error"in e)throw new ae(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Zr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Qr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Kr);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:Te(r,t.message)},version:r}))}:null}}}catch(o){throw new ae(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Hr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Yr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,qr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new ae(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=h.create(i,Ce);if("error"in s)throw new ae(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,Xr);if("error"in o)throw new ae(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:Te(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,$r);if("error"in o)throw new ae(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,Xr);if("error"in e)throw new ae(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:Te(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new ut(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:gt.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=h.create(i,Me(h.array(h.number())));if("error"in s)throw new ae(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,Xr);if("error"in i)throw new ae(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new ut(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:gt.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,$r);if("error"in i)throw new ae(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=h.create(i,lr);if("error"in s)throw new ae(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=h.create(i,hr);if("error"in s)throw new ae(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new de({key:t,state:de.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=Wt.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=h.create(r,an);if("error"in n)throw new ae(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await Nt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=we;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await Nt(St/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=h.create(i,Ae(h.number()));if("error"in s)throw new ae(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=h.create(u,Ue);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof gt){let e=t;i=new gt,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=gt.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const d=[u,l],p=await this._rpcRequest("simulateTransaction",d),m=h.create(p,Ue);if("error"in m){let t;if("data"in m.error&&(t=m.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new se("failed to simulate transaction: "+m.error.message,t)}return m.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=B(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=h.create(o,cn);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new se("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=h.create(t,dr);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=te([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];at(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=h.create(t,mr);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=h.create(t,ln);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=h.create(t,br);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=h.create(t,fr);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=h.create(t,wr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=h.create(t,kr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class pn{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:O()}static generate(){return new pn(O())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=T(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new pn({publicKey:r,secretKey:t})}static fromSeed(t){const e=T(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new pn({publicKey:e,secretKey:r})}get publicKey(){return new D(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const mn=Object.freeze({CreateLookupTable:{index:0,layout:S.struct([S.u32("instruction"),Dt("recentSlot"),S.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:S.struct([S.u32("instruction")])},ExtendLookupTable:{index:2,layout:S.struct([S.u32("instruction"),Dt(),S.seq(G(),S.offset(S.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:S.struct([S.u32("instruction")])},CloseLookupTable:{index:4,layout:S.struct([S.u32("instruction")])}});class gn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(mn))if(s.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Pt(mn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Pt(mn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(t=>new D(t))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(bn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class bn{constructor(){}static createLookupTable(t){const[e,r]=D.findProgramAddressSync([t.authority.toBuffer(),l.toBufferLE(BigInt(t.recentSlot),8)],this.programId),n=mn.CreateLookupTable,i=xt(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}];return[new mt({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=mn.FreezeLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=mn.ExtendLookupTable,r=xt(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}),new mt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=mn.DeactivateLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=mn.CloseLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new mt({programId:this.programId,keys:n,data:r})}}bn.programId=new D("AddressLookupTab1e1111111111111111111111111");class yn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u8("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(fn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Pt(fn.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Pt(fn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Pt(fn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Pt(fn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(wn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const fn=Object.freeze({RequestUnits:{index:0,layout:S.struct([S.u8("instruction"),S.u32("units"),S.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:S.struct([S.u8("instruction"),S.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:S.struct([S.u8("instruction"),S.u32("units")])},SetComputeUnitPrice:{index:3,layout:S.struct([S.u8("instruction"),Dt("microLamports")])}});class wn{constructor(){}static requestUnits(t){const e=fn.RequestUnits,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=fn.RequestHeapFrame,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=fn.SetComputeUnitLimit,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=fn.SetComputeUnitPrice,r=xt(e,{microLamports:BigInt(t.microLamports)});return new mt({keys:[],programId:this.programId,data:r})}}wn.programId=new D("ComputeBudget111111111111111111111111111111");const kn=64,Sn=32,vn=64,In=S.struct([S.u8("numSignatures"),S.u8("padding"),S.u16("signatureOffset"),S.u16("signatureInstructionIndex"),S.u16("publicKeyOffset"),S.u16("publicKeyInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u16("messageInstructionIndex")]);class Mn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;at(e.length===Sn,`Public Key must be ${Sn} bytes but received ${e.length} bytes`),at(i.length===vn,`Signature must be ${vn} bytes but received ${i.length} bytes`);const o=In.span,a=o+e.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return In.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new mt({keys:[],programId:Mn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===kn,`Private key must be ${kn} bytes but received ${e.length} bytes`);try{const t=pn.fromSecretKey(e),i=t.publicKey.toBytes(),s=E(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}Mn.programId=new D("Ed25519SigVerify111111111111111111111111111");const An=(t,e)=>{const r=b.secp256k1.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};b.secp256k1.utils.isValidPrivateKey;const On=b.secp256k1.getPublicKey,Tn=32,_n=20,En=64,jn=11,Bn=S.struct([S.u8("numSignatures"),S.u16("signatureOffset"),S.u8("signatureInstructionIndex"),S.u16("ethAddressOffset"),S.u8("ethAddressInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u8("messageInstructionIndex"),S.blob(20,"ethAddress"),S.blob(64,"signature"),S.u8("recoveryId")]);class Nn{constructor(){}static publicKeyToEthAddress(t){at(t.length===En,`Public key must be ${En} bytes but received ${t.length} bytes`);try{return n.Buffer.from(g.keccak_256(B(t))).slice(-_n)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return Nn.createInstructionWithEthAddress({ethAddress:Nn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n.Buffer.from(e.substr(2),"hex"):n.Buffer.from(e,"hex"):e,at(a.length===_n,`Address must be ${_n} bytes but received ${a.length} bytes`);const c=1+jn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(Bn.span+r.length);return Bn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:B(i),ethAddress:B(a),recoveryId:s},p),p.fill(B(r),Bn.span),new mt({keys:[],programId:Nn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;at(e.length===Tn,`Private key must be ${Tn} bytes but received ${e.length} bytes`);try{const t=B(e),s=On(t,!1).slice(1),o=n.Buffer.from(g.keccak_256(B(r))),[a,c]=An(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var xn;Nn.programId=new D("KeccakSecp256k11111111111111111111111111111");const Pn=new D("StakeConfig11111111111111111111111111111111");class Rn{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Ln{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}xn=Ln,Ln.default=new xn(0,0,D.default);class zn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Wn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Pt(Wn.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Rn(new D(e.staker),new D(e.withdrawer)),lockup:new Ln(r.unixTimestamp,r.epoch,new D(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Pt(Wn.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Pt(Wn.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=Pt(Wn.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new D(i),newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Pt(Wn.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Wn.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Pt(Wn.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Wn.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Cn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Wn=Object.freeze({Initialize:{index:0,layout:S.struct([S.u32("instruction"),tt(),et()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:S.struct([S.u32("instruction")])},Split:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Withdraw:{index:4,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Deactivate:{index:5,layout:S.struct([S.u32("instruction")])},Merge:{index:7,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("stakeAuthorizationType"),$("authoritySeed"),G("authorityOwner")])}}),Un=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Ln.default,s=Wn.Initialize,o=xt(s,{authorized:{staker:B(r.staker.toBuffer()),withdrawer:B(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:B(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new mt(a)}static createAccountWithSeed(t){const e=new gt;e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new gt;e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=Wn.Delegate,s=xt(i);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:Pn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=Wn.Authorize,a=xt(o,{newAuthorized:B(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new gt).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=Wn.AuthorizeWithSeed,u=xt(c,{newAuthorized:B(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:B(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new gt).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=Wn.Split,o=xt(s,{lamports:i});return new mt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new gt;return r.add(Kt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new gt;return c.add(Kt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(Kt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=Wn.Merge,s=xt(i);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=Wn.Withdraw,a=xt(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new gt).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=Wn.Deactivate,i=xt(n);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Cn.programId=new D("Stake11111111111111111111111111111111111111"),Cn.space=200;class Dn{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}class Vn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Fn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Pt(Fn.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Dn(new D(e.nodePubkey),new D(e.authorizedVoter),new D(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Pt(Fn.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=Pt(Fn.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new D(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new D(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Pt(Fn.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Qn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Fn=Object.freeze({InitializeAccount:{index:0,layout:S.struct([S.u32("instruction"),rt()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:S.struct([S.u32("instruction"),nt()])}}),Kn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Qn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=Fn.InitializeAccount,s=xt(i,{voteInit:{nodePubkey:B(n.nodePubkey.toBuffer()),authorizedVoter:B(n.authorizedVoter.toBuffer()),authorizedWithdrawer:B(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new mt(o)}static createAccount(t){const e=new gt;return e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=Fn.Authorize,o=xt(s,{newAuthorized:B(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=Fn.AuthorizeWithSeed,c=xt(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:B(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:B(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new gt).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=Fn.Withdraw,o=xt(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Qn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=Fn.UpdateValidatorIdentity,s=xt(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:o,programId:this.programId,data:s})}}Qn.programId=new D("Vote111111111111111111111111111111111111111"),Qn.space=3762;const Zn=new D("Va1idator1nfo111111111111111111111111111111"),qn=h.type({name:h.string(),website:h.optional(h.string()),details:h.optional(h.string()),keybaseUsername:h.optional(h.string())});class Hn{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];const r=st(e);if(2!==r)return null;const i=[];for(let n=0;n<2;n++){const t=new D(e.splice(0,W)),r=1===e.splice(0,1)[0];i.push({publicKey:t,isSigner:r})}if(i[0].publicKey.equals(Zn)&&i[1].isSigner){const t=$().decode(n.Buffer.from(e)),r=JSON.parse(t);return h.assert(r,qn),new Hn(i[1].publicKey,r)}return null}}const Yn=new D("Vote111111111111111111111111111111111111111"),Jn=S.struct([G("nodePubkey"),G("authorizedWithdrawer"),S.u8("commission"),S.nu64(),S.seq(S.struct([S.nu64("slot"),S.u32("confirmationCount")]),S.offset(S.u32(),-8),"votes"),S.u8("rootSlotValid"),S.nu64("rootSlot"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),G("authorizedVoter")]),S.offset(S.u32(),-8),"authorizedVoters"),S.struct([S.seq(S.struct([G("authorizedPubkey"),S.nu64("epochOfLastAuthorizedSwitch"),S.nu64("targetEpoch")]),32,"buf"),S.nu64("idx"),S.u8("isEmpty")],"priorVoters"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),S.nu64("credits"),S.nu64("prevCredits")]),S.offset(S.u32(),-8),"epochCredits"),S.struct([S.nu64("slot"),S.nu64("timestamp")],"lastTimestamp")]);class Gn{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=4,r=Jn.decode(B(t),e);let n=r.rootSlot;return r.rootSlotValid||(n=null),new Gn({nodePubkey:new D(r.nodePubkey),authorizedWithdrawer:new D(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Xn),priorVoters:ti(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xn({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new D(t)}}function $n({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new D(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function ti({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map($n),...t.slice(0,e).map($n)]}const ei={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ri(t,e){const r=!1===e?"http":"https";if(!t)return ei[r]["devnet"];const n=ei[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function ni(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),l=(await u).value;if(l.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`);return a}const ii=1e9;e.Account=V,e.AddressLookupTableAccount=de,e.AddressLookupTableInstruction=gn,e.AddressLookupTableProgram=bn,e.Authorized=Rn,e.BLOCKHASH_CACHE_TIMEOUT_MS=we,e.BPF_LOADER_DEPRECATED_PROGRAM_ID=F,e.BPF_LOADER_PROGRAM_ID=qt,e.BpfLoader=Ht,e.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=fn,e.ComputeBudgetInstruction=yn,e.ComputeBudgetProgram=wn,e.Connection=dn,e.Ed25519Program=Mn,e.Enum=x,e.EpochSchedule=ie,e.FeeCalculatorLayout=Rt,e.Keypair=pn,e.LAMPORTS_PER_SOL=ii,e.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=mn,e.Loader=Zt,e.Lockup=Ln,e.MAX_SEED_LENGTH=z,e.Message=ut,e.MessageAccountKeys=J,e.MessageV0=lt,e.NONCE_ACCOUNT_LENGTH=zt,e.NonceAccount=Wt,e.PACKET_DATA_SIZE=K,e.PUBLIC_KEY_LENGTH=W,e.PublicKey=D,e.SIGNATURE_LENGTH_IN_BYTES=Z,e.SOLANA_SCHEMA=P,e.STAKE_CONFIG_ID=Pn,e.STAKE_INSTRUCTION_LAYOUTS=Wn,e.SYSTEM_INSTRUCTION_LAYOUTS=Ft,e.SYSVAR_CLOCK_PUBKEY=vt,e.SYSVAR_EPOCH_SCHEDULE_PUBKEY=It,e.SYSVAR_INSTRUCTIONS_PUBKEY=Mt,e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=At,e.SYSVAR_RENT_PUBKEY=Ot,e.SYSVAR_REWARDS_PUBKEY=Tt,e.SYSVAR_SLOT_HASHES_PUBKEY=_t,e.SYSVAR_SLOT_HISTORY_PUBKEY=Et,e.SYSVAR_STAKE_HISTORY_PUBKEY=jt,e.Secp256k1Program=Nn,e.SendTransactionError=se,e.SolanaJSONRPCError=ae,e.SolanaJSONRPCErrorCode=oe,e.StakeAuthorizationLayout=Un,e.StakeInstruction=zn,e.StakeProgram=Cn,e.Struct=N,e.SystemInstruction=Vt,e.SystemProgram=Kt,e.Transaction=gt,e.TransactionExpiredBlockheightExceededError=q,e.TransactionExpiredNonceInvalidError=Y,e.TransactionExpiredTimeoutError=H,e.TransactionInstruction=mt,e.TransactionMessage=bt,e.TransactionStatus=dt,e.VALIDATOR_INFO_KEY=Zn,e.VERSION_PREFIX_MASK=Q,e.VOTE_PROGRAM_ID=Yn,e.ValidatorInfo=Hn,e.VersionedMessage=ht,e.VersionedTransaction=yt,e.VoteAccount=Gn,e.VoteAuthorizationLayout=Kn,e.VoteInit=Dn,e.VoteInstruction=Vn,e.VoteProgram=Qn,e.clusterApiUrl=ri,e.sendAndConfirmRawTransaction=ni,e.sendAndConfirmTransaction=Bt},"0f06":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d}));var n,i=r("8df2"),s=r("633a"),o=r("d6e3"),a=r("753b"),c=r("d99e"),u=(r("7f6a"),r("f7f2"));(function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["Initialized"]=1]="Initialized",t[t["Frozen"]=2]="Frozen"})(n||(n={}));const l=Object(i["struct"])([Object(s["b"])("mint"),Object(s["b"])("owner"),Object(s["c"])("amount"),Object(i["u32"])("delegateOption"),Object(s["b"])("delegate"),Object(i["u8"])("state"),Object(i["u32"])("isNativeOption"),Object(s["c"])("isNative"),Object(s["c"])("delegatedAmount"),Object(i["u32"])("closeAuthorityOption"),Object(s["b"])("closeAuthority")]),h=l.span;async function d(t,e,r,n=o["c"]){const i=await t.getAccountInfo(e,r);return p(e,i,n)}function p(e,r,i=o["c"]){if(!r)throw new a["a"];if(!r.owner.equals(i))throw new a["c"];if(r.data.length<h)throw new a["d"];const s=l.decode(r.data.slice(0,h));let d=t.alloc(0);if(r.data.length>h){if(r.data.length===u["a"])throw new a["d"];if(r.data[h]!=c["b"].Account)throw new a["b"];d=r.data.slice(h+c["a"])}return{address:e,mint:s.mint,owner:s.owner,amount:s.amount,delegate:s.delegateOption?s.delegate:null,delegatedAmount:s.delegatedAmount,isInitialized:s.state!==n.Uninitialized,isFrozen:s.state===n.Frozen,isNative:!!s.isNativeOption,rentExemptReserve:s.isNativeOption?s.isNative:null,closeAuthority:s.closeAuthorityOption?s.closeAuthority:null,tlvData:d}}}).call(this,r("1c35").Buffer)},"0fa3":function(t,e,r){"use strict";r("14d9");var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?r(t.value):i(t.value).then(o,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseSignInMessageSignerWalletAdapter=e.BaseMessageSignerWalletAdapter=e.BaseSignerWalletAdapter=void 0;const s=r("834f"),o=r("8217"),a=r("e1c8");class c extends s.BaseWalletAdapter{sendTransaction(t,e,r={}){return n(this,void 0,void 0,(function*(){let n=!0;try{if((0,a.isVersionedTransaction)(t)){if(!this.supportedTransactionVersions)throw new o.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new o.WalletSendTransactionError(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=yield this.signTransaction(t);const n=t.serialize();return yield e.sendRawTransaction(n,r)}catch(s){if(s instanceof o.WalletSignTransactionError)throw n=!1,s;throw new o.WalletSendTransactionError(null===s||void 0===s?void 0:s.message,s)}}else try{const{signers:n}=r,s=i(r,["signers"]);t=yield this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),t=yield this.signTransaction(t);const o=t.serialize();return yield e.sendRawTransaction(o,s)}catch(s){if(s instanceof o.WalletSignTransactionError)throw n=!1,s;throw new o.WalletSendTransactionError(null===s||void 0===s?void 0:s.message,s)}}catch(s){throw n&&this.emit("error",s),s}}))}signAllTransactions(t){return n(this,void 0,void 0,(function*(){for(const r of t)if((0,a.isVersionedTransaction)(r)){if(!this.supportedTransactionVersions)throw new o.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new o.WalletSignTransactionError(`Signing transaction version ${r.version} isn't supported by this wallet`)}const e=[];for(const r of t)e.push(yield this.signTransaction(r));return e}))}}e.BaseSignerWalletAdapter=c;class u extends c{}e.BaseMessageSignerWalletAdapter=u;class l extends u{}e.BaseSignInMessageSignerWalletAdapter=l},"17fd":function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c}));var n=r("8df2"),i=(r("7f6a"),r("64b9"),r("633a"));r("753b"),r("7b05");const s=Object(n["struct"])([Object(i["b"])("authority"),Object(i["b"])("programId")]),o=s.span;const a=Object(n["struct"])([Object(i["a"])("transferring")]),c=a.span;const u=Object(n["struct"])([Object(n["u8"])("discriminator"),Object(n["blob"])(32,"addressConfig"),Object(i["a"])("isSigner"),Object(i["a"])("isWritable")]),l=Object(n["struct"])([Object(n["u32"])("count"),Object(n["seq"])(u,Object(n["greedy"])(u.span),"extraAccounts")]);Object(n["struct"])([Object(i["c"])("instructionDiscriminator"),Object(n["u32"])("length"),l.replicate("extraAccountsList")])}).call(this,r("1c35").Buffer)},"1b1b":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signTransaction"},"1bd0":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return l}));var n=r("8df2"),i=r("633a"),s=r("64b9"),o=r("d6e3"),a=(r("753b"),r("abed")),c=r("fbe3");const u=Object(n["struct"])([Object(n["u8"])("instruction"),Object(i["c"])("amount")]);function l(e,r,n,i,l=[],h=o["c"]){const d=Object(a["a"])([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0}],n,l),p=t.alloc(u.span);return u.encode({instruction:c["a"].Transfer,amount:BigInt(i)},p),new s["j"]({keys:d,programId:h,data:p})}}).call(this,r("1c35").Buffer)},2923:function(t,e,r){"use strict";r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1");var n=r("1c35"),i=r("aecc"),s=r("8785"),o=r("405f"),a=r("d129"),c=r("fa13"),u=r("8df2"),l=r("9ea2"),h=r("d920"),d=r("502a"),p=r("e01f"),m=r("136e"),g=r("00e3"),b=r("fb4a");function y(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}function f(t){if(t&&"object"===typeof t&&"default"in t)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}})),e.default=t,Object.freeze(e)}var w=y(s),k=y(o),S=f(u),v=y(d),I=y(p),M=y(m);const A=i.ed25519.utils.randomPrivateKey,O=()=>{const t=i.ed25519.utils.randomPrivateKey(),e=T(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},T=i.ed25519.getPublicKey;function _(t){try{return i.ed25519.ExtendedPoint.fromHex(t),!0}catch{return!1}}const E=(t,e)=>i.ed25519.sign(t,e.slice(0,32)),j=i.ed25519.verify,B=t=>n.Buffer.isBuffer(t)?t:t instanceof Uint8Array?n.Buffer.from(t.buffer,t.byteOffset,t.byteLength):n.Buffer.from(t);class N{constructor(t){Object.assign(this,t)}encode(){return n.Buffer.from(c.serialize(P,this))}static decode(t){return c.deserialize(P,this,t)}static decodeUnchecked(t){return c.deserializeUnchecked(P,this,t)}}class x extends N{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map(t=>{this.enum=t})}}const P=new Map;var R;let L;const z=32,W=32;function U(t){return void 0!==t._bn}let C=1;L=Symbol.toStringTag;class D extends N{constructor(t){if(super({}),this._bn=void 0,U(t))this._bn=t._bn;else{if("string"===typeof t){const e=k.default.decode(t);if(e.length!=W)throw new Error("Invalid public key input");this._bn=new w.default(e)}else this._bn=new w.default(t);if(this._bn.byteLength()>W)throw new Error("Invalid public key input")}}static unique(){const t=new D(C);return C+=1,new D(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return k.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n.Buffer);if(t.length===W)return t;const e=n.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[L](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n.Buffer.concat([t.toBuffer(),n.Buffer.from(e),r.toBuffer()]),s=a.sha256(i);return new D(s)}static createProgramAddressSync(t,e){let r=n.Buffer.alloc(0);t.forEach((function(t){if(t.length>z)throw new TypeError("Max seed length exceeded");r=n.Buffer.concat([r,B(t)])})),r=n.Buffer.concat([r,e.toBuffer(),n.Buffer.from("ProgramDerivedAddress")]);const i=a.sha256(r);if(_(i))throw new Error("Invalid seeds, address must fall off the curve");return new D(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n.Buffer.from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new D(t);return _(e.toBytes())}}R=D,D.default=new R("11111111111111111111111111111111"),P.set(D,{kind:"struct",fields:[["_bn","u256"]]});class V{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=B(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=B(A()),this._publicKey=B(T(this._secretKey))}get publicKey(){return new D(this._publicKey)}get secretKey(){return n.Buffer.concat([this._secretKey,this._publicKey],64)}}const F=new D("BPFLoader1111111111111111111111111111111111"),K=1232,Q=127,Z=64;class q extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(q.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class H extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(H.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Y extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Y.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class J{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const G=(t="publicKey")=>S.blob(32,t),X=(t="signature")=>S.blob(64,t),$=(t="string")=>{const e=S.struct([S.u32("length"),S.u32("lengthPadding"),S.blob(S.offset(S.u32(),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n.Buffer.from(t,"utf8")};return i(s,e,r)},s.alloc=t=>S.u32().span+S.u32().span+n.Buffer.from(t,"utf8").length,s},tt=(t="authorized")=>S.struct([G("staker"),G("withdrawer")],t),et=(t="lockup")=>S.struct([S.ns64("unixTimestamp"),S.ns64("epoch"),G("custodian")],t),rt=(t="voteInit")=>S.struct([G("nodePubkey"),G("authorizedVoter"),G("authorizedWithdrawer"),S.u8("commission")],t),nt=(t="voteAuthorizeWithSeedArgs")=>S.struct([S.u32("voteAuthorizationType"),G("currentAuthorityDerivedKeyOwnerPubkey"),$("currentAuthorityDerivedKeySeed"),G("newAuthorized")],t);function it(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return it({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function st(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function ot(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function at(t,e){if(!t)throw new Error(e||"Assertion failed")}class ct{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new ct(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];at(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{at(e.length>0,"Expected at least one writable signer key");const[t]=e[0];at(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new D(t)),...r.map(([t])=>new D(t)),...n.map(([t])=>new D(t)),...i.map(([t])=>new D(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new D(i),s=t.findIndex(t=>t.equals(e));s>=0&&(at(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class ut{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new D(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new J(this.staticAccountKeys)}static compile(t){const e=ct.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new J(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:k.default.encode(t.data)}));return new ut({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];ot(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(k.default.decode(t.data));let s=[];ot(s,e.length);let o=[];return ot(o,i.length),{programIdIndex:r,keyIndicesCount:n.Buffer.from(s),keyIndices:e,dataLength:n.Buffer.from(o),data:i}});let i=[];ot(i,r.length);let s=n.Buffer.alloc(K);n.Buffer.from(i).copy(s);let o=i.length;r.forEach(t=>{const e=S.struct([S.u8("programIdIndex"),S.blob(t.keyIndicesCount.length,"keyIndicesCount"),S.seq(S.u8("keyIndex"),t.keyIndices.length,"keyIndices"),S.blob(t.dataLength.length,"dataLength"),S.seq(S.u8("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=S.struct([S.blob(1,"numRequiredSignatures"),S.blob(1,"numReadonlySignedAccounts"),S.blob(1,"numReadonlyUnsignedAccounts"),S.blob(e.length,"keyCount"),S.seq(G("key"),t,"keys"),G("recentBlockhash")]),c={numRequiredSignatures:n.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:n.Buffer.from(e),keys:this.accountKeys.map(t=>B(t.toBytes())),recentBlockhash:k.default.decode(this.recentBlockhash)};let u=n.Buffer.alloc(2048);const l=a.encode(c,u);return s.copy(u,l),u.slice(0,l+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&Q))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=st(e);let a=[];for(let d=0;d<o;d++){const t=e.slice(0,W);e=e.slice(W),a.push(new D(n.Buffer.from(t)))}const c=e.slice(0,W);e=e.slice(W);const u=st(e);let l=[];for(let d=0;d<u;d++){const t=e.shift(),r=st(e),i=e.slice(0,r);e=e.slice(r);const s=st(e),o=e.slice(0,s),a=k.default.encode(n.Buffer.from(o));e=e.slice(s),l.push({programIdIndex:t,accounts:i,data:a})}const h={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:k.default.encode(n.Buffer.from(c)),accountKeys:a,instructions:l};return new ut(h)}}class lt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new J(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=ct.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new J(o,n),c=a.compileInstructions(t.instructions);return new lt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();ot(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();ot(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();ot(i,this.addressTableLookups.length);const s=S.struct([S.u8("prefix"),S.struct([S.u8("numRequiredSignatures"),S.u8("numReadonlySignedAccounts"),S.u8("numReadonlyUnsignedAccounts")],"header"),S.blob(t.length,"staticAccountKeysLength"),S.seq(G(),this.staticAccountKeys.length,"staticAccountKeys"),G("recentBlockhash"),S.blob(r.length,"instructionsLength"),S.blob(e.length,"serializedInstructions"),S.blob(i.length,"addressTableLookupsLength"),S.blob(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(K),a=128,c=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:k.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,c)}serializeInstructions(){let t=0;const e=new Uint8Array(K);for(const r of this.compiledInstructions){const n=Array();ot(n,r.accountKeyIndexes.length);const i=Array();ot(i,r.data.length);const s=S.struct([S.u8("programIdIndex"),S.blob(n.length,"encodedAccountKeyIndexesLength"),S.seq(S.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),S.blob(i.length,"encodedDataLength"),S.blob(r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(K);for(const r of this.addressTableLookups){const n=Array();ot(n,r.writableIndexes.length);const i=Array();ot(i,r.readonlyIndexes.length);const s=S.struct([G("accountKey"),S.blob(n.length,"encodedWritableIndexesLength"),S.seq(S.u8(),r.writableIndexes.length,"writableIndexes"),S.blob(i.length,"encodedReadonlyIndexesLength"),S.seq(S.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&Q;at(r!==n,"Expected versioned message but received legacy message");const i=n;at(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=st(e);for(let p=0;p<a;p++)o.push(new D(e.splice(0,W)));const c=k.default.encode(e.splice(0,W)),u=st(e),l=[];for(let p=0;p<u;p++){const t=e.shift(),r=st(e),n=e.splice(0,r),i=st(e),s=new Uint8Array(e.splice(0,i));l.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const h=st(e),d=[];for(let p=0;p<h;p++){const t=new D(e.splice(0,W)),r=st(e),n=e.splice(0,r),i=st(e),s=e.splice(0,i);d.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new lt({header:s,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:l,addressTableLookups:d})}}const ht={deserializeMessageVersion(t){const e=t[0],r=e&Q;return r===e?"legacy":r},deserialize:t=>{const e=ht.deserializeMessageVersion(t);if("legacy"===e)return ut.from(t);if(0===e)return lt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let dt=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const pt=n.Buffer.alloc(Z).fill(0);class mt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class gt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new mt(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let m=0;m<e.length;m++)if(void 0===e[m].programId)throw new Error(`Transaction instruction index ${m} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new D(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const m of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(m.publicKey));if(!(t>-1))throw new Error("unknown signer: "+m.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,c=0,u=0;const l=[],h=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(l.push(t.toString()),a+=1,r||(c+=1)):(h.push(t.toString()),r||(u+=1))});const d=l.concat(h),p=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:d.indexOf(r.toString()),accounts:t.keys.map(t=>d.indexOf(t.pubkey.toString())),data:k.default.encode(e)}});return p.forEach(t=>{at(t.programIdIndex>=0),t.accounts.forEach(t=>at(t>=0))}),new ut({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:d,recentBlockhash:t,instructions:p})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=E(r,t.secretKey);this._addSignature(t.publicKey,B(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){at(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n.Buffer.from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):j(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];ot(r,e.length);const i=r.length+64*e.length+t.length,s=n.Buffer.alloc(i);return at(e.length<256),n.Buffer.from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(at(64===t.length,"signature has invalid length"),n.Buffer.from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),at(s.length<=K,`Transaction too large: ${s.length} > ${K}`),s}get keys(){return at(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return at(1===this.instructions.length),this.instructions[0].programId}get data(){return at(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=st(e);let i=[];for(let s=0;s<r;s++){const t=e.slice(0,Z);e=e.slice(Z),i.push(k.default.encode(n.Buffer.from(t)))}return gt.populate(ut.from(e),i)}static populate(t,e=[]){const r=new gt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==k.default.encode(pt)?null:k.default.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new mt({keys:n,programId:t.accountKeys[e.programIdIndex],data:k.default.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class bt{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;at(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;at(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new mt({programId:e,data:B(p.data),keys:t}))}return new bt({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return ut.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return lt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class yt{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)at(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(Z));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();ot(e,this.signatures.length);const r=S.struct([S.blob(e.length,"encodedSignaturesLength"),S.seq(X(),this.signatures.length,"signatures"),S.blob(t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=st(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,Z)));const i=ht.deserialize(new Uint8Array(e));return new yt(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));at(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=E(e,n.secretKey)}}addSignature(t,e){at(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));at(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const ft=160,wt=64,kt=ft/wt,St=1e3/kt,vt=new D("SysvarC1ock11111111111111111111111111111111"),It=new D("SysvarEpochSchedu1e111111111111111111111111"),Mt=new D("Sysvar1nstructions1111111111111111111111111"),At=new D("SysvarRecentB1ockHashes11111111111111111111"),Ot=new D("SysvarRent111111111111111111111111111111111"),Tt=new D("SysvarRewards111111111111111111111111111111"),_t=new D("SysvarS1otHashes111111111111111111111111111"),Et=new D("SysvarS1otHistory11111111111111111111111111"),jt=new D("SysvarStakeHistory1111111111111111111111111");async function Bt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function Nt(t){return new Promise(e=>setTimeout(e,t))}function xt(t,e){const r=t.layout.span>=0?t.layout.span:it(t,e),i=n.Buffer.alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}function Pt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const Rt=S.nu64("lamportsPerSignature"),Lt=S.struct([S.u32("version"),S.u32("state"),G("authorizedPubkey"),G("nonce"),S.struct([Rt],"feeCalculator")]),zt=Lt.span;class Wt{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Lt.decode(B(t),0);return new Wt({authorizedPubkey:new D(e.authorizedPubkey),nonce:new D(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ut=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Ct=t=>e=>{const r=u.blob(t,e),{encode:i,decode:s}=Ut(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return l.toBigIntLE(n.Buffer.from(r))},o.encode=(e,r,n)=>{const s=l.toBufferLE(e,t);return i(s,r,n)},o},Dt=Ct(8);class Vt{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Ft))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:n}=Pt(Ft.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new D(n)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Pt(Ft.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:n}=Pt(Ft.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new D(n)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Pt(Ft.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:n,programId:i}=Pt(Ft.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,space:n,programId:new D(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Pt(Ft.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new D(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:n}=Pt(Ft.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new D(e),seed:r,programId:new D(n)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:n,space:i,programId:s}=Pt(Ft.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new D(e),seed:r,lamports:n,space:i,programId:new D(s)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Pt(Ft.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new D(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Ft.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Pt(Ft.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Pt(Ft.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new D(e)}}static checkProgramId(t){if(!t.equals(Kt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ft=Object.freeze({Create:{index:0,layout:S.struct([S.u32("instruction"),S.ns64("lamports"),S.ns64("space"),G("programId")])},Assign:{index:1,layout:S.struct([S.u32("instruction"),G("programId")])},Transfer:{index:2,layout:S.struct([S.u32("instruction"),Dt("lamports")])},CreateWithSeed:{index:3,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),S.ns64("lamports"),S.ns64("space"),G("programId")])},AdvanceNonceAccount:{index:4,layout:S.struct([S.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:S.struct([S.u32("instruction"),G("authorized")])},AuthorizeNonceAccount:{index:7,layout:S.struct([S.u32("instruction"),G("authorized")])},Allocate:{index:8,layout:S.struct([S.u32("instruction"),S.ns64("space")])},AllocateWithSeed:{index:9,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),S.ns64("space"),G("programId")])},AssignWithSeed:{index:10,layout:S.struct([S.u32("instruction"),G("base"),$("seed"),G("programId")])},TransferWithSeed:{index:11,layout:S.struct([S.u32("instruction"),Dt("lamports"),$("seed"),G("programId")])},UpgradeNonceAccount:{index:12,layout:S.struct([S.u32("instruction")])}});class Kt{constructor(){}static createAccount(t){const e=Ft.Create,r=xt(e,{lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});return new mt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Ft.TransferWithSeed;e=xt(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Ft.Transfer;e=xt(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Ft.AssignWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Ft.Assign;e=xt(n,{programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ft.CreateWithSeed,r=xt(e,{base:B(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:B(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new mt({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new gt;"basePubkey"in t&&"seed"in t?e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:zt,programId:this.programId})):e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:zt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Ft.InitializeNonceAccount,r=xt(e,{authorized:B(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new mt(n)}static nonceAdvance(t){const e=Ft.AdvanceNonceAccount,r=xt(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new mt(n)}static nonceWithdraw(t){const e=Ft.WithdrawNonceAccount,r=xt(e,{lamports:t.lamports});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:At,isSigner:!1,isWritable:!1},{pubkey:Ot,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Ft.AuthorizeNonceAccount,r=xt(e,{authorized:B(t.newAuthorizedPubkey.toBuffer())});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Ft.AllocateWithSeed;e=xt(n,{base:B(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:B(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Ft.Allocate;e=xt(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:r,programId:this.programId,data:e})}}Kt.programId=new D("11111111111111111111111111111111");const Qt=K-300;class Zt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Zt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new gt,a.add(Kt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new gt,a.add(Kt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new gt,a.add(Kt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new gt).add(Kt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await Bt(t,a,[e,r],{commitment:"confirmed"})}const o=S.struct([S.u32("instruction"),S.u32("offset"),S.u32("bytesLength"),S.u32("bytesLengthPadding"),S.seq(S.u8("byte"),S.offset(S.u32(),-8),"bytes")]),a=Zt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new gt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(Bt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await Nt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=S.struct([S.u32("instruction")]),o=n.Buffer.alloc(s.span);s.encode({instruction:1},o);const a=(new gt).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:h}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(h.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(h)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(St/2)))}}return!0}}Zt.chunkSize=Qt;const qt=new D("BPFLoader2111111111111111111111111111111111");class Ht{static getMinNumSignatures(t){return Zt.getMinNumSignatures(t)}static load(t,e,r,n,i){return Zt.load(t,e,r,i,n)}}function Yt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Jt=Object.prototype.toString,Gt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Xt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Xt(t.toJSON(),e);if(c=Jt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Xt(t[r],!0)+",";return n>-1&&(i+=Xt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Gt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Xt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var $t=function(t){var e=Xt(t,!1);if(void 0!==e)return""+e},te=Yt($t);const ee=32;function re(t){let e=0;while(t>1)t/=2,e++;return e}function ne(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class ie{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=re(ne(t+ee+1))-re(ee)-1,r=this.getSlotsInEpoch(e),n=t-(r-ee);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ee:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+re(ee)):this.slotsPerEpoch}}class se extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}const oe={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ae extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var ce=globalThis.fetch;class ue extends I.default{constructor(t,e,r){const n=t=>{const r=M.default(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function le(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const he=56;class de{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=le(pe,t),r=t.length-he;at(r>=0,"lookup table is invalid"),at(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=S.struct([S.seq(G(),n,"addresses")]).decode(t.slice(he));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new D(e.authority[0]):void 0,addresses:i.map(t=>new D(t))}}}const pe={index:1,layout:S.struct([S.u32("typeIndex"),Dt("deactivationSlot"),S.nu64("lastExtendedSlot"),S.u8("lastExtendedStartIndex"),S.u8(),S.seq(G(),S.offset(S.u8(),-1),"authority")])},me=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function ge(t){const e=t.match(me);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const be=h.coerce(h.instance(D),h.string(),t=>new D(t)),ye=h.tuple([h.string(),h.literal("base64")]),fe=h.coerce(h.instance(n.Buffer),ye,t=>n.Buffer.from(t[0],"base64")),we=3e4;function ke(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Se(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function ve(t){return h.union([h.type({jsonrpc:h.literal("2.0"),id:h.string(),result:t}),h.type({jsonrpc:h.literal("2.0"),id:h.string(),error:h.type({code:h.unknown(),message:h.string(),data:h.optional(h.any())})})])}const Ie=ve(h.unknown());function Me(t){return h.coerce(ve(t),Ie,e=>"error"in e?e:{...e,result:h.create(e.result,t)})}function Ae(t){return Me(h.type({context:h.type({slot:h.number()}),value:t}))}function Oe(t){return h.type({context:h.type({slot:h.number()}),value:t})}function Te(t,e){return 0===t?new lt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new D(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:k.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new ut(e)}const _e=h.type({foundation:h.number(),foundationTerm:h.number(),initial:h.number(),taper:h.number(),terminal:h.number()}),Ee=Me(h.array(h.nullable(h.type({epoch:h.number(),effectiveSlot:h.number(),amount:h.number(),postBalance:h.number(),commission:h.optional(h.nullable(h.number()))})))),je=h.array(h.type({slot:h.number(),prioritizationFee:h.number()})),Be=h.type({total:h.number(),validator:h.number(),foundation:h.number(),epoch:h.number()}),Ne=h.type({epoch:h.number(),slotIndex:h.number(),slotsInEpoch:h.number(),absoluteSlot:h.number(),blockHeight:h.optional(h.number()),transactionCount:h.optional(h.number())}),xe=h.type({slotsPerEpoch:h.number(),leaderScheduleSlotOffset:h.number(),warmup:h.boolean(),firstNormalEpoch:h.number(),firstNormalSlot:h.number()}),Pe=h.record(h.string(),h.array(h.number())),Re=h.nullable(h.union([h.type({}),h.string()])),Le=h.type({err:Re}),ze=h.literal("receivedSignature"),We=h.type({"solana-core":h.string(),"feature-set":h.optional(h.number())}),Ue=Ae(h.type({err:h.nullable(h.union([h.type({}),h.string()])),logs:h.nullable(h.array(h.string())),accounts:h.optional(h.nullable(h.array(h.nullable(h.type({executable:h.boolean(),owner:h.string(),lamports:h.number(),data:h.array(h.string()),rentEpoch:h.optional(h.number())}))))),unitsConsumed:h.optional(h.number()),returnData:h.optional(h.nullable(h.type({programId:h.string(),data:h.tuple([h.string(),h.literal("base64")])})))})),Ce=Ae(h.type({byIdentity:h.record(h.string(),h.array(h.number())),range:h.type({firstSlot:h.number(),lastSlot:h.number()})}));function De(t,e,r,n,i,s){const o=r||ce;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new v.default(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},hn)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await Nt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function Ve(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Fe(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Ke=Me(_e),Qe=Me(Be),Ze=Me(je),qe=Me(Ne),He=Me(xe),Ye=Me(Pe),Je=Me(h.number()),Ge=Ae(h.type({total:h.number(),circulating:h.number(),nonCirculating:h.number(),nonCirculatingAccounts:h.array(be)})),Xe=h.type({amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}),$e=Ae(h.array(h.type({address:be,amount:h.string(),uiAmount:h.nullable(h.number()),decimals:h.number(),uiAmountString:h.optional(h.string())}))),tr=Ae(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:fe,rentEpoch:h.number()})}))),er=h.type({program:h.string(),parsed:h.unknown(),space:h.number()}),rr=Ae(h.array(h.type({pubkey:be,account:h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:er,rentEpoch:h.number()})}))),nr=Ae(h.array(h.type({lamports:h.number(),address:be}))),ir=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:fe,rentEpoch:h.number()}),sr=h.type({pubkey:be,account:ir}),or=h.coerce(h.union([h.instance(n.Buffer),er]),h.union([ye,er]),t=>Array.isArray(t)?h.create(t,fe):t),ar=h.type({executable:h.boolean(),owner:be,lamports:h.number(),data:or,rentEpoch:h.number()}),cr=h.type({pubkey:be,account:ar}),ur=h.type({state:h.union([h.literal("active"),h.literal("inactive"),h.literal("activating"),h.literal("deactivating")]),active:h.number(),inactive:h.number()}),lr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Re,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),hr=Me(h.array(h.type({signature:h.string(),slot:h.number(),err:Re,memo:h.nullable(h.string()),blockTime:h.optional(h.nullable(h.number()))}))),dr=h.type({subscription:h.number(),result:Oe(ir)}),pr=h.type({pubkey:be,account:ir}),mr=h.type({subscription:h.number(),result:Oe(pr)}),gr=h.type({parent:h.number(),slot:h.number(),root:h.number()}),br=h.type({subscription:h.number(),result:gr}),yr=h.union([h.type({type:h.union([h.literal("firstShredReceived"),h.literal("completed"),h.literal("optimisticConfirmation"),h.literal("root")]),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("createdBank"),parent:h.number(),slot:h.number(),timestamp:h.number()}),h.type({type:h.literal("frozen"),slot:h.number(),timestamp:h.number(),stats:h.type({numTransactionEntries:h.number(),numSuccessfulTransactions:h.number(),numFailedTransactions:h.number(),maxTransactionsPerEntry:h.number()})}),h.type({type:h.literal("dead"),slot:h.number(),timestamp:h.number(),err:h.string()})]),fr=h.type({subscription:h.number(),result:yr}),wr=h.type({subscription:h.number(),result:Oe(h.union([Le,ze]))}),kr=h.type({subscription:h.number(),result:h.number()}),Sr=h.type({pubkey:h.string(),gossip:h.nullable(h.string()),tpu:h.nullable(h.string()),rpc:h.nullable(h.string()),version:h.nullable(h.string())}),vr=h.type({votePubkey:h.string(),nodePubkey:h.string(),activatedStake:h.number(),epochVoteAccount:h.boolean(),epochCredits:h.array(h.tuple([h.number(),h.number(),h.number()])),commission:h.number(),lastVote:h.number(),rootSlot:h.nullable(h.number())}),Ir=Me(h.type({current:h.array(vr),delinquent:h.array(vr)})),Mr=h.union([h.literal("processed"),h.literal("confirmed"),h.literal("finalized")]),Ar=h.type({slot:h.number(),confirmations:h.nullable(h.number()),err:Re,confirmationStatus:h.optional(Mr)}),Or=Ae(h.array(h.nullable(Ar))),Tr=Me(h.number()),_r=h.type({accountKey:be,writableIndexes:h.array(h.number()),readonlyIndexes:h.array(h.number())}),Er=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(h.string()),header:h.type({numRequiredSignatures:h.number(),numReadonlySignedAccounts:h.number(),numReadonlyUnsignedAccounts:h.number()}),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()})),recentBlockhash:h.string(),addressTableLookups:h.optional(h.array(_r))})}),jr=h.type({pubkey:be,signer:h.boolean(),writable:h.boolean(),source:h.optional(h.union([h.literal("transaction"),h.literal("lookupTable")]))}),Br=h.type({accountKeys:h.array(jr),signatures:h.array(h.string())}),Nr=h.type({parsed:h.unknown(),program:h.string(),programId:be}),xr=h.type({accounts:h.array(be),data:h.string(),programId:be}),Pr=h.union([xr,Nr]),Rr=h.union([h.type({parsed:h.unknown(),program:h.string(),programId:h.string()}),h.type({accounts:h.array(h.string()),data:h.string(),programId:h.string()})]),Lr=h.coerce(Pr,Rr,t=>"accounts"in t?h.create(t,xr):h.create(t,Nr)),zr=h.type({signatures:h.array(h.string()),message:h.type({accountKeys:h.array(jr),instructions:h.array(Lr),recentBlockhash:h.string(),addressTableLookups:h.optional(h.nullable(h.array(_r)))})}),Wr=h.type({accountIndex:h.number(),mint:h.string(),owner:h.optional(h.string()),uiTokenAmount:Xe}),Ur=h.type({writable:h.array(be),readonly:h.array(be)}),Cr=h.type({err:Re,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(h.type({accounts:h.array(h.number()),data:h.string(),programIdIndex:h.number()}))})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Wr))),postTokenBalances:h.optional(h.nullable(h.array(Wr))),loadedAddresses:h.optional(Ur),computeUnitsConsumed:h.optional(h.number())}),Dr=h.type({err:Re,fee:h.number(),innerInstructions:h.optional(h.nullable(h.array(h.type({index:h.number(),instructions:h.array(Lr)})))),preBalances:h.array(h.number()),postBalances:h.array(h.number()),logMessages:h.optional(h.nullable(h.array(h.string()))),preTokenBalances:h.optional(h.nullable(h.array(Wr))),postTokenBalances:h.optional(h.nullable(h.array(Wr))),loadedAddresses:h.optional(Ur),computeUnitsConsumed:h.optional(h.number())}),Vr=h.union([h.literal(0),h.literal("legacy")]),Fr=h.type({pubkey:h.string(),lamports:h.number(),postBalance:h.nullable(h.number()),rewardType:h.nullable(h.string()),commission:h.optional(h.nullable(h.number()))}),Kr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Er,meta:h.nullable(Cr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Zr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Cr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),qr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:zr,meta:h.nullable(Dr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Hr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Br,meta:h.nullable(Dr),version:h.optional(Vr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Yr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number()),blockHeight:h.nullable(h.number())}))),Jr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),transactions:h.array(h.type({transaction:Er,meta:h.nullable(Cr)})),rewards:h.optional(h.array(Fr)),blockTime:h.nullable(h.number())}))),Gr=Me(h.nullable(h.type({blockhash:h.string(),previousBlockhash:h.string(),parentSlot:h.number(),signatures:h.array(h.string()),blockTime:h.nullable(h.number())}))),Xr=Me(h.nullable(h.type({slot:h.number(),meta:h.nullable(Cr),blockTime:h.optional(h.nullable(h.number())),transaction:Er,version:h.optional(Vr)}))),$r=Me(h.nullable(h.type({slot:h.number(),transaction:zr,meta:h.nullable(Dr),blockTime:h.optional(h.nullable(h.number())),version:h.optional(Vr)}))),tn=Ae(h.type({blockhash:h.string(),feeCalculator:h.type({lamportsPerSignature:h.number()})})),en=Ae(h.type({blockhash:h.string(),lastValidBlockHeight:h.number()})),rn=Ae(h.boolean()),nn=h.type({slot:h.number(),numTransactions:h.number(),numSlots:h.number(),samplePeriodSecs:h.number()}),sn=Me(h.array(nn)),on=Ae(h.nullable(h.type({feeCalculator:h.type({lamportsPerSignature:h.number()})}))),an=Me(h.string()),cn=Me(h.string()),un=h.type({err:Re,logs:h.array(h.string()),signature:h.string()}),ln=h.type({result:Oe(un),subscription:h.number()}),hn={"solana-client":"js/0.0.0-development"};class dn{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=Se(e),s=this._buildArgs([],n,void 0,i),o=te(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=h.create(e,Me(h.number()));if("error"in r)throw new ae(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ke(t),this._rpcWsEndpoint=r||ge(t),this._rpcClient=De(t,n,i,s,o,a),this._rpcRequest=Ve(this._rpcClient),this._rpcBatchRequest=Fe(this._rpcClient),this._rpcWebSocket=new ue(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=h.create(s,Ae(h.number()));if("error"in o)throw new ae(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=h.create(e,Me(h.nullable(h.number())));if("error"in r)throw new ae(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=h.create(t,Me(h.number()));if("error"in e)throw new ae(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=h.create(t,Je);if("error"in e)throw new ae(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=h.create(r,Ge);if("error"in n)throw new ae(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=h.create(n,Ae(Xe));if("error"in i)throw new ae(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=h.create(n,Ae(Xe));if("error"in i)throw new ae(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=Se(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=h.create(a,tr);if("error"in c)throw new ae(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=h.create(s,rr);if("error"in o)throw new ae(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=h.create(n,nr);if("error"in i)throw new ae(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=h.create(n,$e);if("error"in i)throw new ae(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,Ae(h.nullable(ir)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=h.create(s,Ae(h.nullable(ar)));if("error"in o)throw new ae(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,Ae(h.array(h.nullable(ar))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=h.create(o,Ae(h.array(h.nullable(ir))));if("error"in a)throw new ae(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=Se(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=h.create(o,Me(ur));if("error"in a)throw new ae(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=h.array(sr),u=!0===s.withContext?h.create(a,Ae(c)):h.create(a,Me(c));if("error"in u)throw new ae(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=h.create(s,Me(h.array(cr)));if("error"in o)throw new ae(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=k.default.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return at(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:dt.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:dt.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await Nt(1e3),i)return;if(t=await n(),i)return}e({__type:dt.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==dt.PROCESSED)throw new q(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:dt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Nt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===dt.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await Nt(400)}if(null===(d=n)||void 0===d||!d.value)throw new Y(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Y(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Y(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:dt.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==dt.PROCESSED)throw new H(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=h.create(t,Me(h.array(Sr)));if("error"in e)throw new ae(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=h.create(r,Ir);if("error"in n)throw new ae(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=h.create(i,Me(h.string()));if("error"in s)throw new ae(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=h.create(n,Me(h.array(be)));if("error"in i)throw new ae(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);at(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=h.create(n,Or);if("error"in i)throw new ae(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=h.create(i,Me(h.number()));if("error"in s)throw new ae(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=h.create(r,Ke);if("error"in n)throw new ae(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=Se(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=h.create(o,Ee);if("error"in a)throw new ae(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=h.create(t,Qe);if("error"in e)throw new ae(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=h.create(i,qe);if("error"in s)throw new ae(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=h.create(t,He);if("error"in e)throw new ae(e.error,"failed to get epoch schedule");const r=e.result;return new ie(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=h.create(t,Ye);if("error"in e)throw new ae(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=h.create(n,Tr);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=h.create(r,tn);if("error"in n)throw new ae(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=h.create(e,sn);if("error"in r)throw new ae(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=h.create(n,on);if("error"in i)throw new ae(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=B(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=h.create(i,Ae(h.nullable(h.number())));if("error"in s)throw new ae(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=h.create(i,Ze);if("error"in s)throw new ae(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=h.create(i,en);if("error"in s)throw new ae(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=h.create(s,rn);if("error"in o)throw new ae(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=h.create(t,Me(We));if("error"in e)throw new ae(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=h.create(t,Me(h.string()));if("error"in e)throw new ae(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Zr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Qr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,Kr);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:Te(r,t.message)},version:r}))}:null}}}catch(o){throw new ae(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=h.create(s,Hr);if("error"in t)throw t.error;return t.result}case"none":{const t=h.create(s,Yr);if("error"in t)throw t.error;return t.result}default:{const t=h.create(s,qr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new ae(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=h.create(i,Ce);if("error"in s)throw new ae(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,Xr);if("error"in o)throw new ae(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:Te(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=Se(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=h.create(s,$r);if("error"in o)throw new ae(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=Se(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=h.create(t,Xr);if("error"in e)throw new ae(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:Te(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Jr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new ut(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:gt.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=h.create(i,Me(h.array(h.number())));if("error"in s)throw new ae(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=h.create(n,Gr);if("error"in i)throw new ae(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,Xr);if("error"in i)throw new ae(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new ut(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:gt.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=h.create(n,$r);if("error"in i)throw new ae(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=h.create(t,$r);if("error"in e)throw new ae(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=h.create(i,lr);if("error"in s)throw new ae(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=h.create(i,hr);if("error"in s)throw new ae(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new de({key:t,state:de.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=Wt.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=h.create(r,an);if("error"in n)throw new ae(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await Nt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=we;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await Nt(St/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Se(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=h.create(i,Ae(h.number()));if("error"in s)throw new ae(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n.Buffer.from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=h.create(u,Ue);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof gt){let e=t;i=new gt,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=gt.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const d=[u,l],p=await this._rpcRequest("simulateTransaction",d),m=h.create(p,Ue);if("error"in m){let t;if("data"in m.error&&(t=m.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new se("failed to simulate transaction: "+m.error.message,t)}return m.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=B(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=h.create(o,cn);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new se("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=h.create(t,dr);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=te([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];at(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=h.create(t,mr);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=h.create(t,ln);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=h.create(t,br);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=h.create(t,fr);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=h.create(t,wr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=h.create(t,kr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class pn{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:O()}static generate(){return new pn(O())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=T(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new pn({publicKey:r,secretKey:t})}static fromSeed(t){const e=T(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new pn({publicKey:e,secretKey:r})}get publicKey(){return new D(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const mn=Object.freeze({CreateLookupTable:{index:0,layout:S.struct([S.u32("instruction"),Dt("recentSlot"),S.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:S.struct([S.u32("instruction")])},ExtendLookupTable:{index:2,layout:S.struct([S.u32("instruction"),Dt(),S.seq(G(),S.offset(S.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:S.struct([S.u32("instruction")])},CloseLookupTable:{index:4,layout:S.struct([S.u32("instruction")])}});class gn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(mn))if(s.index==r){n=i;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Pt(mn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Pt(mn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(t=>new D(t))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(bn.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class bn{constructor(){}static createLookupTable(t){const[e,r]=D.findProgramAddressSync([t.authority.toBuffer(),l.toBufferLE(BigInt(t.recentSlot),8)],this.programId),n=mn.CreateLookupTable,i=xt(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}];return[new mt({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=mn.FreezeLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=mn.ExtendLookupTable,r=xt(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Kt.programId,isSigner:!1,isWritable:!1}),new mt({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=mn.DeactivateLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=mn.CloseLookupTable,r=xt(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new mt({programId:this.programId,keys:n,data:r})}}bn.programId=new D("AddressLookupTab1e1111111111111111111111111");class yn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u8("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(fn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Pt(fn.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Pt(fn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Pt(fn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Pt(fn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(wn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const fn=Object.freeze({RequestUnits:{index:0,layout:S.struct([S.u8("instruction"),S.u32("units"),S.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:S.struct([S.u8("instruction"),S.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:S.struct([S.u8("instruction"),S.u32("units")])},SetComputeUnitPrice:{index:3,layout:S.struct([S.u8("instruction"),Dt("microLamports")])}});class wn{constructor(){}static requestUnits(t){const e=fn.RequestUnits,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=fn.RequestHeapFrame,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=fn.SetComputeUnitLimit,r=xt(e,t);return new mt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=fn.SetComputeUnitPrice,r=xt(e,{microLamports:BigInt(t.microLamports)});return new mt({keys:[],programId:this.programId,data:r})}}wn.programId=new D("ComputeBudget111111111111111111111111111111");const kn=64,Sn=32,vn=64,In=S.struct([S.u8("numSignatures"),S.u8("padding"),S.u16("signatureOffset"),S.u16("signatureInstructionIndex"),S.u16("publicKeyOffset"),S.u16("publicKeyInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u16("messageInstructionIndex")]);class Mn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;at(e.length===Sn,`Public Key must be ${Sn} bytes but received ${e.length} bytes`),at(i.length===vn,`Signature must be ${vn} bytes but received ${i.length} bytes`);const o=In.span,a=o+e.length,c=a+i.length,u=1,l=n.Buffer.alloc(c+r.length),h=null==s?65535:s;return In.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new mt({keys:[],programId:Mn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;at(e.length===kn,`Private key must be ${kn} bytes but received ${e.length} bytes`);try{const t=pn.fromSecretKey(e),i=t.publicKey.toBytes(),s=E(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}Mn.programId=new D("Ed25519SigVerify111111111111111111111111111");const An=(t,e)=>{const r=b.secp256k1.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};b.secp256k1.utils.isValidPrivateKey;const On=b.secp256k1.getPublicKey,Tn=32,_n=20,En=64,jn=11,Bn=S.struct([S.u8("numSignatures"),S.u16("signatureOffset"),S.u8("signatureInstructionIndex"),S.u16("ethAddressOffset"),S.u8("ethAddressInstructionIndex"),S.u16("messageDataOffset"),S.u16("messageDataSize"),S.u8("messageInstructionIndex"),S.blob(20,"ethAddress"),S.blob(64,"signature"),S.u8("recoveryId")]);class Nn{constructor(){}static publicKeyToEthAddress(t){at(t.length===En,`Public key must be ${En} bytes but received ${t.length} bytes`);try{return n.Buffer.from(g.keccak_256(B(t))).slice(-_n)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return Nn.createInstructionWithEthAddress({ethAddress:Nn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n.Buffer.from(e.substr(2),"hex"):n.Buffer.from(e,"hex"):e,at(a.length===_n,`Address must be ${_n} bytes but received ${a.length} bytes`);const c=1+jn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n.Buffer.alloc(Bn.span+r.length);return Bn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:B(i),ethAddress:B(a),recoveryId:s},p),p.fill(B(r),Bn.span),new mt({keys:[],programId:Nn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;at(e.length===Tn,`Private key must be ${Tn} bytes but received ${e.length} bytes`);try{const t=B(e),s=On(t,!1).slice(1),o=n.Buffer.from(g.keccak_256(B(r))),[a,c]=An(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var xn;Nn.programId=new D("KeccakSecp256k11111111111111111111111111111");const Pn=new D("StakeConfig11111111111111111111111111111111");class Rn{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Ln{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}xn=Ln,Ln.default=new xn(0,0,D.default);class zn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Wn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Pt(Wn.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Rn(new D(e.staker),new D(e.withdrawer)),lockup:new Ln(r.unixTimestamp,r.epoch,new D(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Pt(Wn.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Pt(Wn.Authorize,t.data),n={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=Pt(Wn.AuthorizeWithSeed,t.data),s={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:n,authorityOwner:new D(i),newAuthorizedPubkey:new D(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Pt(Wn.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Wn.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Pt(Wn.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Pt(Wn.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Cn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Wn=Object.freeze({Initialize:{index:0,layout:S.struct([S.u32("instruction"),tt(),et()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:S.struct([S.u32("instruction")])},Split:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Withdraw:{index:4,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},Deactivate:{index:5,layout:S.struct([S.u32("instruction")])},Merge:{index:7,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("stakeAuthorizationType"),$("authoritySeed"),G("authorityOwner")])}}),Un=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||Ln.default,s=Wn.Initialize,o=xt(s,{authorized:{staker:B(r.staker.toBuffer()),withdrawer:B(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:B(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new mt(a)}static createAccountWithSeed(t){const e=new gt;e.add(Kt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new gt;e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=Wn.Delegate,s=xt(i);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:Pn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=Wn.Authorize,a=xt(o,{newAuthorized:B(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new gt).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=Wn.AuthorizeWithSeed,u=xt(c,{newAuthorized:B(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:B(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new gt).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=Wn.Split,o=xt(s,{lamports:i});return new mt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new gt;return r.add(Kt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new gt;return c.add(Kt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(Kt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=Wn.Merge,s=xt(i);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=Wn.Withdraw,a=xt(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:jt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new gt).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=Wn.Deactivate,i=xt(n);return(new gt).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Cn.programId=new D("Stake11111111111111111111111111111111111111"),Cn.space=200;class Dn{constructor(t,e,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=n}}class Vn{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=S.u32("instruction"),r=e.decode(t.data);let n;for(const[i,s]of Object.entries(Fn))if(s.index==r){n=i;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Pt(Fn.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new Dn(new D(e.nodePubkey),new D(e.authorizedVoter),new D(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Pt(Fn.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new D(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=Pt(Fn.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new D(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new D(n),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Pt(Fn.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Qn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Fn=Object.freeze({InitializeAccount:{index:0,layout:S.struct([S.u32("instruction"),rt()])},Authorize:{index:1,layout:S.struct([S.u32("instruction"),G("newAuthorized"),S.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:S.struct([S.u32("instruction"),S.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:S.struct([S.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:S.struct([S.u32("instruction"),nt()])}}),Kn=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Qn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=Fn.InitializeAccount,s=xt(i,{voteInit:{nodePubkey:B(n.nodePubkey.toBuffer()),authorizedVoter:B(n.authorizedVoter.toBuffer()),authorizedWithdrawer:B(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Ot,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new mt(o)}static createAccount(t){const e=new gt;return e.add(Kt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=Fn.Authorize,o=xt(s,{newAuthorized:B(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=Fn.AuthorizeWithSeed,c=xt(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:B(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:B(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new gt).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=Fn.Withdraw,o=xt(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Qn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=Fn.UpdateValidatorIdentity,s=xt(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new gt).add({keys:o,programId:this.programId,data:s})}}Qn.programId=new D("Vote111111111111111111111111111111111111111"),Qn.space=3762;const Zn=new D("Va1idator1nfo111111111111111111111111111111"),qn=h.type({name:h.string(),website:h.optional(h.string()),details:h.optional(h.string()),keybaseUsername:h.optional(h.string())});class Hn{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];const r=st(e);if(2!==r)return null;const i=[];for(let n=0;n<2;n++){const t=new D(e.slice(0,W));e=e.slice(W);const r=1===e.slice(0,1)[0];e=e.slice(1),i.push({publicKey:t,isSigner:r})}if(i[0].publicKey.equals(Zn)&&i[1].isSigner){const t=$().decode(n.Buffer.from(e)),r=JSON.parse(t);return h.assert(r,qn),new Hn(i[1].publicKey,r)}return null}}const Yn=new D("Vote111111111111111111111111111111111111111"),Jn=S.struct([G("nodePubkey"),G("authorizedWithdrawer"),S.u8("commission"),S.nu64(),S.seq(S.struct([S.nu64("slot"),S.u32("confirmationCount")]),S.offset(S.u32(),-8),"votes"),S.u8("rootSlotValid"),S.nu64("rootSlot"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),G("authorizedVoter")]),S.offset(S.u32(),-8),"authorizedVoters"),S.struct([S.seq(S.struct([G("authorizedPubkey"),S.nu64("epochOfLastAuthorizedSwitch"),S.nu64("targetEpoch")]),32,"buf"),S.nu64("idx"),S.u8("isEmpty")],"priorVoters"),S.nu64(),S.seq(S.struct([S.nu64("epoch"),S.nu64("credits"),S.nu64("prevCredits")]),S.offset(S.u32(),-8),"epochCredits"),S.struct([S.nu64("slot"),S.nu64("timestamp")],"lastTimestamp")]);class Gn{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=4,r=Jn.decode(B(t),e);let n=r.rootSlot;return r.rootSlotValid||(n=null),new Gn({nodePubkey:new D(r.nodePubkey),authorizedWithdrawer:new D(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Xn),priorVoters:ti(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xn({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new D(t)}}function $n({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new D(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function ti({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map($n),...t.slice(0,e).map($n)]}const ei={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ri(t,e){const r=!1===e?"http":"https";if(!t)return ei[r]["devnet"];const n=ei[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function ni(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},a=await t.sendRawTransaction(e,o),c=s&&s.commitment,u=i?t.confirmTransaction(i,c):t.confirmTransaction(a,c),l=(await u).value;if(l.err)throw new Error(`Raw transaction ${a} failed (${JSON.stringify(l)})`);return a}const ii=1e9;e.Account=V,e.AddressLookupTableAccount=de,e.AddressLookupTableInstruction=gn,e.AddressLookupTableProgram=bn,e.Authorized=Rn,e.BLOCKHASH_CACHE_TIMEOUT_MS=we,e.BPF_LOADER_DEPRECATED_PROGRAM_ID=F,e.BPF_LOADER_PROGRAM_ID=qt,e.BpfLoader=Ht,e.COMPUTE_BUDGET_INSTRUCTION_LAYOUTS=fn,e.ComputeBudgetInstruction=yn,e.ComputeBudgetProgram=wn,e.Connection=dn,e.Ed25519Program=Mn,e.Enum=x,e.EpochSchedule=ie,e.FeeCalculatorLayout=Rt,e.Keypair=pn,e.LAMPORTS_PER_SOL=ii,e.LOOKUP_TABLE_INSTRUCTION_LAYOUTS=mn,e.Loader=Zt,e.Lockup=Ln,e.MAX_SEED_LENGTH=z,e.Message=ut,e.MessageAccountKeys=J,e.MessageV0=lt,e.NONCE_ACCOUNT_LENGTH=zt,e.NonceAccount=Wt,e.PACKET_DATA_SIZE=K,e.PUBLIC_KEY_LENGTH=W,e.PublicKey=D,e.SIGNATURE_LENGTH_IN_BYTES=Z,e.SOLANA_SCHEMA=P,e.STAKE_CONFIG_ID=Pn,e.STAKE_INSTRUCTION_LAYOUTS=Wn,e.SYSTEM_INSTRUCTION_LAYOUTS=Ft,e.SYSVAR_CLOCK_PUBKEY=vt,e.SYSVAR_EPOCH_SCHEDULE_PUBKEY=It,e.SYSVAR_INSTRUCTIONS_PUBKEY=Mt,e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY=At,e.SYSVAR_RENT_PUBKEY=Ot,e.SYSVAR_REWARDS_PUBKEY=Tt,e.SYSVAR_SLOT_HASHES_PUBKEY=_t,e.SYSVAR_SLOT_HISTORY_PUBKEY=Et,e.SYSVAR_STAKE_HISTORY_PUBKEY=jt,e.Secp256k1Program=Nn,e.SendTransactionError=se,e.SolanaJSONRPCError=ae,e.SolanaJSONRPCErrorCode=oe,e.StakeAuthorizationLayout=Un,e.StakeInstruction=zn,e.StakeProgram=Cn,e.Struct=N,e.SystemInstruction=Vt,e.SystemProgram=Kt,e.Transaction=gt,e.TransactionExpiredBlockheightExceededError=q,e.TransactionExpiredNonceInvalidError=Y,e.TransactionExpiredTimeoutError=H,e.TransactionInstruction=mt,e.TransactionMessage=bt,e.TransactionStatus=dt,e.VALIDATOR_INFO_KEY=Zn,e.VERSION_PREFIX_MASK=Q,e.VOTE_PROGRAM_ID=Yn,e.ValidatorInfo=Hn,e.VersionedMessage=ht,e.VersionedTransaction=yt,e.VoteAccount=Gn,e.VoteAuthorizationLayout=Kn,e.VoteInit=Dn,e.VoteInstruction=Vn,e.VoteProgram=Qn,e.clusterApiUrl=ri,e.sendAndConfirmRawTransaction=ni,e.sendAndConfirmTransaction=Bt},"405f":function(t,e,r){var n=r("42a7"),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.exports=n(i)},"4ea9":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r("834f"),e),i(r("8217"),e),i(r("0fa3"),e),i(r("caeb"),e),i(r("e1c8"),e),i(r("6d7f"),e)},"52c3":function(t,e,r){"use strict";r.d(e,"f",(function(){return n})),r.d(e,"i",(function(){return i})),r.d(e,"g",(function(){return s})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"j",(function(){return h})),r.d(e,"h",(function(){return d})),r.d(e,"k",(function(){return p})),r.d(e,"m",(function(){return m})),r.d(e,"l",(function(){return g}));r("d9e2");class n extends Error{constructor(t,e){super(t),this.error=e}}class i extends n{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class s extends n{constructor(){super(...arguments),this.name="WalletLoadError"}}class o extends n{constructor(){super(...arguments),this.name="WalletConfigError"}}class a extends n{constructor(){super(...arguments),this.name="WalletConnectionError"}}class c extends n{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class u extends n{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class l extends n{constructor(){super(...arguments),this.name="WalletAccountError"}}class h extends n{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class d extends n{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class p extends n{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class m extends n{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class g extends n{constructor(){super(...arguments),this.name="WalletSignMessageError"}}},5319:function(t,e,r){(function(t){r("d9e2"),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(2).Buffer}catch(j){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"===typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(t,l,t.length,e),l=0;l<o;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(j){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=p[t],l=m[t];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var g=h.modrn(l).toString(t);h=h.idivn(l),r=h.isZero()?g+r:d[u-g.length]+g+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var g=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function b(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function y(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,e.length-1),p=Math.max(0,u-t.length+1);p<=d;p++){var m=u-p|0;i=0|t.words[m],s=0|e.words[p],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=g(t,s),a="le"===e?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)e=(0|r.words[o])-(0|n.words[o])+s,s=e>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)e=(0|r.words[o])+s,s=e>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,p=0|o[1],m=8191&p,g=p>>>13,b=0|o[2],y=8191&b,f=b>>>13,w=0|o[3],k=8191&w,S=w>>>13,v=0|o[4],I=8191&v,M=v>>>13,A=0|o[5],O=8191&A,T=A>>>13,_=0|o[6],E=8191&_,j=_>>>13,B=0|o[7],N=8191&B,x=B>>>13,P=0|o[8],R=8191&P,L=P>>>13,z=0|o[9],W=8191&z,U=z>>>13,C=0|a[0],D=8191&C,V=C>>>13,F=0|a[1],K=8191&F,Q=F>>>13,Z=0|a[2],q=8191&Z,H=Z>>>13,Y=0|a[3],J=8191&Y,G=Y>>>13,X=0|a[4],$=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,dt=lt>>>13,pt=0|a[9],mt=8191&pt,gt=pt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(h,D),i=Math.imul(h,V),i=i+Math.imul(d,D)|0,s=Math.imul(d,V);var bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(m,D),i=Math.imul(m,V),i=i+Math.imul(g,D)|0,s=Math.imul(g,V),n=n+Math.imul(h,K)|0,i=i+Math.imul(h,Q)|0,i=i+Math.imul(d,K)|0,s=s+Math.imul(d,Q)|0;var yt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,D),i=Math.imul(y,V),i=i+Math.imul(f,D)|0,s=Math.imul(f,V),n=n+Math.imul(m,K)|0,i=i+Math.imul(m,Q)|0,i=i+Math.imul(g,K)|0,s=s+Math.imul(g,Q)|0,n=n+Math.imul(h,q)|0,i=i+Math.imul(h,H)|0,i=i+Math.imul(d,q)|0,s=s+Math.imul(d,H)|0;var ft=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ft>>>26)|0,ft&=67108863,n=Math.imul(k,D),i=Math.imul(k,V),i=i+Math.imul(S,D)|0,s=Math.imul(S,V),n=n+Math.imul(y,K)|0,i=i+Math.imul(y,Q)|0,i=i+Math.imul(f,K)|0,s=s+Math.imul(f,Q)|0,n=n+Math.imul(m,q)|0,i=i+Math.imul(m,H)|0,i=i+Math.imul(g,q)|0,s=s+Math.imul(g,H)|0,n=n+Math.imul(h,J)|0,i=i+Math.imul(h,G)|0,i=i+Math.imul(d,J)|0,s=s+Math.imul(d,G)|0;var wt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,D),i=Math.imul(I,V),i=i+Math.imul(M,D)|0,s=Math.imul(M,V),n=n+Math.imul(k,K)|0,i=i+Math.imul(k,Q)|0,i=i+Math.imul(S,K)|0,s=s+Math.imul(S,Q)|0,n=n+Math.imul(y,q)|0,i=i+Math.imul(y,H)|0,i=i+Math.imul(f,q)|0,s=s+Math.imul(f,H)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,G)|0,i=i+Math.imul(g,J)|0,s=s+Math.imul(g,G)|0,n=n+Math.imul(h,$)|0,i=i+Math.imul(h,tt)|0,i=i+Math.imul(d,$)|0,s=s+Math.imul(d,tt)|0;var kt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(O,D),i=Math.imul(O,V),i=i+Math.imul(T,D)|0,s=Math.imul(T,V),n=n+Math.imul(I,K)|0,i=i+Math.imul(I,Q)|0,i=i+Math.imul(M,K)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(k,q)|0,i=i+Math.imul(k,H)|0,i=i+Math.imul(S,q)|0,s=s+Math.imul(S,H)|0,n=n+Math.imul(y,J)|0,i=i+Math.imul(y,G)|0,i=i+Math.imul(f,J)|0,s=s+Math.imul(f,G)|0,n=n+Math.imul(m,$)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(g,$)|0,s=s+Math.imul(g,tt)|0,n=n+Math.imul(h,rt)|0,i=i+Math.imul(h,nt)|0,i=i+Math.imul(d,rt)|0,s=s+Math.imul(d,nt)|0;var St=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(E,D),i=Math.imul(E,V),i=i+Math.imul(j,D)|0,s=Math.imul(j,V),n=n+Math.imul(O,K)|0,i=i+Math.imul(O,Q)|0,i=i+Math.imul(T,K)|0,s=s+Math.imul(T,Q)|0,n=n+Math.imul(I,q)|0,i=i+Math.imul(I,H)|0,i=i+Math.imul(M,q)|0,s=s+Math.imul(M,H)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,G)|0,i=i+Math.imul(S,J)|0,s=s+Math.imul(S,G)|0,n=n+Math.imul(y,$)|0,i=i+Math.imul(y,tt)|0,i=i+Math.imul(f,$)|0,s=s+Math.imul(f,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(g,rt)|0,s=s+Math.imul(g,nt)|0,n=n+Math.imul(h,st)|0,i=i+Math.imul(h,ot)|0,i=i+Math.imul(d,st)|0,s=s+Math.imul(d,ot)|0;var vt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(N,D),i=Math.imul(N,V),i=i+Math.imul(x,D)|0,s=Math.imul(x,V),n=n+Math.imul(E,K)|0,i=i+Math.imul(E,Q)|0,i=i+Math.imul(j,K)|0,s=s+Math.imul(j,Q)|0,n=n+Math.imul(O,q)|0,i=i+Math.imul(O,H)|0,i=i+Math.imul(T,q)|0,s=s+Math.imul(T,H)|0,n=n+Math.imul(I,J)|0,i=i+Math.imul(I,G)|0,i=i+Math.imul(M,J)|0,s=s+Math.imul(M,G)|0,n=n+Math.imul(k,$)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(S,$)|0,s=s+Math.imul(S,tt)|0,n=n+Math.imul(y,rt)|0,i=i+Math.imul(y,nt)|0,i=i+Math.imul(f,rt)|0,s=s+Math.imul(f,nt)|0,n=n+Math.imul(m,st)|0,i=i+Math.imul(m,ot)|0,i=i+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0,n=n+Math.imul(h,ct)|0,i=i+Math.imul(h,ut)|0,i=i+Math.imul(d,ct)|0,s=s+Math.imul(d,ut)|0;var It=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(R,D),i=Math.imul(R,V),i=i+Math.imul(L,D)|0,s=Math.imul(L,V),n=n+Math.imul(N,K)|0,i=i+Math.imul(N,Q)|0,i=i+Math.imul(x,K)|0,s=s+Math.imul(x,Q)|0,n=n+Math.imul(E,q)|0,i=i+Math.imul(E,H)|0,i=i+Math.imul(j,q)|0,s=s+Math.imul(j,H)|0,n=n+Math.imul(O,J)|0,i=i+Math.imul(O,G)|0,i=i+Math.imul(T,J)|0,s=s+Math.imul(T,G)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(M,$)|0,s=s+Math.imul(M,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(S,rt)|0,s=s+Math.imul(S,nt)|0,n=n+Math.imul(y,st)|0,i=i+Math.imul(y,ot)|0,i=i+Math.imul(f,st)|0,s=s+Math.imul(f,ot)|0,n=n+Math.imul(m,ct)|0,i=i+Math.imul(m,ut)|0,i=i+Math.imul(g,ct)|0,s=s+Math.imul(g,ut)|0,n=n+Math.imul(h,ht)|0,i=i+Math.imul(h,dt)|0,i=i+Math.imul(d,ht)|0,s=s+Math.imul(d,dt)|0;var Mt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(W,D),i=Math.imul(W,V),i=i+Math.imul(U,D)|0,s=Math.imul(U,V),n=n+Math.imul(R,K)|0,i=i+Math.imul(R,Q)|0,i=i+Math.imul(L,K)|0,s=s+Math.imul(L,Q)|0,n=n+Math.imul(N,q)|0,i=i+Math.imul(N,H)|0,i=i+Math.imul(x,q)|0,s=s+Math.imul(x,H)|0,n=n+Math.imul(E,J)|0,i=i+Math.imul(E,G)|0,i=i+Math.imul(j,J)|0,s=s+Math.imul(j,G)|0,n=n+Math.imul(O,$)|0,i=i+Math.imul(O,tt)|0,i=i+Math.imul(T,$)|0,s=s+Math.imul(T,tt)|0,n=n+Math.imul(I,rt)|0,i=i+Math.imul(I,nt)|0,i=i+Math.imul(M,rt)|0,s=s+Math.imul(M,nt)|0,n=n+Math.imul(k,st)|0,i=i+Math.imul(k,ot)|0,i=i+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,n=n+Math.imul(y,ct)|0,i=i+Math.imul(y,ut)|0,i=i+Math.imul(f,ct)|0,s=s+Math.imul(f,ut)|0,n=n+Math.imul(m,ht)|0,i=i+Math.imul(m,dt)|0,i=i+Math.imul(g,ht)|0,s=s+Math.imul(g,dt)|0,n=n+Math.imul(h,mt)|0,i=i+Math.imul(h,gt)|0,i=i+Math.imul(d,mt)|0,s=s+Math.imul(d,gt)|0;var At=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(W,K),i=Math.imul(W,Q),i=i+Math.imul(U,K)|0,s=Math.imul(U,Q),n=n+Math.imul(R,q)|0,i=i+Math.imul(R,H)|0,i=i+Math.imul(L,q)|0,s=s+Math.imul(L,H)|0,n=n+Math.imul(N,J)|0,i=i+Math.imul(N,G)|0,i=i+Math.imul(x,J)|0,s=s+Math.imul(x,G)|0,n=n+Math.imul(E,$)|0,i=i+Math.imul(E,tt)|0,i=i+Math.imul(j,$)|0,s=s+Math.imul(j,tt)|0,n=n+Math.imul(O,rt)|0,i=i+Math.imul(O,nt)|0,i=i+Math.imul(T,rt)|0,s=s+Math.imul(T,nt)|0,n=n+Math.imul(I,st)|0,i=i+Math.imul(I,ot)|0,i=i+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,n=n+Math.imul(k,ct)|0,i=i+Math.imul(k,ut)|0,i=i+Math.imul(S,ct)|0,s=s+Math.imul(S,ut)|0,n=n+Math.imul(y,ht)|0,i=i+Math.imul(y,dt)|0,i=i+Math.imul(f,ht)|0,s=s+Math.imul(f,dt)|0,n=n+Math.imul(m,mt)|0,i=i+Math.imul(m,gt)|0,i=i+Math.imul(g,mt)|0,s=s+Math.imul(g,gt)|0;var Ot=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(W,q),i=Math.imul(W,H),i=i+Math.imul(U,q)|0,s=Math.imul(U,H),n=n+Math.imul(R,J)|0,i=i+Math.imul(R,G)|0,i=i+Math.imul(L,J)|0,s=s+Math.imul(L,G)|0,n=n+Math.imul(N,$)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(x,$)|0,s=s+Math.imul(x,tt)|0,n=n+Math.imul(E,rt)|0,i=i+Math.imul(E,nt)|0,i=i+Math.imul(j,rt)|0,s=s+Math.imul(j,nt)|0,n=n+Math.imul(O,st)|0,i=i+Math.imul(O,ot)|0,i=i+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,n=n+Math.imul(I,ct)|0,i=i+Math.imul(I,ut)|0,i=i+Math.imul(M,ct)|0,s=s+Math.imul(M,ut)|0,n=n+Math.imul(k,ht)|0,i=i+Math.imul(k,dt)|0,i=i+Math.imul(S,ht)|0,s=s+Math.imul(S,dt)|0,n=n+Math.imul(y,mt)|0,i=i+Math.imul(y,gt)|0,i=i+Math.imul(f,mt)|0,s=s+Math.imul(f,gt)|0;var Tt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(W,J),i=Math.imul(W,G),i=i+Math.imul(U,J)|0,s=Math.imul(U,G),n=n+Math.imul(R,$)|0,i=i+Math.imul(R,tt)|0,i=i+Math.imul(L,$)|0,s=s+Math.imul(L,tt)|0,n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(x,rt)|0,s=s+Math.imul(x,nt)|0,n=n+Math.imul(E,st)|0,i=i+Math.imul(E,ot)|0,i=i+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,n=n+Math.imul(O,ct)|0,i=i+Math.imul(O,ut)|0,i=i+Math.imul(T,ct)|0,s=s+Math.imul(T,ut)|0,n=n+Math.imul(I,ht)|0,i=i+Math.imul(I,dt)|0,i=i+Math.imul(M,ht)|0,s=s+Math.imul(M,dt)|0,n=n+Math.imul(k,mt)|0,i=i+Math.imul(k,gt)|0,i=i+Math.imul(S,mt)|0,s=s+Math.imul(S,gt)|0;var _t=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(W,$),i=Math.imul(W,tt),i=i+Math.imul(U,$)|0,s=Math.imul(U,tt),n=n+Math.imul(R,rt)|0,i=i+Math.imul(R,nt)|0,i=i+Math.imul(L,rt)|0,s=s+Math.imul(L,nt)|0,n=n+Math.imul(N,st)|0,i=i+Math.imul(N,ot)|0,i=i+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,n=n+Math.imul(E,ct)|0,i=i+Math.imul(E,ut)|0,i=i+Math.imul(j,ct)|0,s=s+Math.imul(j,ut)|0,n=n+Math.imul(O,ht)|0,i=i+Math.imul(O,dt)|0,i=i+Math.imul(T,ht)|0,s=s+Math.imul(T,dt)|0,n=n+Math.imul(I,mt)|0,i=i+Math.imul(I,gt)|0,i=i+Math.imul(M,mt)|0,s=s+Math.imul(M,gt)|0;var Et=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(W,rt),i=Math.imul(W,nt),i=i+Math.imul(U,rt)|0,s=Math.imul(U,nt),n=n+Math.imul(R,st)|0,i=i+Math.imul(R,ot)|0,i=i+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,n=n+Math.imul(N,ct)|0,i=i+Math.imul(N,ut)|0,i=i+Math.imul(x,ct)|0,s=s+Math.imul(x,ut)|0,n=n+Math.imul(E,ht)|0,i=i+Math.imul(E,dt)|0,i=i+Math.imul(j,ht)|0,s=s+Math.imul(j,dt)|0,n=n+Math.imul(O,mt)|0,i=i+Math.imul(O,gt)|0,i=i+Math.imul(T,mt)|0,s=s+Math.imul(T,gt)|0;var jt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(W,st),i=Math.imul(W,ot),i=i+Math.imul(U,st)|0,s=Math.imul(U,ot),n=n+Math.imul(R,ct)|0,i=i+Math.imul(R,ut)|0,i=i+Math.imul(L,ct)|0,s=s+Math.imul(L,ut)|0,n=n+Math.imul(N,ht)|0,i=i+Math.imul(N,dt)|0,i=i+Math.imul(x,ht)|0,s=s+Math.imul(x,dt)|0,n=n+Math.imul(E,mt)|0,i=i+Math.imul(E,gt)|0,i=i+Math.imul(j,mt)|0,s=s+Math.imul(j,gt)|0;var Bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(W,ct),i=Math.imul(W,ut),i=i+Math.imul(U,ct)|0,s=Math.imul(U,ut),n=n+Math.imul(R,ht)|0,i=i+Math.imul(R,dt)|0,i=i+Math.imul(L,ht)|0,s=s+Math.imul(L,dt)|0,n=n+Math.imul(N,mt)|0,i=i+Math.imul(N,gt)|0,i=i+Math.imul(x,mt)|0,s=s+Math.imul(x,gt)|0;var Nt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(W,ht),i=Math.imul(W,dt),i=i+Math.imul(U,ht)|0,s=Math.imul(U,dt),n=n+Math.imul(R,mt)|0,i=i+Math.imul(R,gt)|0,i=i+Math.imul(L,mt)|0,s=s+Math.imul(L,gt)|0;var xt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(W,mt),i=Math.imul(W,gt),i=i+Math.imul(U,mt)|0,s=Math.imul(U,gt);var Pt=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,c[0]=bt,c[1]=yt,c[2]=ft,c[3]=wt,c[4]=kt,c[5]=St,c[6]=vt,c[7]=It,c[8]=Mt,c[9]=At,c[10]=Ot,c[11]=Tt,c[12]=_t,c[13]=Et,c[14]=jt,c[15]=Bt,c[16]=Nt,c[17]=xt,c[18]=Pt,0!==u&&(c[19]=u,r.length++),r};function w(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var l=s-u,h=0|t.words[l],d=0|e.words[u],p=h*d,m=67108863&p;o=o+(p/67108864|0)|0,m=m+a|0,a=67108863&m,o=o+(m>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function k(t,e,r){return w(t,e,r)}function S(t,e){this.x=t,this.y=e}Math.imul||(f=y),s.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?f(this,t,e):n<63?y(this,t,e):n<1024?w(this,t,e):k(this,t,e),r},S.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},S.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},S.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},S.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,p=0;p<o;p++){var m=r[l+p],g=n[l+p],b=r[l+p+o],y=n[l+p+o],f=h*b-d*y;y=h*y+d*b,b=f,r[l+p]=m+b,n[l+p]=g+y,r[l+p+o]=m-b,n[l+p+o]=g-y,p!==a&&(f=c*h-u*d,d=c*d+u*h,h=f)}},S.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},S.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},S.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},S.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},S.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},S.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var p=0;p<n;p++){var m=a[p]*l[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*l[p],a[p]=m}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),k(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=b(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==e){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,d);while(0!==n.negative)p--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=p)}return c&&c._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=e.clone();while(!e.isZero()){for(var d=0,p=1;0===(e.words[0]&p)&&d<26;++d,p<<=1);if(d>0){e.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var m=0,g=1;0===(r.words[0]&g)&&m<26;++m,g<<=1);if(m>0){r.iushrn(m);while(m-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0){e.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return i=0===e.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new _(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function I(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"===typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},I.prototype.split=function(t,e){t.iushrn(this.n,0,e)},I.prototype.imulK=function(t){return t.imul(this.k)},i(M,I),M.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(A,I),i(O,I),i(T,I),T.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new M;else if("p224"===t)e=new A;else if("p192"===t)e=new O;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return v[t]=e,e},_.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=o;while(0!==p.cmp(a)){for(var g=p,b=0;0!==g.cmp(a);b++)g=g.redSqr();n(b<m);var y=this.pow(h,new s(1).iushln(m-b-1));d=d.redMul(y),h=y.redSqr(),p=p.redMul(h),m=b}return d},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var o=n[0],a=0,c=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new E(t)},i(E,_),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"633a":function(t,e,r){"use strict";r.d(e,"c",(function(){return i["b"]})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return l}));var n=r("bbae"),i=r("a81a"),s=r("901e"),o=r.n(s);new o.a("1e+18");var a=r("8df2");const c=t=>{const e=Object(a["u8"])(t),{encode:r,decode:i}=Object(n["a"])(e),s=e;return s.decode=(t,e)=>{const r=i(t,e);return!!r},s.encode=(t,e,n)=>{const i=Number(t);return r(i,e,n)},s};var u=r("2923");const l=t=>{const e=Object(a["blob"])(32,t),{encode:r,decode:i}=Object(n["a"])(e),s=e;return s.decode=(t,e)=>{const r=i(t,e);return new u["PublicKey"](r)},s.encode=(t,e,n)=>{const i=t.toBuffer();return r(i,e,n)},s}},"64b9":function(t,e,r){"use strict";r.d(e,"a",(function(){return Yt})),r.d(e,"b",(function(){return $r})),r.d(e,"c",(function(){return Hr})),r.d(e,"d",(function(){return Yr})),r.d(e,"e",(function(){return L})),r.d(e,"f",(function(){return gt})),r.d(e,"g",(function(){return yt})),r.d(e,"h",(function(){return jt})),r.d(e,"i",(function(){return ct})),r.d(e,"j",(function(){return at})),r.d(e,"k",(function(){return ut})),r.d(e,"l",(function(){return lt}));r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1");var n=r("1c35"),i=r("aecc"),s=r("5319"),o=r.n(s),a=r("8ab6"),c=r.n(a),u=r("d129"),l=r("fa13"),h=r("8df2"),d=r("9ea2"),p=r("d920"),m=r("502a"),g=r.n(m),b=r("e01f"),y=r.n(b),f=r("136e"),w=r.n(f),k=r("00e3"),S=r("fb4a");i["ed25519"].utils.randomPrivateKey;const v=()=>{const t=i["ed25519"].utils.randomPrivateKey(),e=I(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},I=i["ed25519"].getPublicKey;function M(t){try{return i["ed25519"].ExtendedPoint.fromHex(t),!0}catch{return!1}}const A=(t,e)=>i["ed25519"].sign(t,e.slice(0,32)),O=i["ed25519"].verify,T=t=>n["Buffer"].isBuffer(t)?t:t instanceof Uint8Array?n["Buffer"].from(t.buffer,t.byteOffset,t.byteLength):n["Buffer"].from(t);class _{constructor(t){Object.assign(this,t)}encode(){return n["Buffer"].from(Object(l["serialize"])(E,this))}static decode(t){return Object(l["deserialize"])(E,this,t)}static decodeUnchecked(t){return Object(l["deserializeUnchecked"])(E,this,t)}}const E=new Map;var j;let B;const N=32,x=32;function P(t){return void 0!==t._bn}let R=1;B=Symbol.toStringTag;class L extends _{constructor(t){if(super({}),this._bn=void 0,P(t))this._bn=t._bn;else{if("string"===typeof t){const e=c.a.decode(t);if(e.length!=x)throw new Error("Invalid public key input");this._bn=new o.a(e)}else this._bn=new o.a(t);if(this._bn.byteLength()>x)throw new Error("Invalid public key input")}}static unique(){const t=new L(R);return R+=1,new L(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return c.a.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(n["Buffer"]);if(t.length===x)return t;const e=n["Buffer"].alloc(32);return t.copy(e,32-t.length),e}get[B](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const i=n["Buffer"].concat([t.toBuffer(),n["Buffer"].from(e),r.toBuffer()]),s=Object(u["sha256"])(i);return new L(s)}static createProgramAddressSync(t,e){let r=n["Buffer"].alloc(0);t.forEach((function(t){if(t.length>N)throw new TypeError("Max seed length exceeded");r=n["Buffer"].concat([r,T(t)])})),r=n["Buffer"].concat([r,e.toBuffer(),n["Buffer"].from("ProgramDerivedAddress")]);const i=Object(u["sha256"])(r);if(M(i))throw new Error("Invalid seeds, address must fall off the curve");return new L(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r,i=255;while(0!=i){try{const s=t.concat(n["Buffer"].from([i]));r=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new L(t);return M(e.toBytes())}}j=L,L.default=new j("11111111111111111111111111111111"),E.set(L,{kind:"struct",fields:[["_bn","u256"]]});new L("BPFLoader1111111111111111111111111111111111");const z=1232,W=127,U=64;class C extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(C.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class D extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature `+t+" using the Solana Explorer or CLI tools."),this.signature=void 0,this.signature=t}}Object.defineProperty(D.prototype,"name",{value:"TransactionExpiredTimeoutError"});class V extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(V.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class F{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){const e=255;if(this.length>e+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((t,e)=>{r.set(t.toBase58(),e)});const n=t=>{const e=r.get(t.toBase58());if(void 0===e)throw new Error("Encountered an unknown instruction account key during compilation");return e};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const K=(t="publicKey")=>h["blob"](32,t),Q=(t="signature")=>h["blob"](64,t),Z=(t="string")=>{const e=h["struct"]([h["u32"]("length"),h["u32"]("lengthPadding"),h["blob"](h["offset"](h["u32"](),-8),"chars")],t),r=e.decode.bind(e),i=e.encode.bind(e),s=e;return s.decode=(t,e)=>{const n=r(t,e);return n["chars"].toString()},s.encode=(t,e,r)=>{const s={chars:n["Buffer"].from(t,"utf8")};return i(s,e,r)},s.alloc=t=>h["u32"]().span+h["u32"]().span+n["Buffer"].from(t,"utf8").length,s},q=(t="authorized")=>h["struct"]([K("staker"),K("withdrawer")],t),H=(t="lockup")=>h["struct"]([h["ns64"]("unixTimestamp"),h["ns64"]("epoch"),K("custodian")],t),Y=(t="voteInit")=>h["struct"]([K("nodePubkey"),K("authorizedVoter"),K("authorizedWithdrawer"),h["u8"]("commission")],t),J=(t="voteAuthorizeWithSeedArgs")=>h["struct"]([h["u32"]("voteAuthorizationType"),K("currentAuthorityDerivedKeyOwnerPubkey"),Z("currentAuthorityDerivedKeySeed"),K("newAuthorized")],t);function G(t,e){const r=t=>{if(t.span>=0)return t.span;if("function"===typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const n=e[t.property];if(Array.isArray(n))return n.length*r(t.elementLayout)}else if("fields"in t)return G({layout:t},e[t.property]);return 0};let n=0;return t.layout.fields.forEach(t=>{n+=r(t)}),n}function X(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(127&n)<<7*r,r+=1,0===(128&n))break}return e}function $(t,e){let r=e;for(;;){let e=127&r;if(r>>=7,0==r){t.push(e);break}e|=128,t.push(e)}}function tt(t,e){if(!t)throw new Error(e||"Assertion failed")}class et{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,n=t=>{const e=t.toBase58();let n=r.get(e);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(e,n)),n},i=n(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){n(s.programId).isInvoked=!0;for(const t of s.keys){const e=n(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new et(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];tt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),r=t.filter(([,t])=>t.isSigner&&!t.isWritable),n=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{tt(e.length>0,"Expected at least one writable signer key");const[t]=e[0];tt(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...e.map(([t])=>new L(t)),...r.map(([t])=>new L(t)),...n.map(([t])=>new L(t)),...i.map(([t])=>new L(t))];return[s,o]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[n,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==n.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new L(i),s=t.findIndex(t=>t.equals(e));s>=0&&(tt(s<256,"Max lookup table index exceeded"),r.push(s),n.push(e),this.keyMetaMap.delete(i))}return[r,n]}}class rt{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new L(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c.a.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new F(this.staticAccountKeys)}static compile(t){const e=et.compile(t.instructions,t.payerKey),[r,n]=e.getMessageComponents(),i=new F(n),s=i.compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:c.a.encode(t.data)}));return new rt({header:r,accountKeys:n,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,n=this.accountKeys.length-e,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];$(e,t);const r=this.instructions.map(t=>{const{accounts:e,programIdIndex:r}=t,i=Array.from(c.a.decode(t.data));let s=[];$(s,e.length);let o=[];return $(o,i.length),{programIdIndex:r,keyIndicesCount:n["Buffer"].from(s),keyIndices:e,dataLength:n["Buffer"].from(o),data:i}});let i=[];$(i,r.length);let s=n["Buffer"].alloc(z);n["Buffer"].from(i).copy(s);let o=i.length;r.forEach(t=>{const e=h["struct"]([h["u8"]("programIdIndex"),h["blob"](t.keyIndicesCount.length,"keyIndicesCount"),h["seq"](h["u8"]("keyIndex"),t.keyIndices.length,"keyIndices"),h["blob"](t.dataLength.length,"dataLength"),h["seq"](h["u8"]("userdatum"),t.data.length,"data")]),r=e.encode(t,s,o);o+=r}),s=s.slice(0,o);const a=h["struct"]([h["blob"](1,"numRequiredSignatures"),h["blob"](1,"numReadonlySignedAccounts"),h["blob"](1,"numReadonlyUnsignedAccounts"),h["blob"](e.length,"keyCount"),h["seq"](K("key"),t,"keys"),K("recentBlockhash")]),u={numRequiredSignatures:n["Buffer"].from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:n["Buffer"].from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:n["Buffer"].from([this.header.numReadonlyUnsignedAccounts]),keyCount:n["Buffer"].from(e),keys:this.accountKeys.map(t=>T(t.toBytes())),recentBlockhash:c.a.decode(this.recentBlockhash)};let l=n["Buffer"].alloc(2048);const d=a.encode(u,l);return s.copy(l,d),l.slice(0,d+s.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&W))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=e.shift(),s=e.shift(),o=X(e);let a=[];for(let c=0;c<o;c++){const t=e.splice(0,x);a.push(new L(n["Buffer"].from(t)))}const u=e.splice(0,x),l=X(e);let h=[];for(let p=0;p<l;p++){const t=e.shift(),r=X(e),i=e.splice(0,r),s=X(e),o=e.splice(0,s),a=c.a.encode(n["Buffer"].from(o));h.push({programIdIndex:t,accounts:i,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:c.a.encode(n["Buffer"].from(u)),accountKeys:a,instructions:h};return new rt(d)}}class nt{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new F(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const e=t-r,n=this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0);return e<n}if(t>=this.header.numRequiredSignatures){const n=t-e,i=r-e,s=i-this.header.numReadonlyUnsignedAccounts;return n<s}{const r=e-this.header.numReadonlySignedAccounts;return t<r}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=t.find(t=>t.key.equals(r.accountKey));if(!n)throw new Error("Failed to find address lookup table account for table key "+r.accountKey.toBase58());for(const t of r.writableIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.writable.push(n.state.addresses[t])}for(const t of r.readonlyIndexes){if(!(t<n.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${r.accountKey.toBase58()}`);e.readonly.push(n.state.addresses[t])}}return e}static compile(t){const e=et.compile(t.instructions,t.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const u of i){const t=e.extractTableLookup(u);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;r.push(e),n.writable.push(...i),n.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new F(o,n),c=a.compileInstructions(t.instructions);return new nt({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:c,addressTableLookups:r})}serialize(){const t=Array();$(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();$(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();$(i,this.addressTableLookups.length);const s=h["struct"]([h["u8"]("prefix"),h["struct"]([h["u8"]("numRequiredSignatures"),h["u8"]("numReadonlySignedAccounts"),h["u8"]("numReadonlyUnsignedAccounts")],"header"),h["blob"](t.length,"staticAccountKeysLength"),h["seq"](K(),this.staticAccountKeys.length,"staticAccountKeys"),K("recentBlockhash"),h["blob"](r.length,"instructionsLength"),h["blob"](e.length,"serializedInstructions"),h["blob"](i.length,"addressTableLookupsLength"),h["blob"](n.length,"serializedAddressTableLookups")]),o=new Uint8Array(z),a=128,u=s.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:c.a.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,u)}serializeInstructions(){let t=0;const e=new Uint8Array(z);for(const r of this.compiledInstructions){const n=Array();$(n,r.accountKeyIndexes.length);const i=Array();$(i,r.data.length);const s=h["struct"]([h["u8"]("programIdIndex"),h["blob"](n.length,"encodedAccountKeyIndexesLength"),h["seq"](h["u8"](),r.accountKeyIndexes.length,"accountKeyIndexes"),h["blob"](i.length,"encodedDataLength"),h["blob"](r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(z);for(const r of this.addressTableLookups){const n=Array();$(n,r.writableIndexes.length);const i=Array();$(i,r.readonlyIndexes.length);const s=h["struct"]([K("accountKey"),h["blob"](n.length,"encodedWritableIndexesLength"),h["seq"](h["u8"](),r.writableIndexes.length,"writableIndexes"),h["blob"](i.length,"encodedReadonlyIndexesLength"),h["seq"](h["u8"](),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),n=r&W;tt(r!==n,"Expected versioned message but received legacy message");const i=n;tt(0===i,"Expected versioned message with version 0 but found version "+i);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},o=[],a=X(e);for(let c=0;c<a;c++)o.push(new L(e.splice(0,x)));const u=c.a.encode(e.splice(0,x)),l=X(e),h=[];for(let c=0;c<l;c++){const t=e.shift(),r=X(e),n=e.splice(0,r),i=X(e),s=new Uint8Array(e.splice(0,i));h.push({programIdIndex:t,accountKeyIndexes:n,data:s})}const d=X(e),p=[];for(let c=0;c<d;c++){const t=new L(e.splice(0,x)),r=X(e),n=e.splice(0,r),i=X(e),s=e.splice(0,i);p.push({accountKey:t,writableIndexes:n,readonlyIndexes:s})}return new nt({header:s,staticAccountKeys:o,recentBlockhash:u,compiledInstructions:h,addressTableLookups:p})}}const it={deserializeMessageVersion(t){const e=t[0],r=e&W;return r===e?"legacy":r},deserialize:t=>{const e=it.deserializeMessageVersion(t);if("legacy"===e)return rt.from(t);if(0===e)return nt.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let st=function(t){return t[t["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",t[t["PROCESSED"]=1]="PROCESSED",t[t["TIMED_OUT"]=2]="TIMED_OUT",t[t["NONCE_INVALID"]=3]="NONCE_INVALID",t}({});const ot=n["Buffer"].alloc(U).fill(0);class at{constructor(t){this.keys=void 0,this.programId=void 0,this.data=n["Buffer"].alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new at(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let c=0;c<e.length;c++)if(void 0===e[c].programId)throw new Error(`Transaction instruction index ${c} has undefined program id`);const n=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();n.includes(e)||n.push(e)}),n.forEach(t=>{i.push({pubkey:new L(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),r=s.findIndex(t=>t.pubkey.toString()===e);r>-1?(s[r].isWritable=s[r].isWritable||t.isWritable,s[r].isSigner=s[r].isSigner||t.isSigner):s.push(t)}),s.sort((function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;const r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",r)}));const o=s.findIndex(t=>t.pubkey.equals(r));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const c of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(c.publicKey));if(!(t>-1))throw new Error("unknown signer: "+c.publicKey.toString());s[t].isSigner||(s[t].isSigner=!0)}let a=0,u=0,l=0;const h=[],d=[];s.forEach(({pubkey:t,isSigner:e,isWritable:r})=>{e?(h.push(t.toString()),a+=1,r||(u+=1)):(d.push(t.toString()),r||(l+=1))});const p=h.concat(d),m=e.map(t=>{const{data:e,programId:r}=t;return{programIdIndex:p.indexOf(r.toString()),accounts:t.keys.map(t=>p.indexOf(t.pubkey.toString())),data:c.a.encode(e)}});return m.forEach(t=>{tt(t.programIdIndex>=0),t.accounts.forEach(t=>tt(t>=0))}),new rt({header:{numRequiredSignatures:a,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:p,recentBlockhash:t,instructions:m})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){const r=this.signatures.every((t,r)=>e[r].equals(t.publicKey));if(r)return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const r=t.toString();return!e.has(r)&&(e.add(r),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}this.signatures=r.map(t=>({signature:null,publicKey:t.publicKey}));const n=this._compile();this._partialSign(n,...r)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),r.push(i))}const n=this._compile();this._partialSign(n,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(t=>{const e=A(r,t.secretKey);this._addSignature(t.publicKey,T(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){tt(64===e.length);const r=this.signatures.findIndex(e=>t.equals(e.publicKey));if(r<0)throw new Error("unknown signer: "+t.toString());this.signatures[r].signature=n["Buffer"].from(e)}verifySignatures(t=!0){const e=this._getMessageSignednessErrors(this.serializeMessage(),t);return!e}_getMessageSignednessErrors(t,e){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?e&&(r.missing||(r.missing=[])).push(i):O(n,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),n=this.serializeMessage();if(r){const t=this._getMessageSignednessErrors(n,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(n)}_serialize(t){const{signatures:e}=this,r=[];$(r,e.length);const i=r.length+64*e.length+t.length,s=n["Buffer"].alloc(i);return tt(e.length<256),n["Buffer"].from(r).copy(s,0),e.forEach(({signature:t},e)=>{null!==t&&(tt(64===t.length,"signature has invalid length"),n["Buffer"].from(t).copy(s,r.length+64*e))}),t.copy(s,r.length+64*e.length),tt(s.length<=z,`Transaction too large: ${s.length} > ${z}`),s}get keys(){return tt(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return tt(1===this.instructions.length),this.instructions[0].programId}get data(){return tt(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const r=X(e);let i=[];for(let s=0;s<r;s++){const t=e.splice(0,U);i.push(c.a.encode(n["Buffer"].from(t)))}return ct.populate(rt.from(e),i)}static populate(t,e=[]){const r=new ct;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((e,n)=>{const i={signature:e==c.a.encode(ot)?null:c.a.decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)}),t.instructions.forEach(e=>{const n=e.accounts.map(e=>{const n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some(t=>t.publicKey.toString()===n.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});r.instructions.push(new at({keys:n,programId:t.accountKeys[e.programIdIndex],data:c.a.decode(e.data)}))}),r._message=t,r._json=r.toJSON(),r}}class ut{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:n,recentBlockhash:i}=t,{numRequiredSignatures:s,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=r,c=s-o;tt(c>0,"Message header is invalid");const u=t.staticAccountKeys.length-s-a;tt(u>=0,"Message header is invalid");const l=t.getAccountKeys(e),h=l.get(0);if(void 0===h)throw new Error("Failed to decompile message because no account keys were found");const d=[];for(const p of n){const t=[];for(const n of p.accountKeyIndexes){const e=l.get(n);if(void 0===e)throw new Error("Failed to find key for account key index "+n);const i=n<s;let o;o=i?n<c:n<l.staticAccountKeys.length?n-s<u:n-l.staticAccountKeys.length<l.accountKeysFromLookups.writable.length,t.push({pubkey:e,isSigner:n<r.numRequiredSignatures,isWritable:o})}const e=l.get(p.programIdIndex);if(void 0===e)throw new Error("Failed to find program id for program id index "+p.programIdIndex);d.push(new at({programId:e,data:T(p.data),keys:t}))}return new ut({payerKey:h,instructions:d,recentBlockhash:i})}compileToLegacyMessage(){return rt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return nt.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class lt{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)tt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let r=0;r<t.header.numRequiredSignatures;r++)e.push(new Uint8Array(U));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();$(e,this.signatures.length);const r=h["struct"]([h["blob"](e.length,"encodedSignaturesLength"),h["seq"](Q(),this.signatures.length,"signatures"),h["blob"](t.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},n);return n.slice(0,i)}static deserialize(t){let e=[...t];const r=[],n=X(e);for(let s=0;s<n;s++)r.push(new Uint8Array(e.splice(0,U)));const i=it.deserialize(new Uint8Array(e));return new lt(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of t){const t=r.findIndex(t=>t.equals(n.publicKey));tt(t>=0,"Cannot sign with non signer key "+n.publicKey.toBase58()),this.signatures[t]=A(e,n.secretKey)}}addSignature(t,e){tt(64===e.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),n=r.findIndex(e=>e.equals(t));tt(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}const ht=160,dt=64,pt=ht/dt,mt=1e3/pt,gt=new L("SysvarC1ock11111111111111111111111111111111"),bt=(new L("SysvarEpochSchedu1e111111111111111111111111"),new L("Sysvar1nstructions1111111111111111111111111"),new L("SysvarRecentB1ockHashes11111111111111111111")),yt=new L("SysvarRent111111111111111111111111111111111"),ft=(new L("SysvarRewards111111111111111111111111111111"),new L("SysvarS1otHashes111111111111111111111111111"),new L("SysvarS1otHistory11111111111111111111111111"),new L("SysvarStakeHistory1111111111111111111111111"));async function wt(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:r}=e.nonceInfo,i=r.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:null===n||void 0===n?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null===n||void 0===n||n.abortSignal,o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function kt(t){return new Promise(e=>setTimeout(e,t))}function St(t,e){const r=t.layout.span>=0?t.layout.span:G(t,e),i=n["Buffer"].alloc(r),s=Object.assign({instruction:t.index},e);return t.layout.encode(s,i),i}const vt=h["nu64"]("lamportsPerSignature"),It=h["struct"]([h["u32"]("version"),h["u32"]("state"),K("authorizedPubkey"),K("nonce"),h["struct"]([vt],"feeCalculator")]),Mt=It.span;class At{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=It.decode(T(t),0);return new At({authorizedPubkey:new L(e.authorizedPubkey),nonce:new L(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ot=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}},Tt=t=>e=>{const r=Object(h["blob"])(t,e),{encode:i,decode:s}=Ot(r),o=r;return o.decode=(t,e)=>{const r=s(t,e);return Object(d["toBigIntLE"])(n["Buffer"].from(r))},o.encode=(e,r,n)=>{const s=Object(d["toBufferLE"])(e,t);return i(s,r,n)},o},_t=Tt(8);const Et=Object.freeze({Create:{index:0,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports"),h["ns64"]("space"),K("programId")])},Assign:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("programId")])},Transfer:{index:2,layout:h["struct"]([h["u32"]("instruction"),_t("lamports")])},CreateWithSeed:{index:3,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),h["ns64"]("lamports"),h["ns64"]("space"),K("programId")])},AdvanceNonceAccount:{index:4,layout:h["struct"]([h["u32"]("instruction")])},WithdrawNonceAccount:{index:5,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},InitializeNonceAccount:{index:6,layout:h["struct"]([h["u32"]("instruction"),K("authorized")])},AuthorizeNonceAccount:{index:7,layout:h["struct"]([h["u32"]("instruction"),K("authorized")])},Allocate:{index:8,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("space")])},AllocateWithSeed:{index:9,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),h["ns64"]("space"),K("programId")])},AssignWithSeed:{index:10,layout:h["struct"]([h["u32"]("instruction"),K("base"),Z("seed"),K("programId")])},TransferWithSeed:{index:11,layout:h["struct"]([h["u32"]("instruction"),_t("lamports"),Z("seed"),K("programId")])},UpgradeNonceAccount:{index:12,layout:h["struct"]([h["u32"]("instruction")])}});class jt{constructor(){}static createAccount(t){const e=Et.Create,r=St(e,{lamports:t.lamports,space:t.space,programId:T(t.programId.toBuffer())});return new at({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const n=Et.TransferWithSeed;e=St(n,{lamports:BigInt(t.lamports),seed:t.seed,programId:T(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const n=Et.Transfer;e=St(n,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const n=Et.AssignWithSeed;e=St(n,{base:T(t.basePubkey.toBuffer()),seed:t.seed,programId:T(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Et.Assign;e=St(n,{programId:T(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Et.CreateWithSeed,r=St(e,{base:T(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:T(t.programId.toBuffer())});let n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&n.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new at({keys:n,programId:this.programId,data:r})}static createNonceAccount(t){const e=new ct;"basePubkey"in t&&"seed"in t?e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Mt,programId:this.programId})):e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Mt,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Et.InitializeNonceAccount,r=St(e,{authorized:T(t.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new at(n)}static nonceAdvance(t){const e=Et.AdvanceNonceAccount,r=St(e),n={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new at(n)}static nonceWithdraw(t){const e=Et.WithdrawNonceAccount,r=St(e,{lamports:t.lamports});return new at({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:bt,isSigner:!1,isWritable:!1},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Et.AuthorizeNonceAccount,r=St(e,{authorized:T(t.newAuthorizedPubkey.toBuffer())});return new at({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const n=Et.AllocateWithSeed;e=St(n,{base:T(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:T(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const n=Et.Allocate;e=St(n,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new at({keys:r,programId:this.programId,data:e})}}jt.programId=new L("11111111111111111111111111111111");const Bt=z-300;class Nt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Nt.chunkSize)+1+1)}static async load(t,e,r,i,s){{const n=await t.getMinimumBalanceForRentExemption(s.length),o=await t.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return!1;o.data.length!==s.length&&(a=a||new ct,a.add(jt.allocate({accountPubkey:r.publicKey,space:s.length}))),o.owner.equals(i)||(a=a||new ct,a.add(jt.assign({accountPubkey:r.publicKey,programId:i}))),o.lamports<n&&(a=a||new ct,a.add(jt.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:n-o.lamports})))}else a=(new ct).add(jt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:n>0?n:1,space:s.length,programId:i}));null!==a&&await wt(t,a,[e,r],{commitment:"confirmed"})}const o=h["struct"]([h["u32"]("instruction"),h["u32"]("offset"),h["u32"]("bytesLength"),h["u32"]("bytesLengthPadding"),h["seq"](h["u8"]("byte"),h["offset"](h["u32"](),-8),"bytes")]),a=Nt.chunkSize;let c=0,u=s,l=[];while(u.length>0){const s=u.slice(0,a),h=n["Buffer"].alloc(a+16);o.encode({instruction:0,offset:c,bytes:s,bytesLength:0,bytesLengthPadding:0},h);const d=(new ct).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:h});if(l.push(wt(t,d,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await kt(1e3/t)}c+=a,u=u.slice(a)}await Promise.all(l);{const s=h["struct"]([h["u32"]("instruction")]),o=n["Buffer"].alloc(s.span);s.encode({instruction:1},o);const a=(new ct).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:yt,isSigner:!1,isWritable:!1}],programId:i,data:o}),c="processed",u=await t.sendTransaction(a,[e,r],{preflightCommitment:c}),{context:l,value:d}=await t.confirmTransaction({signature:u,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},c);if(d.err)throw new Error(`Transaction ${u} failed (${JSON.stringify(d)})`);while(1){try{const e=await t.getSlot({commitment:c});if(e>l.slot)break}catch{}await new Promise(t=>setTimeout(t,Math.round(mt/2)))}}return!0}}Nt.chunkSize=Bt;new L("BPFLoader2111111111111111111111111111111111");function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var Pt=Object.prototype.toString,Rt=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};function Lt(t,e){var r,n,i,s,o,a,c;if(!0===t)return"true";if(!1===t)return"false";switch(typeof t){case"object":if(null===t)return null;if(t.toJSON&&"function"===typeof t.toJSON)return Lt(t.toJSON(),e);if(c=Pt.call(t),"[object Array]"===c){for(i="[",n=t.length-1,r=0;r<n;r++)i+=Lt(t[r],!0)+",";return n>-1&&(i+=Lt(t[r],!0)),i+"]"}if("[object Object]"===c){s=Rt(t).sort(),n=s.length,i="",r=0;while(r<n)o=s[r],a=Lt(t[o],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(t);case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(t);default:return isFinite(t)?t:null}}var zt=function(t){var e=Lt(t,!1);if(void 0!==e)return""+e},Wt=xt(zt);const Ut=32;function Ct(t){let e=0;while(t>1)t/=2,e++;return e}function Dt(t){return 0===t?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class Vt{constructor(t,e,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ct(Dt(t+Ut+1))-Ct(Ut)-1,r=this.getSlotsInEpoch(e),n=t-(r-Ut);return[e,n]}{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),n=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[n,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Ut:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ct(Ut)):this.slotsPerEpoch}}class Ft extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class Kt extends Error{constructor({code:t,message:e,data:r},n){super(null!=n?`${n}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var Qt=globalThis.fetch;class Zt extends y.a{constructor(t,e,r){const n=t=>{const r=w()(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in r?r.socket:r,r};super(n,t,e,r),this.underlyingSocket=void 0}call(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){var e;const r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState;return 1===r?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function qt(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const Ht=56;class Yt{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=qt(Jt,t),r=t.length-Ht;tt(r>=0,"lookup table is invalid"),tt(r%32===0,"lookup table is invalid");const n=r/32,{addresses:i}=h["struct"]([h["seq"](K(),n,"addresses")]).decode(t.slice(Ht));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new L(e.authority[0]):void 0,addresses:i.map(t=>new L(t))}}}const Jt={index:1,layout:h["struct"]([h["u32"]("typeIndex"),_t("deactivationSlot"),h["nu64"]("lastExtendedSlot"),h["u8"]("lastExtendedStartIndex"),h["u8"](),h["seq"](K(),h["offset"](h["u8"](),-1),"authority")])},Gt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Xt(t){const e=t.match(Gt);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),c=null==a?"":":"+(a+1);return`${o}//${n}${c}${s}`}const $t=Object(p["coerce"])(Object(p["instance"])(L),Object(p["string"])(),t=>new L(t)),te=Object(p["tuple"])([Object(p["string"])(),Object(p["literal"])("base64")]),ee=Object(p["coerce"])(Object(p["instance"])(n["Buffer"]),te,t=>n["Buffer"].from(t[0],"base64")),re=3e4;function ne(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function ie(t){let e,r;if("string"===typeof t)e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function se(t){return Object(p["union"])([Object(p["type"])({jsonrpc:Object(p["literal"])("2.0"),id:Object(p["string"])(),result:t}),Object(p["type"])({jsonrpc:Object(p["literal"])("2.0"),id:Object(p["string"])(),error:Object(p["type"])({code:Object(p["unknown"])(),message:Object(p["string"])(),data:Object(p["optional"])(Object(p["any"])())})})])}const oe=se(Object(p["unknown"])());function ae(t){return Object(p["coerce"])(se(t),oe,e=>"error"in e?e:{...e,result:Object(p["create"])(e.result,t)})}function ce(t){return ae(Object(p["type"])({context:Object(p["type"])({slot:Object(p["number"])()}),value:t}))}function ue(t){return Object(p["type"])({context:Object(p["type"])({slot:Object(p["number"])()}),value:t})}function le(t,e){return 0===t?new nt({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new L(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:c.a.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new rt(e)}const he=Object(p["type"])({foundation:Object(p["number"])(),foundationTerm:Object(p["number"])(),initial:Object(p["number"])(),taper:Object(p["number"])(),terminal:Object(p["number"])()}),de=ae(Object(p["array"])(Object(p["nullable"])(Object(p["type"])({epoch:Object(p["number"])(),effectiveSlot:Object(p["number"])(),amount:Object(p["number"])(),postBalance:Object(p["number"])(),commission:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))})))),pe=Object(p["array"])(Object(p["type"])({slot:Object(p["number"])(),prioritizationFee:Object(p["number"])()})),me=Object(p["type"])({total:Object(p["number"])(),validator:Object(p["number"])(),foundation:Object(p["number"])(),epoch:Object(p["number"])()}),ge=Object(p["type"])({epoch:Object(p["number"])(),slotIndex:Object(p["number"])(),slotsInEpoch:Object(p["number"])(),absoluteSlot:Object(p["number"])(),blockHeight:Object(p["optional"])(Object(p["number"])()),transactionCount:Object(p["optional"])(Object(p["number"])())}),be=Object(p["type"])({slotsPerEpoch:Object(p["number"])(),leaderScheduleSlotOffset:Object(p["number"])(),warmup:Object(p["boolean"])(),firstNormalEpoch:Object(p["number"])(),firstNormalSlot:Object(p["number"])()}),ye=Object(p["record"])(Object(p["string"])(),Object(p["array"])(Object(p["number"])())),fe=Object(p["nullable"])(Object(p["union"])([Object(p["type"])({}),Object(p["string"])()])),we=Object(p["type"])({err:fe}),ke=Object(p["literal"])("receivedSignature"),Se=Object(p["type"])({"solana-core":Object(p["string"])(),"feature-set":Object(p["optional"])(Object(p["number"])())}),ve=ce(Object(p["type"])({err:Object(p["nullable"])(Object(p["union"])([Object(p["type"])({}),Object(p["string"])()])),logs:Object(p["nullable"])(Object(p["array"])(Object(p["string"])())),accounts:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["nullable"])(Object(p["type"])({executable:Object(p["boolean"])(),owner:Object(p["string"])(),lamports:Object(p["number"])(),data:Object(p["array"])(Object(p["string"])()),rentEpoch:Object(p["optional"])(Object(p["number"])())}))))),unitsConsumed:Object(p["optional"])(Object(p["number"])()),returnData:Object(p["optional"])(Object(p["nullable"])(Object(p["type"])({programId:Object(p["string"])(),data:Object(p["tuple"])([Object(p["string"])(),Object(p["literal"])("base64")])})))})),Ie=ce(Object(p["type"])({byIdentity:Object(p["record"])(Object(p["string"])(),Object(p["array"])(Object(p["number"])())),range:Object(p["type"])({firstSlot:Object(p["number"])(),lastSlot:Object(p["number"])()})}));function Me(t,e,r,n,i,s){const o=r||Qt;let a,c;n&&(c=async(t,e)=>{const r=await new Promise((r,i)=>{try{n(t,e,(t,e)=>r([t,e]))}catch(s){i(s)}});return await o(...r)});const u=new g.a(async(r,n)=>{const s={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},qr)};try{let e,r=5,a=500;for(;;){if(e=c?await c(t,s):await o(t,s),429!==e.status)break;if(!0===i)break;if(r-=1,0===r)break;await kt(a),a*=2}const u=await e.text();e.ok?n(null,u):n(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(u){u instanceof Error&&n(u)}},{});return u}function Ae(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(t,e)=>{t?i(t):n(e)})})}function Oe(t){return e=>new Promise((r,n)=>{0===e.length&&r([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?n(t):r(e)})})}const Te=ae(he),_e=ae(me),Ee=ae(pe),je=ae(ge),Be=ae(be),Ne=ae(ye),xe=ae(Object(p["number"])()),Pe=ce(Object(p["type"])({total:Object(p["number"])(),circulating:Object(p["number"])(),nonCirculating:Object(p["number"])(),nonCirculatingAccounts:Object(p["array"])($t)})),Re=Object(p["type"])({amount:Object(p["string"])(),uiAmount:Object(p["nullable"])(Object(p["number"])()),decimals:Object(p["number"])(),uiAmountString:Object(p["optional"])(Object(p["string"])())}),Le=ce(Object(p["array"])(Object(p["type"])({address:$t,amount:Object(p["string"])(),uiAmount:Object(p["nullable"])(Object(p["number"])()),decimals:Object(p["number"])(),uiAmountString:Object(p["optional"])(Object(p["string"])())}))),ze=ce(Object(p["array"])(Object(p["type"])({pubkey:$t,account:Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:ee,rentEpoch:Object(p["number"])()})}))),We=Object(p["type"])({program:Object(p["string"])(),parsed:Object(p["unknown"])(),space:Object(p["number"])()}),Ue=ce(Object(p["array"])(Object(p["type"])({pubkey:$t,account:Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:We,rentEpoch:Object(p["number"])()})}))),Ce=ce(Object(p["array"])(Object(p["type"])({lamports:Object(p["number"])(),address:$t}))),De=Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:ee,rentEpoch:Object(p["number"])()}),Ve=Object(p["type"])({pubkey:$t,account:De}),Fe=Object(p["coerce"])(Object(p["union"])([Object(p["instance"])(n["Buffer"]),We]),Object(p["union"])([te,We]),t=>Array.isArray(t)?Object(p["create"])(t,ee):t),Ke=Object(p["type"])({executable:Object(p["boolean"])(),owner:$t,lamports:Object(p["number"])(),data:Fe,rentEpoch:Object(p["number"])()}),Qe=Object(p["type"])({pubkey:$t,account:Ke}),Ze=Object(p["type"])({state:Object(p["union"])([Object(p["literal"])("active"),Object(p["literal"])("inactive"),Object(p["literal"])("activating"),Object(p["literal"])("deactivating")]),active:Object(p["number"])(),inactive:Object(p["number"])()}),qe=ae(Object(p["array"])(Object(p["type"])({signature:Object(p["string"])(),slot:Object(p["number"])(),err:fe,memo:Object(p["nullable"])(Object(p["string"])()),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}))),He=ae(Object(p["array"])(Object(p["type"])({signature:Object(p["string"])(),slot:Object(p["number"])(),err:fe,memo:Object(p["nullable"])(Object(p["string"])()),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}))),Ye=Object(p["type"])({subscription:Object(p["number"])(),result:ue(De)}),Je=Object(p["type"])({pubkey:$t,account:De}),Ge=Object(p["type"])({subscription:Object(p["number"])(),result:ue(Je)}),Xe=Object(p["type"])({parent:Object(p["number"])(),slot:Object(p["number"])(),root:Object(p["number"])()}),$e=Object(p["type"])({subscription:Object(p["number"])(),result:Xe}),tr=Object(p["union"])([Object(p["type"])({type:Object(p["union"])([Object(p["literal"])("firstShredReceived"),Object(p["literal"])("completed"),Object(p["literal"])("optimisticConfirmation"),Object(p["literal"])("root")]),slot:Object(p["number"])(),timestamp:Object(p["number"])()}),Object(p["type"])({type:Object(p["literal"])("createdBank"),parent:Object(p["number"])(),slot:Object(p["number"])(),timestamp:Object(p["number"])()}),Object(p["type"])({type:Object(p["literal"])("frozen"),slot:Object(p["number"])(),timestamp:Object(p["number"])(),stats:Object(p["type"])({numTransactionEntries:Object(p["number"])(),numSuccessfulTransactions:Object(p["number"])(),numFailedTransactions:Object(p["number"])(),maxTransactionsPerEntry:Object(p["number"])()})}),Object(p["type"])({type:Object(p["literal"])("dead"),slot:Object(p["number"])(),timestamp:Object(p["number"])(),err:Object(p["string"])()})]),er=Object(p["type"])({subscription:Object(p["number"])(),result:tr}),rr=Object(p["type"])({subscription:Object(p["number"])(),result:ue(Object(p["union"])([we,ke]))}),nr=Object(p["type"])({subscription:Object(p["number"])(),result:Object(p["number"])()}),ir=Object(p["type"])({pubkey:Object(p["string"])(),gossip:Object(p["nullable"])(Object(p["string"])()),tpu:Object(p["nullable"])(Object(p["string"])()),rpc:Object(p["nullable"])(Object(p["string"])()),version:Object(p["nullable"])(Object(p["string"])())}),sr=Object(p["type"])({votePubkey:Object(p["string"])(),nodePubkey:Object(p["string"])(),activatedStake:Object(p["number"])(),epochVoteAccount:Object(p["boolean"])(),epochCredits:Object(p["array"])(Object(p["tuple"])([Object(p["number"])(),Object(p["number"])(),Object(p["number"])()])),commission:Object(p["number"])(),lastVote:Object(p["number"])(),rootSlot:Object(p["nullable"])(Object(p["number"])())}),or=ae(Object(p["type"])({current:Object(p["array"])(sr),delinquent:Object(p["array"])(sr)})),ar=Object(p["union"])([Object(p["literal"])("processed"),Object(p["literal"])("confirmed"),Object(p["literal"])("finalized")]),cr=Object(p["type"])({slot:Object(p["number"])(),confirmations:Object(p["nullable"])(Object(p["number"])()),err:fe,confirmationStatus:Object(p["optional"])(ar)}),ur=ce(Object(p["array"])(Object(p["nullable"])(cr))),lr=ae(Object(p["number"])()),hr=Object(p["type"])({accountKey:$t,writableIndexes:Object(p["array"])(Object(p["number"])()),readonlyIndexes:Object(p["array"])(Object(p["number"])())}),dr=Object(p["type"])({signatures:Object(p["array"])(Object(p["string"])()),message:Object(p["type"])({accountKeys:Object(p["array"])(Object(p["string"])()),header:Object(p["type"])({numRequiredSignatures:Object(p["number"])(),numReadonlySignedAccounts:Object(p["number"])(),numReadonlyUnsignedAccounts:Object(p["number"])()}),instructions:Object(p["array"])(Object(p["type"])({accounts:Object(p["array"])(Object(p["number"])()),data:Object(p["string"])(),programIdIndex:Object(p["number"])()})),recentBlockhash:Object(p["string"])(),addressTableLookups:Object(p["optional"])(Object(p["array"])(hr))})}),pr=Object(p["type"])({pubkey:$t,signer:Object(p["boolean"])(),writable:Object(p["boolean"])(),source:Object(p["optional"])(Object(p["union"])([Object(p["literal"])("transaction"),Object(p["literal"])("lookupTable")]))}),mr=Object(p["type"])({accountKeys:Object(p["array"])(pr),signatures:Object(p["array"])(Object(p["string"])())}),gr=Object(p["type"])({parsed:Object(p["unknown"])(),program:Object(p["string"])(),programId:$t}),br=Object(p["type"])({accounts:Object(p["array"])($t),data:Object(p["string"])(),programId:$t}),yr=Object(p["union"])([br,gr]),fr=Object(p["union"])([Object(p["type"])({parsed:Object(p["unknown"])(),program:Object(p["string"])(),programId:Object(p["string"])()}),Object(p["type"])({accounts:Object(p["array"])(Object(p["string"])()),data:Object(p["string"])(),programId:Object(p["string"])()})]),wr=Object(p["coerce"])(yr,fr,t=>"accounts"in t?Object(p["create"])(t,br):Object(p["create"])(t,gr)),kr=Object(p["type"])({signatures:Object(p["array"])(Object(p["string"])()),message:Object(p["type"])({accountKeys:Object(p["array"])(pr),instructions:Object(p["array"])(wr),recentBlockhash:Object(p["string"])(),addressTableLookups:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(hr)))})}),Sr=Object(p["type"])({accountIndex:Object(p["number"])(),mint:Object(p["string"])(),owner:Object(p["optional"])(Object(p["string"])()),uiTokenAmount:Re}),vr=Object(p["type"])({writable:Object(p["array"])($t),readonly:Object(p["array"])($t)}),Ir=Object(p["type"])({err:fe,fee:Object(p["number"])(),innerInstructions:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["type"])({index:Object(p["number"])(),instructions:Object(p["array"])(Object(p["type"])({accounts:Object(p["array"])(Object(p["number"])()),data:Object(p["string"])(),programIdIndex:Object(p["number"])()}))})))),preBalances:Object(p["array"])(Object(p["number"])()),postBalances:Object(p["array"])(Object(p["number"])()),logMessages:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["string"])()))),preTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),postTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),loadedAddresses:Object(p["optional"])(vr),computeUnitsConsumed:Object(p["optional"])(Object(p["number"])())}),Mr=Object(p["type"])({err:fe,fee:Object(p["number"])(),innerInstructions:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["type"])({index:Object(p["number"])(),instructions:Object(p["array"])(wr)})))),preBalances:Object(p["array"])(Object(p["number"])()),postBalances:Object(p["array"])(Object(p["number"])()),logMessages:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Object(p["string"])()))),preTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),postTokenBalances:Object(p["optional"])(Object(p["nullable"])(Object(p["array"])(Sr))),loadedAddresses:Object(p["optional"])(vr),computeUnitsConsumed:Object(p["optional"])(Object(p["number"])())}),Ar=Object(p["union"])([Object(p["literal"])(0),Object(p["literal"])("legacy")]),Or=Object(p["type"])({pubkey:Object(p["string"])(),lamports:Object(p["number"])(),postBalance:Object(p["nullable"])(Object(p["number"])()),rewardType:Object(p["nullable"])(Object(p["string"])()),commission:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])()))}),Tr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:dr,meta:Object(p["nullable"])(Ir),version:Object(p["optional"])(Ar)})),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),_r=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Er=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:mr,meta:Object(p["nullable"])(Ir),version:Object(p["optional"])(Ar)})),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),jr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:kr,meta:Object(p["nullable"])(Mr),version:Object(p["optional"])(Ar)})),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Br=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:mr,meta:Object(p["nullable"])(Mr),version:Object(p["optional"])(Ar)})),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),Nr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])()),blockHeight:Object(p["nullable"])(Object(p["number"])())}))),xr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),transactions:Object(p["array"])(Object(p["type"])({transaction:dr,meta:Object(p["nullable"])(Ir)})),rewards:Object(p["optional"])(Object(p["array"])(Or)),blockTime:Object(p["nullable"])(Object(p["number"])())}))),Pr=ae(Object(p["nullable"])(Object(p["type"])({blockhash:Object(p["string"])(),previousBlockhash:Object(p["string"])(),parentSlot:Object(p["number"])(),signatures:Object(p["array"])(Object(p["string"])()),blockTime:Object(p["nullable"])(Object(p["number"])())}))),Rr=ae(Object(p["nullable"])(Object(p["type"])({slot:Object(p["number"])(),meta:Object(p["nullable"])(Ir),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])())),transaction:dr,version:Object(p["optional"])(Ar)}))),Lr=ae(Object(p["nullable"])(Object(p["type"])({slot:Object(p["number"])(),transaction:kr,meta:Object(p["nullable"])(Mr),blockTime:Object(p["optional"])(Object(p["nullable"])(Object(p["number"])())),version:Object(p["optional"])(Ar)}))),zr=ce(Object(p["type"])({blockhash:Object(p["string"])(),feeCalculator:Object(p["type"])({lamportsPerSignature:Object(p["number"])()})})),Wr=ce(Object(p["type"])({blockhash:Object(p["string"])(),lastValidBlockHeight:Object(p["number"])()})),Ur=ce(Object(p["boolean"])()),Cr=Object(p["type"])({slot:Object(p["number"])(),numTransactions:Object(p["number"])(),numSlots:Object(p["number"])(),samplePeriodSecs:Object(p["number"])()}),Dr=ae(Object(p["array"])(Cr)),Vr=ce(Object(p["nullable"])(Object(p["type"])({feeCalculator:Object(p["type"])({lamportsPerSignature:Object(p["number"])()})}))),Fr=ae(Object(p["string"])()),Kr=ae(Object(p["string"])()),Qr=Object(p["type"])({err:fe,logs:Object(p["array"])(Object(p["string"])()),signature:Object(p["string"])()}),Zr=Object(p["type"])({result:ue(Qr),subscription:Object(p["number"])()}),qr={"solana-client":"js/0.0.0-development"};class Hr{constructor(t,e){let r,n,i,s,o,a;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{var r;const{commitment:n,config:i}=ie(e),s=this._buildArgs([],n,void 0,i),o=Wt(s);return t[o]=null!==(r=t[o])&&void 0!==r?r:(async()=>{try{const e=await this._rpcRequest("getBlockHeight",s),r=Object(p["create"])(e,ae(Object(p["number"])()));if("error"in r)throw new Kt(r.error,"failed to get block height information");return r.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"===typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,n=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=ne(t),this._rpcWsEndpoint=r||Xt(t),this._rpcClient=Me(t,n,i,s,o,a),this._rpcRequest=Ae(this._rpcClient),this._rpcBatchRequest=Oe(this._rpcClient),this._rpcWebSocket=new Zt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,void 0,n),s=await this._rpcRequest("getBalance",i),o=Object(p["create"])(s,ce(Object(p["number"])()));if("error"in o)throw new Kt(o.error,"failed to get balance for "+t.toBase58());return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Object(p["create"])(e,ae(Object(p["nullable"])(Object(p["number"])())));if("error"in r)throw new Kt(r.error,"failed to get block time for slot "+t);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Object(p["create"])(t,ae(Object(p["number"])()));if("error"in e)throw new Kt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Object(p["create"])(t,xe);if("error"in e)throw new Kt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"===typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),n=Object(p["create"])(r,Pe);if("error"in n)throw new Kt(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenSupply",r),i=Object(p["create"])(n,ce(Re));if("error"in i)throw new Kt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenAccountBalance",r),i=Object(p["create"])(n,ce(Re));if("error"in i)throw new Kt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:n,config:i}=ie(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=await this._rpcRequest("getTokenAccountsByOwner",o),c=Object(p["create"])(a,ze);if("error"in c)throw new Kt(c.error,"failed to get token accounts owned by account "+t.toBase58());return c.result}async getParsedTokenAccountsByOwner(t,e,r){let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=Object(p["create"])(s,Ue);if("error"in o)throw new Kt(o.error,"failed to get token accounts owned by account "+t.toBase58());return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],n=await this._rpcRequest("getLargestAccounts",r),i=Object(p["create"])(n,Ce);if("error"in i)throw new Kt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),n=await this._rpcRequest("getTokenLargestAccounts",r),i=Object(p["create"])(n,Le);if("error"in i)throw new Kt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"base64",n),s=await this._rpcRequest("getAccountInfo",i),o=Object(p["create"])(s,ce(Object(p["nullable"])(De)));if("error"in o)throw new Kt(o.error,"failed to get info about account "+t.toBase58());return o.result}async getParsedAccountInfo(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getAccountInfo",i),o=Object(p["create"])(s,ce(Object(p["nullable"])(Ke)));if("error"in o)throw new Kt(o.error,"failed to get info about account "+t.toBase58());return o.result}async getAccountInfo(t,e){try{const r=await this.getAccountInfoAndContext(t,e);return r.value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"jsonParsed",n),o=await this._rpcRequest("getMultipleAccounts",s),a=Object(p["create"])(o,ce(Object(p["array"])(Object(p["nullable"])(Ke))));if("error"in a)throw new Kt(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>t.toBase58()),s=this._buildArgs([i],r,"base64",n),o=await this._rpcRequest("getMultipleAccounts",s),a=Object(p["create"])(o,ce(Object(p["array"])(Object(p["nullable"])(De))));if("error"in a)throw new Kt(a.error,"failed to get info for accounts "+i);return a.result}async getMultipleAccountsInfo(t,e){const r=await this.getMultipleAccountsInfoAndContext(t,e);return r.value}async getStakeActivation(t,e,r){const{commitment:n,config:i}=ie(e),s=this._buildArgs([t.toBase58()],n,void 0,{...i,epoch:null!=r?r:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getStakeActivation",s),a=Object(p["create"])(o,ae(Ze));if("error"in a)throw new Kt(a.error,"failed to get Stake Activation "+t.toBase58());return a.result}async getProgramAccounts(t,e){const{commitment:r,config:n}=ie(e),{encoding:i,...s}=n||{},o=this._buildArgs([t.toBase58()],r,i||"base64",s),a=await this._rpcRequest("getProgramAccounts",o),c=Object(p["array"])(Ve),u=!0===s.withContext?Object(p["create"])(a,ce(c)):Object(p["create"])(a,ae(c));if("error"in u)throw new Kt(u.error,"failed to get accounts owned by program "+t.toBase58());return u.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",n),s=await this._rpcRequest("getProgramAccounts",i),o=Object(p["create"])(s,ae(Object(p["array"])(Qe)));if("error"in o)throw new Kt(o.error,"failed to get accounts owned by program "+t.toBase58());return o.result}async confirmTransaction(t,e){let r,n;if("string"==typeof t)r=t;else{var i;const e=t;if(null!==(i=e.abortSignal)&&void 0!==i&&i.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=c.a.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return tt(64===n.length,"signature has invalid length"),"string"===typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{null!=t&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,n,i=!1;const s=new Promise((s,o)=>{try{r=this.onSignature(e,(t,e)=>{r=void 0;const n={context:e,value:t};s({__type:st.PROCESSED,response:n})},t);const a=new Promise(t=>{null==r?t():n=this._onSubscriptionStateChange(r,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(e);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(null!==c&&void 0!==c&&c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return;break;case"processed":case"recent":}i=!0,s({__type:st.PROCESSED,response:{context:n,value:c}})}})()}catch(a){o(a)}}),o=()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)};return{abortConfirmation:o,confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise(e=>{const n=async()=>{try{const e=await this.getBlockHeight(t);return e}catch(e){return-1}};(async()=>{let t=await n();if(!i){while(t<=r){if(await kt(1e3),i)return;if(t=await n(),i)return}e({__type:st.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,s]);if(t.__type!==st.PROCESSED)throw new C(n);u=t.response}finally{i=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(n,{commitment:t,minContextSlot:r});return a=e.slot,null===i||void 0===i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)while(1){if(i!==s)return void e({__type:st.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await kt(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===st.PROCESSED)h=e.response;else{var d;let n;while(1){var p;const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(null!==(p=e.slotInWhichNonceDidAdvance)&&void 0!==p?p:r))){n=t;break}await kt(400)}if(null===(d=n)||void 0===d||!d.value)throw new V(s);{const e=t||"finalized",{confirmationStatus:r}=n.value;switch(e){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new V(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new V(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new V(s);break;default:}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const n=new Promise(e=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4;break}r=setTimeout(()=>e({__type:st.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,n]);if(t.__type!==st.PROCESSED)throw new D(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Object(p["create"])(t,ae(Object(p["array"])(ir)));if("error"in e)throw new Kt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),n=Object(p["create"])(r,or);if("error"in n)throw new Kt(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",n),s=Object(p["create"])(i,ae(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",n),s=Object(p["create"])(i,ae(Object(p["string"])()));if("error"in s)throw new Kt(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],n=await this._rpcRequest("getSlotLeaders",r),i=Object(p["create"])(n,ae(Object(p["array"])($t)));if("error"in i)throw new Kt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:n}=await this.getSignatureStatuses([t],e);tt(1===n.length);const i=n[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const n=await this._rpcRequest("getSignatureStatuses",r),i=Object(p["create"])(n,ur);if("error"in i)throw new Kt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",n),s=Object(p["create"])(i,ae(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){const e=await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});return e.value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),n=Object(p["create"])(r,Te);if("error"in n)throw new Kt(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,r){const{commitment:n,config:i}=ie(r),s=this._buildArgs([t.map(t=>t.toBase58())],n,void 0,{...i,epoch:null!=e?e:null===i||void 0===i?void 0:i.epoch}),o=await this._rpcRequest("getInflationReward",s),a=Object(p["create"])(o,de);if("error"in a)throw new Kt(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Object(p["create"])(t,_e);if("error"in e)throw new Kt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",n),s=Object(p["create"])(i,je);if("error"in s)throw new Kt(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Object(p["create"])(t,Be);if("error"in e)throw new Kt(e.error,"failed to get epoch schedule");const r=e.result;return new Vt(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Object(p["create"])(t,Ne);if("error"in e)throw new Kt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Object(p["create"])(n,lr);return"error"in i?0:i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),n=Object(p["create"])(r,zr);if("error"in n)throw new Kt(n.error,"failed to get recent blockhash");return n.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Object(p["create"])(e,Dr);if("error"in r)throw new Kt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Object(p["create"])(n,Vr);if("error"in i)throw new Kt(i.error,"failed to get fee calculator");const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const r=T(t.serialize()).toString("base64"),n=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",n),s=Object(p["create"])(i,ce(Object(p["nullable"])(Object(p["number"])())));if("error"in s)throw new Kt(s.error,"failed to get fee for message");if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var e;const r=null===t||void 0===t||null===(e=t.lockedWritableAccounts)||void 0===e?void 0:e.map(t=>t.toBase58()),n=null!==r&&void 0!==r&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=Object(p["create"])(i,Ee);if("error"in s)throw new Kt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{const e=await this.getRecentBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{const e=await this.getLatestBlockhashAndContext(t);return e.value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",n),s=Object(p["create"])(i,Wr);if("error"in s)throw new Kt(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgs([t],r,void 0,n),s=await this._rpcRequest("isBlockhashValid",i),o=Object(p["create"])(s,Ur);if("error"in o)throw new Kt(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Object(p["create"])(t,ae(Se));if("error"in e)throw new Kt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Object(p["create"])(t,ae(Object(p["string"])()));if("error"in e)throw new Kt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=Object(p["create"])(s,Er);if("error"in t)throw t.error;return t.result}case"none":{const t=Object(p["create"])(s,_r);if("error"in t)throw t.error;return t.result}default:{const t=Object(p["create"])(s,Tr);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:r})=>({meta:e,transaction:{...t,message:le(r,t.message)},version:r}))}:null}}}catch(o){throw new Kt(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(null===n||void 0===n?void 0:n.transactionDetails){case"accounts":{const t=Object(p["create"])(s,Br);if("error"in t)throw t.error;return t.result}case"none":{const t=Object(p["create"])(s,Nr);if("error"in t)throw t.error;return t.result}default:{const t=Object(p["create"])(s,jr);if("error"in t)throw t.error;return t.result}}}catch(o){throw new Kt(o,"failed to get block")}}async getBlockProduction(t){let e,r;if("string"===typeof t)r=t;else if(t){const{commitment:n,...i}=t;r=n,e=i}const n=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",n),s=Object(p["create"])(i,Ie);if("error"in s)throw new Kt(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,n),s=await this._rpcRequest("getTransaction",i),o=Object(p["create"])(s,Rr);if("error"in o)throw new Kt(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:le(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:r,config:n}=ie(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n),s=await this._rpcRequest("getTransaction",i),o=Object(p["create"])(s,Lr);if("error"in o)throw new Kt(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=Object(p["create"])(t,Lr);if("error"in e)throw new Kt(e.error,"failed to get transactions");return e.result});return o}async getTransactions(t,e){const{commitment:r,config:n}=ie(e),i=t.map(t=>{const e=this._buildArgsAtLeastConfirmed([t],r,void 0,n);return{methodName:"getTransaction",args:e}}),s=await this._rpcBatchRequest(i),o=s.map(t=>{const e=Object(p["create"])(t,Rr);if("error"in e)throw new Kt(e.error,"failed to get transactions");const r=e.result;return r?{...r,transaction:{...r.transaction,message:le(r.version,r.transaction.message)}}:r});return o}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p["create"])(n,xr);if("error"in i)throw new Kt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const o={...s,transactions:s.transactions.map(({transaction:t,meta:e})=>{const r=new rt(t.message);return{meta:e,transaction:{...t,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:ct.populate(t.message,t.signatures)}))}}async getBlocks(t,e,r){const n=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",n),s=Object(p["create"])(i,ae(Object(p["array"])(Object(p["number"])())));if("error"in s)throw new Kt(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=Object(p["create"])(n,Pr);if("error"in i)throw new Kt(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=Object(p["create"])(n,Pr);if("error"in i)throw new Kt(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p["create"])(n,Rr);if("error"in i)throw new Kt(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const o=new rt(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:ct.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=Object(p["create"])(n,Lr);if("error"in i)throw new Kt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(t=>{const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed");return{methodName:"getConfirmedTransaction",args:r}}),n=await this._rpcBatchRequest(r),i=n.map(t=>{const e=Object(p["create"])(t,Lr);if("error"in e)throw new Kt(e.error,"failed to get confirmed transactions");return e.result});return i}async getConfirmedSignaturesForAddress(t,e,r){let n={},i=await this.getFirstAvailableBlock();while(!("until"in n)){if(e--,e<=0||e<i)break;try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(n.until=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}let s=await this.getSlot("finalized");while(!("before"in n)){if(r++,r>s)break;try{const t=await this.getConfirmedBlockSignatures(r);t.signatures.length>0&&(n.before=t.signatures[t.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}}const o=await this.getConfirmedSignaturesForAddress2(t,n);return o.map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=Object(p["create"])(i,qe);if("error"in s)throw new Kt(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const n=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",n),s=Object(p["create"])(i,He);if("error"in s)throw new Kt(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=new Yt({key:t,state:Yt.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:n}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==n&&(i=At.fromAccountData(n.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),n=Object(p["create"])(r,Fr);if("error"in n)throw new Kt(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){while(this._pollingBlockhash)await kt(100);const t=Date.now()-this._blockhashInfo.lastFetch,e=t>=re;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let n=0;n<50;n++){const t=await this.getLatestBlockhash("finalized");if(r!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await kt(mt/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=ie(t),n=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",n),s=Object(p["create"])(i,ce(Object(p["number"])()));if("error"in s)throw new Kt(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const i=t,s=i.serialize(),o=n["Buffer"].from(s).toString("base64");if(Array.isArray(e)||void 0!==r)throw new Error("Invalid arguments");const a=e||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=Object(p["create"])(u,ve);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let i;if(t instanceof ct){let e=t;i=new ct,i.feePayer=e.feePayer,i.instructions=t.instructions,i.nonceInfo=e.nonceInfo,i.signatures=e.signatures}else i=ct.populate(t),i._message=i._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(i.lastValidBlockHeight=e.lastValidBlockHeight,i.recentBlockhash=e.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const r=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}t=!0}}const o=i._compile(),a=o.serialize(),c=i._serialize(a),u=c.toString("base64"),l={encoding:"base64",commitment:this.commitment};if(r){const t=(Array.isArray(r)?r:o.nonProgramIds()).map(t=>t.toBase58());l["accounts"]={encoding:"base64",addresses:t}}s&&(l.sigVerify=!0);const h=[u,l],d=await this._rpcRequest("simulateTransaction",h),m=Object(p["create"])(d,ve);if("error"in m){let t;if("data"in m.error&&(t=m.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new Ft("failed to simulate transaction: "+m.error.message,t)}return m.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const r=t.serialize();return await this.sendRawTransaction(r,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(t.nonceInfo)t.sign(...n);else{let e=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=r.lastValidBlockHeight,t.recentBlockhash=r.blockhash,t.sign(...n),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=T(t).toString("base64"),n=await this.sendEncodedTransaction(r,e);return n}async sendEncodedTransaction(t,e){const r={encoding:"base64"},n=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(r.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(r.minContextSlot=e.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[t,r],o=await this._rpcRequest("sendTransaction",s),a=Object(p["create"])(o,Kr);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new Ft("failed to send transaction: "+a.error.message,t)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){var r;const n=null===(r=this._subscriptionsByHash[t])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const r=this._subscriptionStateChangeCallbacksByHash[t];r&&r.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var r;const n=this._subscriptionHashByClientSubscriptionId[t];if(null==n)return()=>{};const i=(r=this._subscriptionStateChangeCallbacksByHash)[n]||(r[n]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const r=this._subscriptionsByHash[t];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(t,{...r,state:"subscribing"});const e=await this._rpcWebSocket.call(i,n);this._setSubscription(t,{...r,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=r.callbacks,await this._updateSubscriptions()}catch(s){if(Error,!e())return;this._setSubscription(t,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(t,{...r,state:"unsubscribing"}),this._setSubscription(t,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(s){if(Error,!e())return;return this._setSubscription(t,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==r&&r.forEach(t=>{try{t(...e)}catch(r){}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Ye);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,n=Wt([t.method,e],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const e=this._subscriptionsByHash[n];tt(void 0!==e,"Could not find a `Subscription` when tearing down client subscription #"+r),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const n=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Ge);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,n){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const n=this._buildArgs(["object"===typeof t?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,Zr);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,$e);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,er);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r&&await r()}_buildArgs(t,e,r,n){const i=e||this._commitment;if(i||r||n){let e={};r&&(e.encoding=r),i&&(e.commitment=i),n&&(e=Object.assign(e,n)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,r,n){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,n)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,rr);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const n=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,r)=>{if("status"===t.type){e(t.result,r);try{this.removeSignatureListener(i)}catch(n){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(t,e,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],n,void 0,i),o=this._makeSubscription({callback:(t,r)=>{e(t,r);try{this.removeSignatureListener(o)}catch(n){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Object(p["create"])(t,nr);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Yr{constructor(t){this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:v()}static generate(){return new Yr(v())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),n=I(e);for(let t=0;t<32;t++)if(r[t]!==n[t])throw new Error("provided secretKey is invalid")}return new Yr({publicKey:r,secretKey:t})}static fromSeed(t){const e=I(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Yr({publicKey:e,secretKey:r})}get publicKey(){return new L(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Jr=Object.freeze({CreateLookupTable:{index:0,layout:h["struct"]([h["u32"]("instruction"),_t("recentSlot"),h["u8"]("bumpSeed")])},FreezeLookupTable:{index:1,layout:h["struct"]([h["u32"]("instruction")])},ExtendLookupTable:{index:2,layout:h["struct"]([h["u32"]("instruction"),_t(),h["seq"](K(),h["offset"](h["u32"](),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:h["struct"]([h["u32"]("instruction")])},CloseLookupTable:{index:4,layout:h["struct"]([h["u32"]("instruction")])}});class Gr{constructor(){}static createLookupTable(t){const[e,r]=L.findProgramAddressSync([t.authority.toBuffer(),Object(d["toBufferLE"])(BigInt(t.recentSlot),8)],this.programId),n=Jr.CreateLookupTable,i=St(n,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}];return[new at({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){const e=Jr.FreezeLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new at({programId:this.programId,keys:n,data:r})}static extendLookupTable(t){const e=Jr.ExtendLookupTable,r=St(e,{addresses:t.addresses.map(t=>t.toBytes())}),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&n.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:jt.programId,isSigner:!1,isWritable:!1}),new at({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(t){const e=Jr.DeactivateLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new at({programId:this.programId,keys:n,data:r})}static closeLookupTable(t){const e=Jr.CloseLookupTable,r=St(e),n=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new at({programId:this.programId,keys:n,data:r})}}Gr.programId=new L("AddressLookupTab1e1111111111111111111111111");const Xr=Object.freeze({RequestUnits:{index:0,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("units"),h["u32"]("additionalFee")])},RequestHeapFrame:{index:1,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("bytes")])},SetComputeUnitLimit:{index:2,layout:h["struct"]([h["u8"]("instruction"),h["u32"]("units")])},SetComputeUnitPrice:{index:3,layout:h["struct"]([h["u8"]("instruction"),_t("microLamports")])}});class $r{constructor(){}static requestUnits(t){const e=Xr.RequestUnits,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Xr.RequestHeapFrame,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Xr.SetComputeUnitLimit,r=St(e,t);return new at({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Xr.SetComputeUnitPrice,r=St(e,{microLamports:BigInt(t.microLamports)});return new at({keys:[],programId:this.programId,data:r})}}$r.programId=new L("ComputeBudget111111111111111111111111111111");const tn=64,en=32,rn=64,nn=h["struct"]([h["u8"]("numSignatures"),h["u8"]("padding"),h["u16"]("signatureOffset"),h["u16"]("signatureInstructionIndex"),h["u16"]("publicKeyOffset"),h["u16"]("publicKeyInstructionIndex"),h["u16"]("messageDataOffset"),h["u16"]("messageDataSize"),h["u16"]("messageInstructionIndex")]);class sn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:i,instructionIndex:s}=t;tt(e.length===en,`Public Key must be ${en} bytes but received ${e.length} bytes`),tt(i.length===rn,`Signature must be ${rn} bytes but received ${i.length} bytes`);const o=nn.span,a=o+e.length,c=a+i.length,u=1,l=n["Buffer"].alloc(c+r.length),h=null==s?65535:s;return nn.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:h,publicKeyOffset:o,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(e,o),l.fill(i,a),l.fill(r,c),new at({keys:[],programId:sn.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:n}=t;tt(e.length===tn,`Private key must be ${tn} bytes but received ${e.length} bytes`);try{const t=Yr.fromSecretKey(e),i=t.publicKey.toBytes(),s=A(r,t.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(i){throw new Error("Error creating instruction; "+i)}}}sn.programId=new L("Ed25519SigVerify111111111111111111111111111");const on=(t,e)=>{const r=S["secp256k1"].sign(t,e);return[r.toCompactRawBytes(),r.recovery]};S["secp256k1"].utils.isValidPrivateKey;const an=S["secp256k1"].getPublicKey,cn=32,un=20,ln=64,hn=11,dn=h["struct"]([h["u8"]("numSignatures"),h["u16"]("signatureOffset"),h["u8"]("signatureInstructionIndex"),h["u16"]("ethAddressOffset"),h["u8"]("ethAddressInstructionIndex"),h["u16"]("messageDataOffset"),h["u16"]("messageDataSize"),h["u8"]("messageInstructionIndex"),h["blob"](20,"ethAddress"),h["blob"](64,"signature"),h["u8"]("recoveryId")]);class pn{constructor(){}static publicKeyToEthAddress(t){tt(t.length===ln,`Public key must be ${ln} bytes but received ${t.length} bytes`);try{return n["Buffer"].from(Object(k["keccak_256"])(T(t))).slice(-un)}catch(e){throw new Error("Error constructing Ethereum address: "+e)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:n,recoveryId:i,instructionIndex:s}=t;return pn.createInstructionWithEthAddress({ethAddress:pn.publicKeyToEthAddress(e),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:i,recoveryId:s,instructionIndex:o=0}=t;let a;a="string"===typeof e?e.startsWith("0x")?n["Buffer"].from(e.substr(2),"hex"):n["Buffer"].from(e,"hex"):e,tt(a.length===un,`Address must be ${un} bytes but received ${a.length} bytes`);const c=1+hn,u=c,l=c+a.length,h=l+i.length+1,d=1,p=n["Buffer"].alloc(dn.span+r.length);return dn.encode({numSignatures:d,signatureOffset:l,signatureInstructionIndex:o,ethAddressOffset:u,ethAddressInstructionIndex:o,messageDataOffset:h,messageDataSize:r.length,messageInstructionIndex:o,signature:T(i),ethAddress:T(a),recoveryId:s},p),p.fill(T(r),dn.span),new at({keys:[],programId:pn.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:i}=t;tt(e.length===cn,`Private key must be ${cn} bytes but received ${e.length} bytes`);try{const t=T(e),s=an(t,!1).slice(1),o=n["Buffer"].from(Object(k["keccak_256"])(T(r))),[a,c]=on(o,t);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,recoveryId:c,instructionIndex:i})}catch(s){throw new Error("Error creating instruction; "+s)}}}var mn;pn.programId=new L("KeccakSecp256k11111111111111111111111111111");const gn=new L("StakeConfig11111111111111111111111111111111");class bn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}mn=bn,bn.default=new mn(0,0,L.default);const yn=Object.freeze({Initialize:{index:0,layout:h["struct"]([h["u32"]("instruction"),q(),H()])},Authorize:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("stakeAuthorizationType")])},Delegate:{index:2,layout:h["struct"]([h["u32"]("instruction")])},Split:{index:3,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},Withdraw:{index:4,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},Deactivate:{index:5,layout:h["struct"]([h["u32"]("instruction")])},Merge:{index:7,layout:h["struct"]([h["u32"]("instruction")])},AuthorizeWithSeed:{index:8,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("stakeAuthorizationType"),Z("authoritySeed"),K("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class fn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:n}=t,i=n||bn.default,s=yn.Initialize,o=St(s,{authorized:{staker:T(r.staker.toBuffer()),withdrawer:T(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:T(i.custodian.toBuffer())}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:yt,isSigner:!1,isWritable:!1}],programId:this.programId,data:o};return new at(a)}static createAccountWithSeed(t){const e=new ct;e.add(jt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(t){const e=new ct;e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:n}=t,i=yn.Delegate,s=St(i);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:gn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=t,o=yn.Authorize,a=St(o,{newAuthorized:T(n.toBuffer()),stakeAuthorizationType:i.index}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ct).add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=t,c=yn.AuthorizeWithSeed,u=St(c,{newAuthorized:T(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:T(i.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:gt,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new ct).add({keys:l,programId:this.programId,data:u})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=t,s=yn.Split,o=St(s,{lamports:i});return new at({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(t,e){const r=new ct;return r.add(jt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=t,c=new ct;return c.add(jt.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),e&&e>0&&c.add(jt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:n}=t,i=yn.Merge,s=St(i);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=t,o=yn.Withdraw,a=St(o,{lamports:i}),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ct).add({keys:c,programId:this.programId,data:a})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,n=yn.Deactivate,i=St(n);return(new ct).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}fn.programId=new L("Stake11111111111111111111111111111111111111"),fn.space=200;const wn=Object.freeze({InitializeAccount:{index:0,layout:h["struct"]([h["u32"]("instruction"),Y()])},Authorize:{index:1,layout:h["struct"]([h["u32"]("instruction"),K("newAuthorized"),h["u32"]("voteAuthorizationType")])},Withdraw:{index:3,layout:h["struct"]([h["u32"]("instruction"),h["ns64"]("lamports")])},UpdateValidatorIdentity:{index:4,layout:h["struct"]([h["u32"]("instruction")])},AuthorizeWithSeed:{index:10,layout:h["struct"]([h["u32"]("instruction"),J()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class kn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:n}=t,i=wn.InitializeAccount,s=St(i,{voteInit:{nodePubkey:T(n.nodePubkey.toBuffer()),authorizedVoter:T(n.authorizedVoter.toBuffer()),authorizedWithdrawer:T(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:yt,isSigner:!1,isWritable:!1},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new at(o)}static createAccount(t){const e=new ct;return e.add(jt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=t,s=wn.Authorize,o=St(s,{newAuthorized:T(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=t,a=wn.AuthorizeWithSeed,c=St(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:T(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:T(i.toBuffer()),voteAuthorizationType:s.index}}),u=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:gt,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new ct).add({keys:u,programId:this.programId,data:c})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=t,s=wn.Withdraw,o=St(s,{lamports:n}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:a,programId:this.programId,data:o})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return kn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:n}=t,i=wn.UpdateValidatorIdentity,s=St(i),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ct).add({keys:o,programId:this.programId,data:s})}}kn.programId=new L("Vote111111111111111111111111111111111111111"),kn.space=3762;new L("Va1idator1nfo111111111111111111111111111111"),Object(p["type"])({name:Object(p["string"])(),website:Object(p["optional"])(Object(p["string"])()),details:Object(p["optional"])(Object(p["string"])()),keybaseUsername:Object(p["optional"])(Object(p["string"])())});new L("Vote111111111111111111111111111111111111111"),h["struct"]([K("nodePubkey"),K("authorizedWithdrawer"),h["u8"]("commission"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("slot"),h["u32"]("confirmationCount")]),h["offset"](h["u32"](),-8),"votes"),h["u8"]("rootSlotValid"),h["nu64"]("rootSlot"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("epoch"),K("authorizedVoter")]),h["offset"](h["u32"](),-8),"authorizedVoters"),h["struct"]([h["seq"](h["struct"]([K("authorizedPubkey"),h["nu64"]("epochOfLastAuthorizedSwitch"),h["nu64"]("targetEpoch")]),32,"buf"),h["nu64"]("idx"),h["u8"]("isEmpty")],"priorVoters"),h["nu64"](),h["seq"](h["struct"]([h["nu64"]("epoch"),h["nu64"]("credits"),h["nu64"]("prevCredits")]),h["offset"](h["u32"](),-8),"epochCredits"),h["struct"]([h["nu64"]("slot"),h["nu64"]("timestamp")],"lastTimestamp")])},"6d7f":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletAdapterNetwork=void 0,function(t){t["Mainnet"]="mainnet-beta",t["Testnet"]="testnet",t["Devnet"]="devnet"}(e.WalletAdapterNetwork||(e.WalletAdapterNetwork={}))},"6f02":function(t,e,r){"use strict";function n(t){return"version"in t}r.d(e,"a",(function(){return n}))},"74a3":function(t,e,r){"use strict";r.r(e),r.d(e,"SolanaSignAndSendTransaction",(function(){return n["a"]})),r.d(e,"SolanaSignIn",(function(){return i})),r.d(e,"SolanaSignMessage",(function(){return s["a"]})),r.d(e,"SolanaSignTransaction",(function(){return o["a"]}));var n=r("7695");const i="solana:signIn";var s=r("e729"),o=r("1b1b")},"753b":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"d",(function(){return a})),r.d(e,"i",(function(){return c})),r.d(e,"j",(function(){return u})),r.d(e,"g",(function(){return l})),r.d(e,"f",(function(){return h})),r.d(e,"e",(function(){return d})),r.d(e,"h",(function(){return p})),r.d(e,"l",(function(){return m})),r.d(e,"m",(function(){return g})),r.d(e,"k",(function(){return b}));r("d9e2");class n extends Error{constructor(t){super(t)}}class i extends n{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class s extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class o extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class a extends n{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class c extends n{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class u extends n{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}class l extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionProgramError"}}class h extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionKeysError"}}class d extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionDataError"}}class p extends n{constructor(){super(...arguments),this.name="TokenInvalidInstructionTypeError"}}class m extends n{constructor(){super(...arguments),this.name="TokenTransferHookAccountNotFound"}}class g extends n{constructor(){super(...arguments),this.name="TokenTransferHookInvalidSeed"}}class b extends n{constructor(){super(...arguments),this.name="TokenTransferHookAccountDataNotFound"}}},7695:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signAndSendTransaction"},"7b05":function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return y}));r("14d9"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1");var n=r("753b");const i=1,s=1,o=1,a=1,c=1,u=1,l=1,h=1;function d(e){if(e.length<1)throw new n["m"];const[r,...o]=e;if(o.length<r)throw new n["m"];return{data:t.from(o.slice(0,r)),packedLength:i+s+r}}function p(t,e){if(t.length<2)throw new n["m"];const[r,s]=t;if(e.length<s+r)throw new n["m"];return{data:e.subarray(r,r+s),packedLength:i+o+a}}function m(t,e){if(t.length<1)throw new n["m"];const[r]=t;if(e.length<=r)throw new n["m"];return{data:e[r].pubkey.toBuffer(),packedLength:i+c}}async function g(t,e,r){if(t.length<3)throw new n["m"];const[s,o,a]=t;if(e.length<=s)throw new n["m"];const c=await r.getAccountInfo(e[s].pubkey);if(null==c)throw new n["k"];if(c.data.length<o+a)throw new n["m"];return{data:c.data.subarray(o,o+a),packedLength:i+u+l+h}}async function b(t,e,r,i){const[s,...o]=t,a=new Uint8Array(o);switch(s){case 0:return null;case 1:return d(a);case 2:return p(a,r);case 3:return m(a,e);case 4:return g(a,e,i);default:throw new n["m"]}}async function y(t,e,r,n){const i=[];let s=0;while(s<32){const o=await b(t.slice(s),e,r,n);if(null==o)break;i.push(o.data),s+=o.packedLength}return i}}).call(this,r("1c35").Buffer)},"7ee5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("14d9");var n=r("b675"),i=r("52c3"),s=r("6f02");class o extends n["a"]{async sendTransaction(t,e,r={}){let n=!0;try{if(Object(s["a"])(t)){if(!this.supportedTransactionVersions)throw new i["k"]("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new i["k"](`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const n=t.serialize();return await e.sendRawTransaction(n,r)}catch(o){if(o instanceof i["m"])throw n=!1,o;throw new i["k"](null===o||void 0===o?void 0:o.message,o)}}else try{const{signers:n,...i}=r;t=await this.prepareTransaction(t,e,i),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),t=await this.signTransaction(t);const s=t.serialize();return await e.sendRawTransaction(s,i)}catch(o){if(o instanceof i["m"])throw n=!1,o;throw new i["k"](null===o||void 0===o?void 0:o.message,o)}}catch(o){throw n&&this.emit("error",o),o}}async signAllTransactions(t){for(const r of t)if(Object(s["a"])(r)){if(!this.supportedTransactionVersions)throw new i["m"]("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new i["m"](`Signing transaction version ${r.version} isn't supported by this wallet`)}const e=[];for(const r of t)e.push(await this.signTransaction(r));return e}}class a extends o{}},"7f6a":function(t,e,r){"use strict";r.d(e,"a",(function(){return W})),r.d(e,"d",(function(){return Z})),r.d(e,"b",(function(){return q})),r.d(e,"c",(function(){return H}));r("d9e2"),r("14d9"),r("13d5");var n=r("0f06"),i=r("b9be"),s=r("f7f2"),o=r("d99e"),a=r("8df2"),c=r("633a");const u=Object(a["struct"])([Object(c["a"])("lockCpi")]),l=u.span;const h=Object(a["struct"])([Object(a["u8"])("state")]),d=h.span;r("64b9");const p=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("memberAddress")]),m=p.span;const g=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("groupAddress")]),b=g.span;const y=Object(a["struct"])([]),f=y.span;const w=Object(a["struct"])([Object(c["b"])("rateAuthority"),Object(a["ns64"])("initializationTimestamp"),Object(a["s16"])("preUpdateAverageRate"),Object(a["ns64"])("lastUpdateTimestamp"),Object(a["s16"])("currentRate")]),k=w.span;const S=Object(a["struct"])([Object(c["a"])("requireIncomingTransferMemos")]),v=S.span;const I=Object(a["struct"])([Object(c["b"])("authority"),Object(c["b"])("metadataAddress")]),M=I.span;const A=Object(a["struct"])([Object(c["b"])("closeAuthority")]),O=A.span;const T=Object(a["struct"])([]),_=T.span,E=T.span;const j=Object(a["struct"])([Object(c["b"])("delegate")]),B=j.span;const N=1e4;BigInt(N);function x(t){return Object(a["struct"])([Object(c["c"])("epoch"),Object(c["c"])("maximumFee"),Object(a["u16"])("transferFeeBasisPoints")],t)}const P=Object(a["struct"])([Object(c["b"])("transferFeeConfigAuthority"),Object(c["b"])("withdrawWithheldAuthority"),Object(c["c"])("withheldAmount"),x("olderTransferFee"),x("newerTransferFee")]),R=P.span;const L=Object(a["struct"])([Object(c["c"])("withheldAmount")]),z=L.span;var W,U=r("17fd");r("d6e3");(function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["TransferFeeConfig"]=1]="TransferFeeConfig",t[t["TransferFeeAmount"]=2]="TransferFeeAmount",t[t["MintCloseAuthority"]=3]="MintCloseAuthority",t[t["ConfidentialTransferMint"]=4]="ConfidentialTransferMint",t[t["ConfidentialTransferAccount"]=5]="ConfidentialTransferAccount",t[t["DefaultAccountState"]=6]="DefaultAccountState",t[t["ImmutableOwner"]=7]="ImmutableOwner",t[t["MemoTransfer"]=8]="MemoTransfer",t[t["NonTransferable"]=9]="NonTransferable",t[t["InterestBearingConfig"]=10]="InterestBearingConfig",t[t["CpiGuard"]=11]="CpiGuard",t[t["PermanentDelegate"]=12]="PermanentDelegate",t[t["NonTransferableAccount"]=13]="NonTransferableAccount",t[t["TransferHook"]=14]="TransferHook",t[t["TransferHookAccount"]=15]="TransferHookAccount",t[t["MetadataPointer"]=18]="MetadataPointer",t[t["TokenMetadata"]=19]="TokenMetadata",t[t["GroupPointer"]=20]="GroupPointer",t[t["GroupMemberPointer"]=22]="GroupMemberPointer"})(W||(W={}));const C=2,D=2;function V(t){return t+C+D}function F(t){switch(t){case W.TokenMetadata:return!0;default:return!1}}function K(t){switch(t){case W.Uninitialized:return 0;case W.TransferFeeConfig:return R;case W.TransferFeeAmount:return z;case W.MintCloseAuthority:return O;case W.ConfidentialTransferMint:return 97;case W.ConfidentialTransferAccount:return 286;case W.CpiGuard:return l;case W.DefaultAccountState:return d;case W.ImmutableOwner:return f;case W.MemoTransfer:return v;case W.MetadataPointer:return M;case W.NonTransferable:return _;case W.InterestBearingConfig:return k;case W.PermanentDelegate:return B;case W.NonTransferableAccount:return E;case W.TransferHook:return U["b"];case W.TransferHookAccount:return U["a"];case W.GroupPointer:return b;case W.GroupMemberPointer:return m;case W.TokenMetadata:throw Error("Cannot get type length for variable extension type: "+t);default:throw Error("Unknown extension type: "+t)}}function Q(t,e,r={}){if(0===t.length&&0===Object.keys(r).length)return e;{const e=n["a"]+o["a"]+t.filter((e,r)=>r===t.indexOf(e)).map(t=>V(K(t))).reduce((t,e)=>t+e,0)+Object.entries(r).map(([t,e])=>{if(!F(Number(t)))throw Error(`Extension ${t} is not variable length`);return V(e)}).reduce((t,e)=>t+e,0);return e===s["a"]?e+C:e}}function Z(t,e={}){return Q(t,i["a"],e)}function q(t){return Q(t,n["a"])}function H(t,e){let r=0;while(V(r)<=e.length){const n=e.readUInt16LE(r),i=e.readUInt16LE(r+C),s=V(r);if(n==t)return e.slice(s,s+i);r=s+i}return null}},8217:function(t,e,r){"use strict";r("d9e2"),Object.defineProperty(e,"__esModule",{value:!0}),e.WalletWindowClosedError=e.WalletWindowBlockedError=e.WalletTimeoutError=e.WalletSignInError=e.WalletSignMessageError=e.WalletSignTransactionError=e.WalletSendTransactionError=e.WalletNotConnectedError=e.WalletKeypairError=e.WalletPublicKeyError=e.WalletAccountError=e.WalletDisconnectionError=e.WalletDisconnectedError=e.WalletConnectionError=e.WalletConfigError=e.WalletLoadError=e.WalletNotReadyError=e.WalletError=void 0;class n extends Error{constructor(t,e){super(t),this.error=e}}e.WalletError=n;class i extends n{constructor(){super(...arguments),this.name="WalletNotReadyError"}}e.WalletNotReadyError=i;class s extends n{constructor(){super(...arguments),this.name="WalletLoadError"}}e.WalletLoadError=s;class o extends n{constructor(){super(...arguments),this.name="WalletConfigError"}}e.WalletConfigError=o;class a extends n{constructor(){super(...arguments),this.name="WalletConnectionError"}}e.WalletConnectionError=a;class c extends n{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}e.WalletDisconnectedError=c;class u extends n{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}e.WalletDisconnectionError=u;class l extends n{constructor(){super(...arguments),this.name="WalletAccountError"}}e.WalletAccountError=l;class h extends n{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}e.WalletPublicKeyError=h;class d extends n{constructor(){super(...arguments),this.name="WalletKeypairError"}}e.WalletKeypairError=d;class p extends n{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}e.WalletNotConnectedError=p;class m extends n{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}e.WalletSendTransactionError=m;class g extends n{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}e.WalletSignTransactionError=g;class b extends n{constructor(){super(...arguments),this.name="WalletSignMessageError"}}e.WalletSignMessageError=b;class y extends n{constructor(){super(...arguments),this.name="WalletSignInError"}}e.WalletSignInError=y;class f extends n{constructor(){super(...arguments),this.name="WalletTimeoutError"}}e.WalletTimeoutError=f;class w extends n{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}e.WalletWindowBlockedError=w;class k extends n{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}e.WalletWindowClosedError=k},"834f":function(t,e,r){"use strict";r("14d9");var n=this&&this.__awaiter||function(t,e,r,n){function i(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,s){function o(t){try{c(n.next(t))}catch(e){s(e)}}function a(t){try{c(n["throw"](t))}catch(e){s(e)}}function c(t){t.done?r(t.value):i(t.value).then(o,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.isIosAndRedirectable=e.scopePollingDetectionStrategy=e.BaseWalletAdapter=e.WalletReadyState=e.EventEmitter=void 0;const s=i(r("ba10"));e.EventEmitter=s.default;const o=r("8217");(function(t){t["Installed"]="Installed",t["NotDetected"]="NotDetected",t["Loadable"]="Loadable",t["Unsupported"]="Unsupported"})(e.WalletReadyState||(e.WalletReadyState={}));class a extends s.default{get connected(){return!!this.publicKey}autoConnect(){return n(this,void 0,void 0,(function*(){yield this.connect()}))}prepareTransaction(t,e,r={}){return n(this,void 0,void 0,(function*(){const n=this.publicKey;if(!n)throw new o.WalletNotConnectedError;return t.feePayer=t.feePayer||n,t.recentBlockhash=t.recentBlockhash||(yield e.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}))}}function c(t){if("undefined"===typeof window||"undefined"===typeof document)return;const e=[];function r(){const r=t();if(r)for(const t of e)t()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function u(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}e.BaseWalletAdapter=a,e.scopePollingDetectionStrategy=c,e.isIosAndRedirectable=u},"86b6":function(t,e,r){"use strict";r.d(e,"a",(function(){return C}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("6f02"),a=r("64b9"),c=r("253c9");r("d9e2"),r("14d9");const u="solana:mainnet",l="solana:devnet",h="solana:testnet";var d=r("7695"),p=r("1b1b"),m=r("e729"),g=r("e6a8"),b=r("7ce3"),y=r("e3a8");const f="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var w,k,S,v,I,M,A,O,T,_,E,j,B,N,x=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},P=function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(t,r):i?i.value=r:e.set(t,r),r};class R{constructor(){w.add(this),k.set(this,{}),S.set(this,"1.0.0"),v.set(this,"MetaMask"),I.set(this,f),M.set(this,null),A.set(this,(t,e)=>{var r;return(null===(r=x(this,k,"f")[t])||void 0===r?void 0:r.push(e))||(x(this,k,"f")[t]=[e]),()=>x(this,w,"m",T).call(this,t,e)}),_.set(this,async()=>{if(!x(this,M,"f")){let e;try{e=(await r.e("chunk-00eabf7e").then(r.bind(null,"99ab"))).default}catch(t){throw new Error("Unable to load Solflare MetaMask SDK")}P(this,M,new e,"f"),x(this,M,"f").on("standard_change",t=>x(this,w,"m",O).call(this,"change",t))}return this.accounts.length||await x(this,M,"f").connect(),{accounts:this.accounts}}),E.set(this,async()=>{x(this,M,"f")&&await x(this,M,"f").disconnect()}),j.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignAndSendTransaction(...t)}),B.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignTransaction(...t)}),N.set(this,async(...t)=>{if(!x(this,M,"f"))throw new s["h"];return await x(this,M,"f").standardSignMessage(...t)})}get version(){return x(this,S,"f")}get name(){return x(this,v,"f")}get icon(){return x(this,I,"f")}get chains(){return[u,l,h]}get features(){return{[g["b"]]:{version:"1.0.0",connect:x(this,_,"f")},[b["b"]]:{version:"1.0.0",disconnect:x(this,E,"f")},[y["b"]]:{version:"1.0.0",on:x(this,A,"f")},[d["a"]]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:x(this,j,"f")},[p["a"]]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:x(this,B,"f")},[m["a"]]:{version:"1.0.0",signMessage:x(this,N,"f")}}}get accounts(){return x(this,M,"f")?x(this,M,"f").standardAccounts:[]}}k=new WeakMap,S=new WeakMap,v=new WeakMap,I=new WeakMap,M=new WeakMap,A=new WeakMap,_=new WeakMap,E=new WeakMap,j=new WeakMap,B=new WeakMap,N=new WeakMap,w=new WeakSet,O=function(t,...e){var r;null===(r=x(this,k,"f")[t])||void 0===r||r.forEach(t=>t.apply(null,e))},T=function(t,e){var r;x(this,k,"f")[t]=null===(r=x(this,k,"f")[t])||void 0===r?void 0:r.filter(t=>e!==t)};let L=!1;function z(){L||(Object(c["a"])(new R),L=!0)}async function W(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(n){var i;const s=n.data;var o;"metamask-inpage"===(null===s||void 0===s?void 0:s.target)&&"metamask-provider"===(null===(i=s.data)||void 0===i?void 0:i.name)&&((null===(o=s.data.data)||void 0===o?void 0:o.id)===t?(window.removeEventListener("message",r),s.data.data.error||z()):e())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),e()}const U="Solflare";class C extends n["a"]{constructor(t={}){super(),this.name=U,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const e=this._publicKey;if(e){try{t=new a["e"](t.toBytes())}catch(r){return void this.emit("error",new s["j"](null===r||void 0===r?void 0:r.message,r))}e.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=t,this._readyState!==i["b"].Unsupported&&(Object(i["d"])(()=>{var t;return!!(null!==(t=window.solflare)&&void 0!==t&&t.isSolflare||window.SolflareApp)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)}),W())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===i["b"].Loadable&&Object(i["c"])()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Loadable&&this._readyState!==i["b"].Installed)throw new s["i"];if(this.readyState===i["b"].Loadable&&Object(i["c"])()){const t=encodeURIComponent(window.location.href),e=encodeURIComponent(window.location.origin);return void(window.location.href=`https://solflare.com/ul/v1/browse/${t}?ref=${e}`)}let e,n,o;try{e=(await r.e("chunk-44f023b1").then(r.bind(null,"f97b"))).default}catch(t){throw new s["g"](null===t||void 0===t?void 0:t.message,t)}try{n=new e({network:this._config.network})}catch(t){throw new s["b"](null===t||void 0===t?void 0:t.message,t)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}if(!n.publicKey)throw new s["c"];try{o=new a["e"](n.publicKey.toBytes())}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=o,this.emit("connect",o)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;return Object(o["a"])(t)?(null===n||void 0===n?void 0:n.length)&&t.sign(n):(t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||e.commitment,await i.signAndSendTransaction(t,s)}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signMessage(t,"utf8")}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},8785:function(t,e,r){(function(t){r("d9e2"),function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function s(t,e,r){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"===typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(18).Buffer}catch(j){}function a(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function c(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"===typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,r){if("number"===typeof t)return this._initNumber(t,e,r);if("object"===typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},s.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},s.prototype._initArray=function(t,e,r){if(n("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=t.length-e;for(n=a%2===0?e+1:e;n<t.length;n+=2)i=c(t,e,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var s=t.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(t,l,t.length,e),l=0;l<o;l++)h*=e;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){l(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(j){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=p[t],l=m[t];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var g=h.modrn(l).toString(t);h=h.idivn(l),r=h.isZero()?g+r:d[u-g.length]+g+r}this.isZero()&&(r="0"+r);while(r.length%e!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var g=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function b(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1}return e}function y(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,e.length-1),p=Math.max(0,u-t.length+1);p<=d;p++){var m=u-p|0;i=0|t.words[m],s=0|e.words[p],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=g(t,s),a="le"===e?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r++]=255&o,r<t.length&&(t[r++]=o>>8&255),r<t.length&&(t[r++]=o>>16&255),6===s?(r<t.length&&(t[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<t.length){t[r++]=n;while(r<t.length)t[r++]=0}},s.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;t[r--]=255&o,r>=0&&(t[r--]=o>>8&255),r>=0&&(t[r--]=o>>16&255),6===s?(r>=0&&(t[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){t[r--]=n;while(r>=0)t[r--]=0}},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0===(8191&e)&&(r+=13,e>>>=13),0===(127&e)&&(r+=7,e>>>=7),0===(15&e)&&(r+=4,e>>>=4),0===(3&e)&&(r+=2,e>>>=2),0===(1&e)&&r++,r},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){n("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){n("number"===typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,s=0;s<n.length;s++)e=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<r.length;s++)e=(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var s=0,o=0;o<n.length;o++)e=(0|r.words[o])-(0|n.words[o])+s,s=e>>26,this.words[o]=67108863&e;for(;0!==s&&o<r.length;o++)e=(0|r.words[o])+s,s=e>>26,this.words[o]=67108863&e;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,r){var n,i,s,o=t.words,a=e.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,p=0|o[1],m=8191&p,g=p>>>13,b=0|o[2],y=8191&b,f=b>>>13,w=0|o[3],k=8191&w,S=w>>>13,v=0|o[4],I=8191&v,M=v>>>13,A=0|o[5],O=8191&A,T=A>>>13,_=0|o[6],E=8191&_,j=_>>>13,B=0|o[7],N=8191&B,x=B>>>13,P=0|o[8],R=8191&P,L=P>>>13,z=0|o[9],W=8191&z,U=z>>>13,C=0|a[0],D=8191&C,V=C>>>13,F=0|a[1],K=8191&F,Q=F>>>13,Z=0|a[2],q=8191&Z,H=Z>>>13,Y=0|a[3],J=8191&Y,G=Y>>>13,X=0|a[4],$=8191&X,tt=X>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,dt=lt>>>13,pt=0|a[9],mt=8191&pt,gt=pt>>>13;r.negative=t.negative^e.negative,r.length=19,n=Math.imul(h,D),i=Math.imul(h,V),i=i+Math.imul(d,D)|0,s=Math.imul(d,V);var bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(m,D),i=Math.imul(m,V),i=i+Math.imul(g,D)|0,s=Math.imul(g,V),n=n+Math.imul(h,K)|0,i=i+Math.imul(h,Q)|0,i=i+Math.imul(d,K)|0,s=s+Math.imul(d,Q)|0;var yt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,D),i=Math.imul(y,V),i=i+Math.imul(f,D)|0,s=Math.imul(f,V),n=n+Math.imul(m,K)|0,i=i+Math.imul(m,Q)|0,i=i+Math.imul(g,K)|0,s=s+Math.imul(g,Q)|0,n=n+Math.imul(h,q)|0,i=i+Math.imul(h,H)|0,i=i+Math.imul(d,q)|0,s=s+Math.imul(d,H)|0;var ft=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ft>>>26)|0,ft&=67108863,n=Math.imul(k,D),i=Math.imul(k,V),i=i+Math.imul(S,D)|0,s=Math.imul(S,V),n=n+Math.imul(y,K)|0,i=i+Math.imul(y,Q)|0,i=i+Math.imul(f,K)|0,s=s+Math.imul(f,Q)|0,n=n+Math.imul(m,q)|0,i=i+Math.imul(m,H)|0,i=i+Math.imul(g,q)|0,s=s+Math.imul(g,H)|0,n=n+Math.imul(h,J)|0,i=i+Math.imul(h,G)|0,i=i+Math.imul(d,J)|0,s=s+Math.imul(d,G)|0;var wt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,D),i=Math.imul(I,V),i=i+Math.imul(M,D)|0,s=Math.imul(M,V),n=n+Math.imul(k,K)|0,i=i+Math.imul(k,Q)|0,i=i+Math.imul(S,K)|0,s=s+Math.imul(S,Q)|0,n=n+Math.imul(y,q)|0,i=i+Math.imul(y,H)|0,i=i+Math.imul(f,q)|0,s=s+Math.imul(f,H)|0,n=n+Math.imul(m,J)|0,i=i+Math.imul(m,G)|0,i=i+Math.imul(g,J)|0,s=s+Math.imul(g,G)|0,n=n+Math.imul(h,$)|0,i=i+Math.imul(h,tt)|0,i=i+Math.imul(d,$)|0,s=s+Math.imul(d,tt)|0;var kt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(O,D),i=Math.imul(O,V),i=i+Math.imul(T,D)|0,s=Math.imul(T,V),n=n+Math.imul(I,K)|0,i=i+Math.imul(I,Q)|0,i=i+Math.imul(M,K)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(k,q)|0,i=i+Math.imul(k,H)|0,i=i+Math.imul(S,q)|0,s=s+Math.imul(S,H)|0,n=n+Math.imul(y,J)|0,i=i+Math.imul(y,G)|0,i=i+Math.imul(f,J)|0,s=s+Math.imul(f,G)|0,n=n+Math.imul(m,$)|0,i=i+Math.imul(m,tt)|0,i=i+Math.imul(g,$)|0,s=s+Math.imul(g,tt)|0,n=n+Math.imul(h,rt)|0,i=i+Math.imul(h,nt)|0,i=i+Math.imul(d,rt)|0,s=s+Math.imul(d,nt)|0;var St=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(E,D),i=Math.imul(E,V),i=i+Math.imul(j,D)|0,s=Math.imul(j,V),n=n+Math.imul(O,K)|0,i=i+Math.imul(O,Q)|0,i=i+Math.imul(T,K)|0,s=s+Math.imul(T,Q)|0,n=n+Math.imul(I,q)|0,i=i+Math.imul(I,H)|0,i=i+Math.imul(M,q)|0,s=s+Math.imul(M,H)|0,n=n+Math.imul(k,J)|0,i=i+Math.imul(k,G)|0,i=i+Math.imul(S,J)|0,s=s+Math.imul(S,G)|0,n=n+Math.imul(y,$)|0,i=i+Math.imul(y,tt)|0,i=i+Math.imul(f,$)|0,s=s+Math.imul(f,tt)|0,n=n+Math.imul(m,rt)|0,i=i+Math.imul(m,nt)|0,i=i+Math.imul(g,rt)|0,s=s+Math.imul(g,nt)|0,n=n+Math.imul(h,st)|0,i=i+Math.imul(h,ot)|0,i=i+Math.imul(d,st)|0,s=s+Math.imul(d,ot)|0;var vt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(N,D),i=Math.imul(N,V),i=i+Math.imul(x,D)|0,s=Math.imul(x,V),n=n+Math.imul(E,K)|0,i=i+Math.imul(E,Q)|0,i=i+Math.imul(j,K)|0,s=s+Math.imul(j,Q)|0,n=n+Math.imul(O,q)|0,i=i+Math.imul(O,H)|0,i=i+Math.imul(T,q)|0,s=s+Math.imul(T,H)|0,n=n+Math.imul(I,J)|0,i=i+Math.imul(I,G)|0,i=i+Math.imul(M,J)|0,s=s+Math.imul(M,G)|0,n=n+Math.imul(k,$)|0,i=i+Math.imul(k,tt)|0,i=i+Math.imul(S,$)|0,s=s+Math.imul(S,tt)|0,n=n+Math.imul(y,rt)|0,i=i+Math.imul(y,nt)|0,i=i+Math.imul(f,rt)|0,s=s+Math.imul(f,nt)|0,n=n+Math.imul(m,st)|0,i=i+Math.imul(m,ot)|0,i=i+Math.imul(g,st)|0,s=s+Math.imul(g,ot)|0,n=n+Math.imul(h,ct)|0,i=i+Math.imul(h,ut)|0,i=i+Math.imul(d,ct)|0,s=s+Math.imul(d,ut)|0;var It=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(R,D),i=Math.imul(R,V),i=i+Math.imul(L,D)|0,s=Math.imul(L,V),n=n+Math.imul(N,K)|0,i=i+Math.imul(N,Q)|0,i=i+Math.imul(x,K)|0,s=s+Math.imul(x,Q)|0,n=n+Math.imul(E,q)|0,i=i+Math.imul(E,H)|0,i=i+Math.imul(j,q)|0,s=s+Math.imul(j,H)|0,n=n+Math.imul(O,J)|0,i=i+Math.imul(O,G)|0,i=i+Math.imul(T,J)|0,s=s+Math.imul(T,G)|0,n=n+Math.imul(I,$)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(M,$)|0,s=s+Math.imul(M,tt)|0,n=n+Math.imul(k,rt)|0,i=i+Math.imul(k,nt)|0,i=i+Math.imul(S,rt)|0,s=s+Math.imul(S,nt)|0,n=n+Math.imul(y,st)|0,i=i+Math.imul(y,ot)|0,i=i+Math.imul(f,st)|0,s=s+Math.imul(f,ot)|0,n=n+Math.imul(m,ct)|0,i=i+Math.imul(m,ut)|0,i=i+Math.imul(g,ct)|0,s=s+Math.imul(g,ut)|0,n=n+Math.imul(h,ht)|0,i=i+Math.imul(h,dt)|0,i=i+Math.imul(d,ht)|0,s=s+Math.imul(d,dt)|0;var Mt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(W,D),i=Math.imul(W,V),i=i+Math.imul(U,D)|0,s=Math.imul(U,V),n=n+Math.imul(R,K)|0,i=i+Math.imul(R,Q)|0,i=i+Math.imul(L,K)|0,s=s+Math.imul(L,Q)|0,n=n+Math.imul(N,q)|0,i=i+Math.imul(N,H)|0,i=i+Math.imul(x,q)|0,s=s+Math.imul(x,H)|0,n=n+Math.imul(E,J)|0,i=i+Math.imul(E,G)|0,i=i+Math.imul(j,J)|0,s=s+Math.imul(j,G)|0,n=n+Math.imul(O,$)|0,i=i+Math.imul(O,tt)|0,i=i+Math.imul(T,$)|0,s=s+Math.imul(T,tt)|0,n=n+Math.imul(I,rt)|0,i=i+Math.imul(I,nt)|0,i=i+Math.imul(M,rt)|0,s=s+Math.imul(M,nt)|0,n=n+Math.imul(k,st)|0,i=i+Math.imul(k,ot)|0,i=i+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,n=n+Math.imul(y,ct)|0,i=i+Math.imul(y,ut)|0,i=i+Math.imul(f,ct)|0,s=s+Math.imul(f,ut)|0,n=n+Math.imul(m,ht)|0,i=i+Math.imul(m,dt)|0,i=i+Math.imul(g,ht)|0,s=s+Math.imul(g,dt)|0,n=n+Math.imul(h,mt)|0,i=i+Math.imul(h,gt)|0,i=i+Math.imul(d,mt)|0,s=s+Math.imul(d,gt)|0;var At=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(W,K),i=Math.imul(W,Q),i=i+Math.imul(U,K)|0,s=Math.imul(U,Q),n=n+Math.imul(R,q)|0,i=i+Math.imul(R,H)|0,i=i+Math.imul(L,q)|0,s=s+Math.imul(L,H)|0,n=n+Math.imul(N,J)|0,i=i+Math.imul(N,G)|0,i=i+Math.imul(x,J)|0,s=s+Math.imul(x,G)|0,n=n+Math.imul(E,$)|0,i=i+Math.imul(E,tt)|0,i=i+Math.imul(j,$)|0,s=s+Math.imul(j,tt)|0,n=n+Math.imul(O,rt)|0,i=i+Math.imul(O,nt)|0,i=i+Math.imul(T,rt)|0,s=s+Math.imul(T,nt)|0,n=n+Math.imul(I,st)|0,i=i+Math.imul(I,ot)|0,i=i+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,n=n+Math.imul(k,ct)|0,i=i+Math.imul(k,ut)|0,i=i+Math.imul(S,ct)|0,s=s+Math.imul(S,ut)|0,n=n+Math.imul(y,ht)|0,i=i+Math.imul(y,dt)|0,i=i+Math.imul(f,ht)|0,s=s+Math.imul(f,dt)|0,n=n+Math.imul(m,mt)|0,i=i+Math.imul(m,gt)|0,i=i+Math.imul(g,mt)|0,s=s+Math.imul(g,gt)|0;var Ot=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(W,q),i=Math.imul(W,H),i=i+Math.imul(U,q)|0,s=Math.imul(U,H),n=n+Math.imul(R,J)|0,i=i+Math.imul(R,G)|0,i=i+Math.imul(L,J)|0,s=s+Math.imul(L,G)|0,n=n+Math.imul(N,$)|0,i=i+Math.imul(N,tt)|0,i=i+Math.imul(x,$)|0,s=s+Math.imul(x,tt)|0,n=n+Math.imul(E,rt)|0,i=i+Math.imul(E,nt)|0,i=i+Math.imul(j,rt)|0,s=s+Math.imul(j,nt)|0,n=n+Math.imul(O,st)|0,i=i+Math.imul(O,ot)|0,i=i+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,n=n+Math.imul(I,ct)|0,i=i+Math.imul(I,ut)|0,i=i+Math.imul(M,ct)|0,s=s+Math.imul(M,ut)|0,n=n+Math.imul(k,ht)|0,i=i+Math.imul(k,dt)|0,i=i+Math.imul(S,ht)|0,s=s+Math.imul(S,dt)|0,n=n+Math.imul(y,mt)|0,i=i+Math.imul(y,gt)|0,i=i+Math.imul(f,mt)|0,s=s+Math.imul(f,gt)|0;var Tt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(W,J),i=Math.imul(W,G),i=i+Math.imul(U,J)|0,s=Math.imul(U,G),n=n+Math.imul(R,$)|0,i=i+Math.imul(R,tt)|0,i=i+Math.imul(L,$)|0,s=s+Math.imul(L,tt)|0,n=n+Math.imul(N,rt)|0,i=i+Math.imul(N,nt)|0,i=i+Math.imul(x,rt)|0,s=s+Math.imul(x,nt)|0,n=n+Math.imul(E,st)|0,i=i+Math.imul(E,ot)|0,i=i+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,n=n+Math.imul(O,ct)|0,i=i+Math.imul(O,ut)|0,i=i+Math.imul(T,ct)|0,s=s+Math.imul(T,ut)|0,n=n+Math.imul(I,ht)|0,i=i+Math.imul(I,dt)|0,i=i+Math.imul(M,ht)|0,s=s+Math.imul(M,dt)|0,n=n+Math.imul(k,mt)|0,i=i+Math.imul(k,gt)|0,i=i+Math.imul(S,mt)|0,s=s+Math.imul(S,gt)|0;var _t=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(W,$),i=Math.imul(W,tt),i=i+Math.imul(U,$)|0,s=Math.imul(U,tt),n=n+Math.imul(R,rt)|0,i=i+Math.imul(R,nt)|0,i=i+Math.imul(L,rt)|0,s=s+Math.imul(L,nt)|0,n=n+Math.imul(N,st)|0,i=i+Math.imul(N,ot)|0,i=i+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,n=n+Math.imul(E,ct)|0,i=i+Math.imul(E,ut)|0,i=i+Math.imul(j,ct)|0,s=s+Math.imul(j,ut)|0,n=n+Math.imul(O,ht)|0,i=i+Math.imul(O,dt)|0,i=i+Math.imul(T,ht)|0,s=s+Math.imul(T,dt)|0,n=n+Math.imul(I,mt)|0,i=i+Math.imul(I,gt)|0,i=i+Math.imul(M,mt)|0,s=s+Math.imul(M,gt)|0;var Et=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(W,rt),i=Math.imul(W,nt),i=i+Math.imul(U,rt)|0,s=Math.imul(U,nt),n=n+Math.imul(R,st)|0,i=i+Math.imul(R,ot)|0,i=i+Math.imul(L,st)|0,s=s+Math.imul(L,ot)|0,n=n+Math.imul(N,ct)|0,i=i+Math.imul(N,ut)|0,i=i+Math.imul(x,ct)|0,s=s+Math.imul(x,ut)|0,n=n+Math.imul(E,ht)|0,i=i+Math.imul(E,dt)|0,i=i+Math.imul(j,ht)|0,s=s+Math.imul(j,dt)|0,n=n+Math.imul(O,mt)|0,i=i+Math.imul(O,gt)|0,i=i+Math.imul(T,mt)|0,s=s+Math.imul(T,gt)|0;var jt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863,n=Math.imul(W,st),i=Math.imul(W,ot),i=i+Math.imul(U,st)|0,s=Math.imul(U,ot),n=n+Math.imul(R,ct)|0,i=i+Math.imul(R,ut)|0,i=i+Math.imul(L,ct)|0,s=s+Math.imul(L,ut)|0,n=n+Math.imul(N,ht)|0,i=i+Math.imul(N,dt)|0,i=i+Math.imul(x,ht)|0,s=s+Math.imul(x,dt)|0,n=n+Math.imul(E,mt)|0,i=i+Math.imul(E,gt)|0,i=i+Math.imul(j,mt)|0,s=s+Math.imul(j,gt)|0;var Bt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,n=Math.imul(W,ct),i=Math.imul(W,ut),i=i+Math.imul(U,ct)|0,s=Math.imul(U,ut),n=n+Math.imul(R,ht)|0,i=i+Math.imul(R,dt)|0,i=i+Math.imul(L,ht)|0,s=s+Math.imul(L,dt)|0,n=n+Math.imul(N,mt)|0,i=i+Math.imul(N,gt)|0,i=i+Math.imul(x,mt)|0,s=s+Math.imul(x,gt)|0;var Nt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(W,ht),i=Math.imul(W,dt),i=i+Math.imul(U,ht)|0,s=Math.imul(U,dt),n=n+Math.imul(R,mt)|0,i=i+Math.imul(R,gt)|0,i=i+Math.imul(L,mt)|0,s=s+Math.imul(L,gt)|0;var xt=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(W,mt),i=Math.imul(W,gt),i=i+Math.imul(U,mt)|0,s=Math.imul(U,gt);var Pt=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,c[0]=bt,c[1]=yt,c[2]=ft,c[3]=wt,c[4]=kt,c[5]=St,c[6]=vt,c[7]=It,c[8]=Mt,c[9]=At,c[10]=Ot,c[11]=Tt,c[12]=_t,c[13]=Et,c[14]=jt,c[15]=Bt,c[16]=Nt,c[17]=xt,c[18]=Pt,0!==u&&(c[19]=u,r.length++),r};function w(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=c;u++){var l=s-u,h=0|t.words[l],d=0|e.words[u],p=h*d,m=67108863&p;o=o+(p/67108864|0)|0,m=m+a|0,a=67108863&m,o=o+(m>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function k(t,e,r){return w(t,e,r)}function S(t,e){this.x=t,this.y=e}Math.imul||(f=y),s.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?f(this,t,e):n<63?y(this,t,e):n<1024?w(this,t,e):k(this,t,e),r},S.prototype.makeRBT=function(t){for(var e=new Array(t),r=s.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},S.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},S.prototype.permute=function(t,e,r,n,i,s){for(var o=0;o<s;o++)n[o]=e[t[o]],i[o]=r[t[o]]},S.prototype.transform=function(t,e,r,n,i,s){this.permute(s,t,e,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,p=0;p<o;p++){var m=r[l+p],g=n[l+p],b=r[l+p+o],y=n[l+p+o],f=h*b-d*y;y=h*y+d*b,b=f,r[l+p]=m+b,n[l+p]=g+y,r[l+p+o]=m-b,n[l+p+o]=g-y,p!==a&&(f=c*h-u*d,d=c*d+u*h,h=f)}},S.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},S.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},S.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},S.prototype.convert13b=function(t,e,r,i){for(var s=0,o=0;o<e;o++)s+=0|t[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},S.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},S.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var p=0;p<n;p++){var m=a[p]*l[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*l[p],a[p]=m}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),k(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"===typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=b(t);if(0===e.length)return new s(1);for(var r=this,n=0;n<e.length;n++,r=r.sqr())if(0!==e[n])break;if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(t){n("number"===typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,r){var i;n("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(t){n("number"===typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return n("number"===typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(n("number"===typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,r){var i,s,o=t.length+r;this._expand(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var r=this.length-t.length,n=this.clone(),i=t,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==e){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var p=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);p=Math.min(p/o|0,67108863),n._ishlnsubmul(i,p,d);while(0!==n.negative)p--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=p)}return c&&c._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(e.isEven()&&r.isEven())e.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=e.clone();while(!e.isZero()){for(var d=0,p=1;0===(e.words[0]&p)&&d<26;++d,p<<=1);if(d>0){e.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var m=0,g=1;0===(r.words[0]&g)&&m<26;++m,g<<=1);if(m>0){r.iushrn(m);while(m-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}e.cmp(r)>=0?(e.isub(r),i.isub(a),o.isub(c)):(r.isub(e),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(e.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0){e.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return i=0===e.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(t),i},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);do{while(e.isEven())e.iushrn(1);while(r.isEven())r.iushrn(1);var i=e.cmp(r);if(i<0){var s=e;e=r,r=s}else if(0===i||0===r.cmpn(1))break;e.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){n("number"===typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new _(t)},s.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function I(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function M(){I.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){I.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){I.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){I.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"===typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}I.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},I.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),e=r.bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},I.prototype.split=function(t,e){t.iushrn(this.n,0,e)},I.prototype.imulK=function(t){return t.imul(this.k)},i(M,I),M.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&r,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},M.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(A,I),i(O,I),i(T,I),T.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new M;else if("p224"===t)e=new A;else if("p192"===t)e=new O;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return v[t]=e,e},_.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2===1),3===e){var r=this.m.add(new s(1)).iushrn(2);return this.pow(t,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=o;while(0!==p.cmp(a)){for(var g=p,b=0;0!==g.cmp(a);b++)g=g.redSqr();n(b<m);var y=this.pow(h,new s(1).iushln(m-b-1));d=d.redMul(y),h=y.redSqr(),p=p.redMul(h),m=b}return d},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var o=n[0],a=0,c=0,u=e.bitLength()%26;for(0===u&&(u=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new E(t)},i(E,_),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}}(t,this)}).call(this,r("62e4")(t))},"8ab6":function(t,e,r){var n=r("42a7"),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.exports=n(i)},"8bad":function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("64b9");const a="Torus";class c extends n["a"]{constructor({params:t={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name=a,this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=t}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isLoggedIn)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Loadable)throw new s["i"];let e,n,a,c;this._connecting=!0;try{e=(await r.e("chunk-62520b75").then(r.bind(null,"b5dd"))).default}catch(t){throw new s["g"](null===t||void 0===t?void 0:t.message,t)}try{n=window.torus||new e}catch(t){throw new s["b"](null===t||void 0===t?void 0:t.message,t)}if(!n.isInitialized)try{await n.init(this._params)}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}try{a=await n.login()}catch(t){throw new s["a"](null===t||void 0===t?void 0:t.message,t)}try{c=new o["e"](a[0])}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}this._wallet=n,this._publicKey=c,this.emit("connect",c)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){this._wallet=null,this._publicKey=null;try{t.isLoggedIn&&await t.cleanUp()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:o}=await i.signAndSendTransaction(t,s);return o}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signMessage(t)}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},"8df2":function(t,e,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */r("d9e2"),r("14d9"),r("13d5"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("669d"),r("109c"),r("b2c1"),Object.defineProperty(e,"__esModule",{value:!0}),e.s16=e.s8=e.nu64be=e.u48be=e.u40be=e.u32be=e.u24be=e.u16be=e.nu64=e.u48=e.u40=e.u32=e.u24=e.u16=e.u8=e.offset=e.greedy=e.Constant=e.UTF8=e.CString=e.Blob=e.Boolean=e.BitField=e.BitStructure=e.VariantLayout=e.Union=e.UnionLayoutDiscriminator=e.UnionDiscriminator=e.Structure=e.Sequence=e.DoubleBE=e.Double=e.FloatBE=e.Float=e.NearInt64BE=e.NearInt64=e.NearUInt64BE=e.NearUInt64=e.IntBE=e.Int=e.UIntBE=e.UInt=e.OffsetLayout=e.GreedyCount=e.ExternalLayout=e.bindConstructorLayout=e.nameWithProperty=e.Layout=e.uint8ArrayToBuffer=e.checkUint8Array=void 0,e.constant=e.utf8=e.cstr=e.blob=e.unionLayoutDiscriminator=e.union=e.seq=e.bits=e.struct=e.f64be=e.f64=e.f32be=e.f32=e.ns64be=e.s48be=e.s40be=e.s32be=e.s24be=e.s16be=e.ns64=e.s48=e.s40=e.s32=e.s24=void 0;const n=r("1c35");function i(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(t){return i(t),n.Buffer.from(t.buffer,t.byteOffset,t.length)}e.checkUint8Array=i,e.uint8ArrayToBuffer=s;class o{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function a(t,e){return e.property?t+"["+e.property+"]":t}function c(t,e){if("function"!==typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof o))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(t,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}e.Layout=o,e.nameWithProperty=a,e.bindConstructorLayout=c;class u extends o{isCount(){throw new Error("ExternalLayout is abstract")}}e.ExternalLayout=u;class l extends u{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){i(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}e.GreedyCount=l;class h extends u{constructor(t,e=0,r){if(!(t instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof d||this.layout instanceof p}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}e.OffsetLayout=h;class d extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntLE(t,r,this.span),this.span}}e.UInt=d;class p extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readUIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeUIntBE(t,r,this.span),this.span}}e.UIntBE=p;class m extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readIntLE(e,this.span)}encode(t,e,r=0){return s(e).writeIntLE(t,r,this.span),this.span}}e.Int=m;class g extends o{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return s(t).readIntBE(e,this.span)}encode(t,e,r=0){return s(e).writeIntBE(t,r,this.span),this.span}}e.IntBE=g;const b=Math.pow(2,32);function y(t){const e=Math.floor(t/b),r=t-e*b;return{hi32:e,lo32:r}}function f(t,e){return t*b+e}class w extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return f(i,n)}encode(t,e,r=0){const n=y(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}e.NearUInt64=w;class k extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return f(n,i)}encode(t,e,r=0){const n=y(t),i=s(e);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearUInt64BE=k;class S extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readUInt32LE(e),i=r.readInt32LE(e+4);return f(i,n)}encode(t,e,r=0){const n=y(t),i=s(e);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}e.NearInt64=S;class v extends o{constructor(t){super(8,t)}decode(t,e=0){const r=s(t),n=r.readInt32BE(e),i=r.readUInt32BE(e+4);return f(n,i)}encode(t,e,r=0){const n=y(t),i=s(e);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}e.NearInt64BE=v;class I extends o{constructor(t){super(4,t)}decode(t,e=0){return s(t).readFloatLE(e)}encode(t,e,r=0){return s(e).writeFloatLE(t,r),4}}e.Float=I;class M extends o{constructor(t){super(4,t)}decode(t,e=0){return s(t).readFloatBE(e)}encode(t,e,r=0){return s(e).writeFloatBE(t,r),4}}e.FloatBE=M;class A extends o{constructor(t){super(8,t)}decode(t,e=0){return s(t).readDoubleLE(e)}encode(t,e,r=0){return s(e).writeDoubleLE(t,r),8}}e.Double=A;class O extends o{constructor(t){super(8,t)}decode(t,e=0){return s(t).readDoubleBE(e)}encode(t,e,r=0){return s(e).writeDoubleBE(t,r),8}}e.DoubleBE=O;class T extends o{constructor(t,e,r){if(!(t instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(e instanceof u)&&0<t.span&&(n=e*t.span),super(n,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof u&&(n=n.decode(t,e)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;while(i<n)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let n=0,i=this.count;i instanceof u&&(i=i.decode(t,e));while(n<i)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),n+=1;return r}encode(t,e,r=0){const n=this.elementLayout,i=t.reduce((t,i)=>t+n.encode(i,e,r+t),0);return this.count instanceof u&&this.count.encode(t.length,e,r),i}}e.Sequence=T;class _ extends o{constructor(t,e,r){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof o,!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof e&&void 0===r&&(r=e,e=void 0);for(const s of t)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=t.reduce((t,e)=>t+e.getSpan(),0)}catch(i){}super(n,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{const i=n.getSpan(t,e);return e+=i,r+i},0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(t,e=0){i(t);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(t,e)),e+=n.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const n=r;let i=0,s=0;for(const o of this.fields){let n=o.span;if(s=0<n?n:0,void 0!==o.property){const i=t[o.property];void 0!==i&&(s=o.encode(i,e,r),0>n&&(n=o.getSpan(e,r)))}i=r,r+=n}return i+s-n}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if("string"!==typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!==typeof t)throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}e.Structure=_;class E{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}e.UnionDiscriminator=E;class j extends E{constructor(t,e){if(!(t instanceof u&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}e.UnionLayoutDiscriminator=j;class B extends o{constructor(t,e,r){let n;if(t instanceof d||t instanceof p)n=new j(new h(t));else if(t instanceof u&&t.isCount())n=new j(t);else{if(!(t instanceof E))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=t}if(void 0===e&&(e=null),!(null===e||e instanceof o))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof d||t instanceof p)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=t instanceof d||t instanceof p,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return s(t)},this.configGetSourceVariant=function(t){s=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const n=this.discriminator,i=n.decode(t,e),s=this.registry[i];if(void 0===s){const s=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[s.property]=s.decode(t,e+o)}else r=s.decode(t,e);return r}encode(t,e,r=0){const n=this.getSourceVariant(t);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=n.layout.span),n.encode(t[n.property],e,r),s+i.encode(t[i.property],e,r+s)}return n.encode(t,e,r)}addVariant(t,e,r){const n=new N(this,t,e,r);return this.registry[t]=n,n}getVariant(t,e=0){let r;return r=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[r]}}e.Union=B;class N extends o{constructor(t,e,r,n){if(!(t instanceof B))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof o))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof n)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,n),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(t,e+r)),r+n}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=n;if(this.layout&&(this.layout.encode(t[this.property],e,r+n),i+=this.layout.getSpan(e,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function x(t){return 0>t&&(t+=4294967296),t}e.VariantLayout=N;class P extends o{constructor(t,e,r){if(!(t instanceof d||t instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof e&&void 0===r&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let n=0;this._packedSetValue=function(t){return n=x(t),this},this._packedGetValue=function(){return n}}decode(t,e=0){const r=this.makeDestinationObject(),n=this.word.decode(t,e);this._packedSetValue(n);for(const i of this.fields)void 0!==i.property&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const n=this.word.decode(e,r);this._packedSetValue(n);for(const i of this.fields)if(void 0!==i.property){const e=t[i.property];void 0!==e&&i.encode(e)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new R(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new L(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!==typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}e.BitStructure=P;class R{constructor(t,e,r){if(!(t instanceof P))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const n=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-e),this.wordMask=x(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue(),n=x(r&this.wordMask),i=n>>>this.start;return i}encode(t){if("number"!==typeof t||!Number.isInteger(t)||t!==x(t&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=x(t<<this.start);this.container._packedSetValue(x(e&~this.wordMask)|r)}}e.BitField=R;class L extends R{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"===typeof t&&(t=+t),super.encode(t)}}e.Boolean=L;class z extends o{constructor(t,e){if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof u||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),s(t).slice(e,e+r)}encode(t,e,r){let n=this.length;if(this.length instanceof u&&(n=t.length),!(t instanceof Uint8Array&&n===t.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>e.length)throw new RangeError("encoding overruns Uint8Array");const i=s(t);return s(e).write(i.toString("hex"),r,n,"hex"),this.length instanceof u&&this.length.encode(n,e,r),n}}e.Blob=z;class W extends o{constructor(t){super(-1,t)}getSpan(t,e=0){i(t);let r=e;while(r<t.length&&0!==t[r])r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return s(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){"string"!==typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(r+o>e.length)throw new RangeError("encoding overruns Buffer");const a=s(e);return i.copy(a,r),a[r+o]=0,o+1}}e.CString=W;class U extends o{constructor(t,e){if("string"===typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return i(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return s(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){"string"!==typeof t&&(t=String(t));const i=n.Buffer.from(t,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(s(e),r),o}}e.UTF8=U;class C extends o{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}e.Constant=C,e.greedy=(t,e)=>new l(t,e),e.offset=(t,e,r)=>new h(t,e,r),e.u8=t=>new d(1,t),e.u16=t=>new d(2,t),e.u24=t=>new d(3,t),e.u32=t=>new d(4,t),e.u40=t=>new d(5,t),e.u48=t=>new d(6,t),e.nu64=t=>new w(t),e.u16be=t=>new p(2,t),e.u24be=t=>new p(3,t),e.u32be=t=>new p(4,t),e.u40be=t=>new p(5,t),e.u48be=t=>new p(6,t),e.nu64be=t=>new k(t),e.s8=t=>new m(1,t),e.s16=t=>new m(2,t),e.s24=t=>new m(3,t),e.s32=t=>new m(4,t),e.s40=t=>new m(5,t),e.s48=t=>new m(6,t),e.ns64=t=>new S(t),e.s16be=t=>new g(2,t),e.s24be=t=>new g(3,t),e.s32be=t=>new g(4,t),e.s40be=t=>new g(5,t),e.s48be=t=>new g(6,t),e.ns64be=t=>new v(t),e.f32=t=>new I(t),e.f32be=t=>new M(t),e.f64=t=>new A(t),e.f64be=t=>new O(t),e.struct=(t,e,r)=>new _(t,e,r),e.bits=(t,e,r)=>new P(t,e,r),e.seq=(t,e,r)=>new T(t,e,r),e.union=(t,e,r)=>new B(t,e,r),e.unionLayoutDiscriminator=(t,e)=>new j(t,e),e.blob=(t,e)=>new z(t,e),e.cstr=t=>new W(t),e.utf8=(t,e)=>new U(t,e),e.constant=(t,e)=>new C(t,e)},a5c0:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t["Mainnet"]="mainnet-beta",t["Testnet"]="testnet",t["Devnet"]="devnet"}(n||(n={}))},a81a:function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return u}));var n=r("8df2"),i=r("9ea2"),s=r("bbae");const o=e=>r=>{const o=Object(n["blob"])(e,r),{encode:a,decode:c}=Object(s["a"])(o),u=o;return u.decode=(e,r)=>{const n=c(e,r);return Object(i["toBigIntLE"])(t.from(n))},u.encode=(t,r,n)=>{const s=Object(i["toBufferLE"])(t,e);return a(s,r,n)},u},a=e=>r=>{const o=Object(n["blob"])(e,r),{encode:a,decode:c}=Object(s["a"])(o),u=o;return u.decode=(e,r)=>{const n=c(e,r);return Object(i["toBigIntBE"])(t.from(n))},u.encode=(t,r,n)=>{const s=Object(i["toBufferBE"])(t,e);return a(s,r,n)},u},c=o(8),u=(a(8),o(16));a(16),o(24),a(24),o(32),a(32)}).call(this,r("1c35").Buffer)},abed:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("14d9");var n=r("64b9");function i(t,e,r){if(r.length){t.push({pubkey:e,isSigner:!1,isWritable:!1});for(const e of r)t.push({pubkey:e instanceof n["e"]?e:e.publicKey,isSigner:!0,isWritable:!1})}else t.push({pubkey:e,isSigner:!0,isWritable:!1});return t}},abed2:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("64b9");const a="Trust";class c extends n["a"]{constructor(t={}){super(),this.name=a,this.url="https://trustwallet.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgdmlld0JveD0iMCAwIDQwMiA0MDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8cmVjdCB3aWR0aD0iNDAyIiBoZWlnaHQ9IjQwMiIgZmlsbD0idXJsKCNwYXR0ZXJuMCkiLz4KPGRlZnM+CjxwYXR0ZXJuIGlkPSJwYXR0ZXJuMCIgcGF0dGVybkNvbnRlbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHdpZHRoPSIxIiBoZWlnaHQ9IjEiPgo8dXNlIHhsaW5rOmhyZWY9IiNpbWFnZTBfMTY5NF8xODk2NyIgdHJhbnNmb3JtPSJzY2FsZSgwLjAwMjQ4NzU2KSIvPgo8L3BhdHRlcm4+CjxpbWFnZSBpZD0iaW1hZ2UwXzE2OTRfMTg5NjciIHdpZHRoPSI0MDIiIGhlaWdodD0iNDAyIiB4bGluazpocmVmPSJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LC85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0JEQUFjRkJRWUZCQWNHQmdZSUJ3Y0lDeElMQ3dvS0N4WVBFQTBTR2hZYkdoa1dHUmdjSUNnaUhCNG1IaGdaSXpBa0ppb3JMUzR0R3lJeU5URXNOU2dzTFN6LzJ3QkRBUWNJQ0FzSkN4VUxDeFVzSFJrZExDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3ovd2dBUkNBR1NBWklEQVNJQUFoRUJBeEVCLzhRQUd3QUJBQUlEQVFFQUFBQUFBQUFBQUFBQUFBRUdCQVVIQXdML3hBQVpBUUVBQXdFQkFBQUFBQUFBQUFBQUFBQUFBUU1FQlFMLzJnQU1Bd0VBQWhBREVBQUFBZWtBQUFFRXhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaEloSWhJaElJRWdBQUFBQVFrQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBQUFRa0FBQUFBQUFBQUFBQUFBQUFBQUFBQWlVRWdBRUVnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWlZa0FJa0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUk1FZ2lZa0FBQUFBQUFBQUFQT29XVjduWFZWdXg5TXllWTNYTG8zSXo2QUFBQUFBQUFBRVNENUV6RWdBQUFBQUFCR0xNWmJSNmUydTVWK3BlT25QazR4cXpCTUFicTE4NlVYOVZjNzNlVFRhV3J6NmJmVWVmUUFBQUFBQUdPSmozbUppUUFBQUFOTlVQckE2Zk95Zm53WFZ6Qk1BZ0EyOXFvdXJtNjNyRnI1cGk5U3JlbWlvc2pIMVpnbUFQdjF4MFRrN0RUUFBycUhyWGJGeStpSGoyQUFBQmppWTk1aVlrQUFBQURtMkhuWVBZNVFzTVRYbCt5cUx1YzdMb0UxV1ZiZTVpaTRLN0FBSTArNWV2TksxWFNtaWpsVHArSGJYenhlNlpkVmppMnE0V1d1V1BsZElLclFBQUFNY1RIdk1URWdBQUFBYzYxK3kxdlg1YTMxQzIxMldnY3pvQUFBQUFBQUFPYTlLNW5yeTR3MzRycFlkRHZ1VjB3cXNBQUFBeHhNZTh4TVNBQUFBQnovVmJuVGRibUxWVmJONTlXOGN2b2dBQUFBQUFBT1lkUDVac3lmSTNZNzF1OVB1T1Qwd3JzQUFBQXh4TWU4eE1TQUFBQUJSOUZZcTcxZWFzVmQzaGVSeXVrQUFBQUFBQUI4OHM2ZHpIZGpEWms2RnM4SE80L1ZEejZBQUFBeHhNZTh4TVNBQUFBQlVxdmNLZjArYzIycHo3UEhSaHlPb0FBQUFBQUFCaGMzNkJ6L29ZUTFaK201RVR4dXFFU0FBQUJqaVk5NWlZa0FBQUFEUlVmb1hQZWpnZTNpMDBkVmVYcnhlcUNRQUFBQUFBTkRTTFpVK2x6M3Y0Ykc2cm9nNC9WQUFBQUF4eE1lOHhNU0FBQUFCNDh3NnJ6TGJreHh0eDlDMmRic25KNllWMkFBQUFBQUFValE1bUgxK1czMmh0dmoxYUJ5K2tBQUFBQmppWTk1aVlrQUFBQUJSYjFYYjZhWU9uenQzZXVXZE53YmZZWk5RQUFBQUFERnlxdlpYVWgxdVk2QlErbjQ5WDBNTzBBQUFBREhFeDd6RXhJQUFBQUR3OXlPV2ZOaHIzWDVpeTFvZFZWeXg4cm9oNTlnQUFBRHhRNXZtNnZwWUEwVWIrN1lHZnl1a0ZWb0FBQUFHT0pqM21KaVFBQUFBQU1mbkhUOVhvbzU4Ky9qcFlHOTBUelBUTW5sdG13N0xZOC9UTG9CSUJyYWpkVFphZGpOK01MYWxrd2I3azFmUXdiUUFBQUFBTWNUSHZNVEVnQUFBQUFBYTZqZEs4NzZlWExQV3VoaCtSNzhlOXRwYXF6cXJudTZ4Yk4vVWRMNTZzNGFNNHpZbkNzTzgzR0xYOC9SajFnQUFBQUFBWTRtUGVZbUpBQUFBQUFBQVl1VW1LUm9lcTYzWGw1NDJXdDI1UW55UHBQemtiKzFaZEdoc01zT3NQUHNBQUFBQUFBUWZEMElpWWxJQUFBQUFBQUFBRVZ1eXZmamxuejB2QjJaYWxkczM2elhoVGNBQUFBQUFBQUFpWUpBaVlKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFSSUFCRW9KQUFBQUFBQUFBQUFBQUFBQUFBQUFBaVlKQUFBQkVvSkFBQUFBQUFBQUFBQUFBQUFBQUFRRWdBQUFBQkNRUUpSSUFBQUFBQUFBQUFBQUFJSlFKaVFBQUFBQUFBQUErUkhpSkFBQUFBQUFBQUFBQWVub1FCSUFBQUFILzhRQUx4QUFBQVVFQWdFQ0JBVUZBQUFBQUFBQUFBRUNBd1FGRVRBeEVFQVNJRFFURkNGQklpUXpOV0FqTWxCd2dQL2FBQWdCQVFBQkJRTEhZV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVdJV0lXSVc1di9OTi81TGYrbC92L0FDVDcvd0FLazFOcGhTYTE5V0pEY2h2ckhvRjFsdUpiUk1xaW5PV1hsc09SS2kzSTY5d1d1bXBTVUprVmR0QWVrT3lGZW1OVTNXQXhPWWtkVTlsclBld1ZLWVFIS3RIU0hhdzZvT1BPUEhoWm55R1EzV2lDS2xGV0V1dHI2SjdMV09mUCtWSmN5UXMvbVh3YnpwZ3pNOEVXbHVQQitsTXVOdnhuWTZ2V1Mxa1BtSGg4eStJOVRmYVUyNGwxdkdleTFqbktOYzdDeFRYM2hHZ014dVZJU3RNaWpwTU94M1dEdzBaUm5HeG5zdFk1ZnZmU2xLbEczVHBMZ2FveEJtSXd4NnpJbEU5UzQ3Z2NvN3lRdUsrMTY2TCtqalBaYXh6ZmZjVTZFMUpiS2x4U0NZY2RBSWlJc3FtVzNBcW54VkE2VEZNU0VFMUk0bzN0OFo3TFdPZjcvaWkvcGRPWDd6aWplMHhuc3RZNmorNGNVWCszcHlQZGNVZjJXTTlsckhVLzNIaWlkUjM2dmNVbjJPTTlsckhWZmY4QUZGL1Y2YXZxcmlsL3QrTTlsckhWeS9POFVZL3pQU1VkazgwNHJVL0dleTFqckpmbWVLUWRwdlNmTzBmbUVWb09NOWxySFdpL0Z4VER0VU9sTk8wTG1PVm8yTTlsckhXaS9wY1FUOFozU3FSMnAvSkZaT005bHJIVnl2QzRhVjR2ZEtzS3RENFlUNVNNaDdMV09vcDhvSExTdk5ubzFwWDA0cDZmS2ZrUFpheHZKODJPYWN2emdkR3JyOHBuRklUZVprUFpheVNFZkRrOFVaeTdIUmxyK0pNNG9xUHdaRDJXc2xXYjhKdkZLZCtITTZFbDM0TWJtbXQvRGdaRDJXc2xZYThtT0VxTkMyWENlWnoxaC84QUR3MmczSEVwSktjaDdMV1I1c25tRkpOS3VLVEs4RlpublVzTlBPcWZlNHBEUG5KeW5zdFphdEg4SHVZRlNKd3NqcnFHVVRacXBhK1lVZjVhTmxQWmF5dnNwZlplYVV3N3pGcWJqSVprTnlFNFpWVGFZRDhoeVF2bWxSUE5lWTlsck5OaEpsTnJRcHRmS0ZxYlZHcTRRNGgxUHBrem1Zd2sxQjZSNllNRlVwYVVraE9ZOWxyUExoTnlreUl6a1pmb2FmY1lWRnF5SE9YcERjZEVtcU9PK3FIVEZPaEtTUW5PZXkxMEZvUzRpVlNESUtTYUZlaUxPZGpCK3NGNExjVTZ2MFI0ajBrNHRPYWo5STlscnBQeG1wQlNhVTYxaFpZY2ZWR3BLRUFpSWk2VnV0SmdzeVJKZ3V4dlNTVFVjV2tHWVEybHRQVCt3Ky9WTXJsTHBSS0NrcVFvUllUc280ME5xS25ybjJIb3pNZ0pwY1ZKa1JKTHJmZi9BSnd2M2I5Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN4Y3hjeGN3bkwvQVAvRUFDY1JBQUlCQWdVRkFBSURBQUFBQUFBQUFBRUNBd0FSQkJBd01USVNJQ0ZBUVJSd0lsRlMvOW9BQ0FFREFRRS9BZjBhN2hONk03VkhNRzhIMWIyb3lxS2FjbmF0ODFtWmFXZFRRWUhiMEpKQ1RWejJKQ3pVSWxBdFR3RWNhMnp2UVlpa1BVTDZyYjBxbGpZVitPMUREajdTeHF1M1lWQjNvNGRmbEhEbis2ZU1wdmxGd0dxL0kxRHowc1JzTW8rQTFYNUdvZVkwc1I4eWo0alZsNW1vK1kwc1I4eVhpTldiblNjaHBZamxrTlhFY3RPZm5TK1RyWWdiSEtNM1VhTG03RTFFTHVOYVlYWExEdDR0b08zU3Q4c09QTjlkbDZUYWxicE42Vmd3dU8rV1RxOERLSmVsZGVXUHE4akpXSzdVazRQTHNlVlZwNUMrVU1kLzVIMFpJZzlNaFhmSkpDbTFDZFNQTlBNVzJ5QXZ0U1FmVzlNaTlQQi9taUNOODBnSjNwVkM3ZXN5aHQ2T0hQeWtpQ2ZvL3dEL3hBQWtFUUFDQVFNRUFnTUJBUUFBQUFBQUFBQUJBZ01BQkJFUU1ERXlFaUVnUUVFaWNQL2FBQWdCQWdFQlB3SC9BQTFJeS9GQzNURlNRRmZZK3FBVFN3dWFTMkE3VUJqVjRGYW10M0hGRlNPZm9SUmhWckErRHpxdE5NNU9hUzRCN1VEblhBb29wNUZPdmkyTjFlQlRNRUdUUnVWbzNSL0JUU00zSitDc1Y0b1hMRG1oZEQ5RkpLSDQwbTduZFRxS242YlZyeWRKZTUzWStncWZvZHExL2RKTzUzWXVncVhvZHExL2RIN0hkZzZDbjZuYXR1dWgzYlkveHQyNC9pbU9CbmV0VHlOSlJoenN4akNnVk1jSWQ2QnNQcGNyNzh0aU5mSnNhWFRlZ043aWtieUdhZGZNWU5NaFE0UHpoaThCazZTdjV0bmZobDhEZzhhTW9iMGFlM0k2L0JJV2VraVZOSjVjZnlQb3h6RlBWSTRmalI0bGZtbXQyQndLamdDODZFZ2MxSmNmaWZUQnh4U1hQNDFBZyt4ckpjQWVscG5MYy9XVnluc1VMbGNlNmttTC93Q0gvd0QveEFBM0VBQUJBUVFHQndZR0FnTUFBQUFBQUFBQkFnQURFUklRSUNFaVFGRXhRVkpoY1hLQkV5TXdVR0toQkRJemtaS3hRb0tBa1BELzJnQUlBUUVBQmo4Qy93QkMwcVIyaXR6WG5ObTR0TTdNZkw1bHFDUXhRNXVvejFtbWQyWUZwVlhIbVdmbGtWRUFiMmc1RTV6MU5GNHFOYVZmZUkzNld1cmdySStUM255UHUxMlpmQU4zYVFqM2FMeFpWeDhLeGNSa3ExdTlkZFV0OVNYaTExYVZjRGpwVTJ2RDdORXZsOURCdnJQUHlhMTR2N3RhZkFtZTkyajNMQU8rN1VHZzhURGZxUGdXS0k2dDlWZjVOOVo1K1RYMWRvbmV3V2d4QnhMMG5haDRVU096VG1wb3dtWHRHbVZRQkJ6YUxoVXZwTFFlSUtmQ1duSldKZmN4clFTQ2VEZlRsNXJHNzE1MFMxeDJBYzY4Q0lockIyWjlMWEZKWDdOZmRLSFN1ODVzUzk1cVZLZVJzT3B2a2oxYXh5ajdOWUllTmZkcFZ4RGZSSFJ0Q2gxWjRoT2hKaFN2bXhMM2pTOTQ0Ujl6bWxmUGlYdEwzcGhIdk1hVHo0bDUwL1ZMN3BoRjh4cC9zY1NyZ0tYdkRDRTBvNjRrY3RLeDZjR1RVZGY5cnhLRDZhZUtjRzhQcE5SMXk0bHllTktOOGYxZzMzTFVkREpJeExzNzZYWE5nM25UOTFBTXNUSEpWS0ZaS0J3WUdhcVhhYzFERlBmdlVRck1Sd1RwUEUwdWh2amlscHpTUlVkN3JNRkxzcHBKMlU0dDRqSlZLMFpHT0NlcTMwdlY5TVhOdGlOTXVwWWhnVnZNaFVSNnJjV2w1c0drS0drV3NsNG5Rb1lCTGtjVFNsQTBxTUdDUm9GbUxXN1A4Z3hTZElwN0Jac1Y4dmpsNHMyQmxQRmFUU1hoMEkvZU43WWZLdlR4cUIwK01GNmpuNHBXdFVBMlRzYUJVU2orV2s0MVR0V2dzWGE5SXFCTHkrajNEVE8xUjhLVkhlTDltbWVLalU3ZFl1ajVjZms4R2dzVUxFQ0treUZGSjNNRS9FRCt3YVpDZ29icTBDWmxiSWFFWkVaQ3JFMk9ocExCS1JBRHlDMnhlcFRRZUo2MVpuYWlscFgxeFdlcW1aNHFEU3V1N1Q3MWd0OWRSbHJMQktSQUR5S1ZhUW9NVmZEMmpaTFFVQ0R2cXdqTWpaTGR5bThkclUweTFGUnEzRTJablEweHZyelBrMEhpWTcybWRkNG4zOEdWMmtxYVo4WnpscWFBRUI1VEVpQzlvTkVpS05vVllKRVMwM3hGbnBEU29TRWpkNVpBdFA4QUQzVHN0S29RSW91aUNkb3RkRVZiUjh3N3hFZDdSbEo0bG9KRUIvbkovOFFBS2hBQUFRSUVCQVlEQVFFQkFBQUFBQUFBQVFBUklURmhjUkF3UVZFZ1FJR1JvYkZRNGZEQjhkSC8yZ0FJQVFFQUFUOGh5Q1FFNTI3cGp1bUtnRlFDb0JVQXFBVkFLZ0ZRQ29CVUFxQVZBS2dGUUNvQlVBcUFWQUtnRlFDb0JVQXFBVkFLZ0ZRQ1ltcVZHNlpia0NXVVRPQ0FiNEpta24zaG11OHBib0J2aG9pb1U4cncrSmJVSUY4ancrTEkxRTBJOFJpVzcvR21CZnZ3a3NnR0h4d2hEZ203YjQ4K3NTV0NBWWZJQ0RqQXlmSW1Zd0V6ekI4WUdZSmdPcSsvbFFGV28xRitaSk9XTmhEcVZHWElQNk5pSE1ieW1kamNTczVjQUFGSjVRb0hjeVRCT0Zab2ZaUEg3Um9PbkVPRmlLQ3hUUUJFcG5sWmlrMjVBZ0RrZ0NxbDRwR1U3eE5nZVU1Z2Z1WWs4UjFaVE9Eam9FWkFncVA0SzBtV3drTHduQjVHYmRTYlpnQkRBcnhrRzY4UFFlRi9wRk5GYzBSY2h2a05EMngrR1FnV0xBemU2Y2MyQjREa2VGNUFHUStwZjZSQVFKcWlNOUNtbmpjWmsyNmsyek5FUXV5R1RNcHY3a095WmcvWmh0aVp6YkFFOHZuUjdxOFdhSHJsRkJLRjFHWk51cE5zeUg4VWVKMUYyQjFxME4wQk1YNkg5SzZqQkU5K001Q0pNRUozSnV5N0o2SW51VW9MZUlkK01JOUhyTW0zVW0yWURYV01ieTJITXAwZDVyMzJkN1RLRUd3R2Q0b2txYkJ1STlLUVdpdTFQUWZIOTlNeWJkU2JaZ05peWhVK3VVSi8weHhDSlY2R1pOdXBOc3dHdUQwTVRoMS9ybERjbS91eEJxcGVobVRicVRiTUJxdjhNU2lQN1BsRGQ3K3pFV0d1WVRicVRiTUZxM294S0J1SEtGVkRpTFZEN1prMjZrMnpHaWJpZkp4dlova2NuUVFQd05LaFBsbVRicVRiTXZKdms0d0hjSHJrNkhFOGNEUm9PWk51cE5zeThRSHJHMHdlWEp1YXNjRkRWNHpKdDFKdG1PN2N4NCtzWFRRTzhPVHZ4bmhpQTVZS2xCc3liZFNiWmpmc2o3R1A2NkR5ZEJNZURqUWdlYzJiZFNiWmpHMkE3RHdVWi9Ea3V2eWVNYUVlQVBtemJxVGJNL053T0J5Nmg0bHVTYWRnUDdqWDBQOEFNMmJkU2Jac0FHZUFzK01ZNCtkL25KYThnbUJZUXhZM0pBL3V1Yk51cE5zMXgwQi9qK1l0SkdLNjVqa2Q3b1Y5T0NNSnVQcjlObXpicVRiTmFlYkJzY1Rqc2NBYXJWMEZ1UWFMeFAxNHlDUUNsT0lETm0zVW0yYkxRWXNnSXNSaU1RbGFFY2pvZHM5bVFQdlJUd0Y3WXN5Z3d1L0hPbTNVbTJjY1lmU3hTSzBNUVdYM3pRRWg2bFFDL3dEdHppQVNXRVNuRW03dWROdXBOczZRaXoyTzZEWXhlOWVBYTZHaHFzZFJxTGpLY0dOZ0dDNVZqQU5CYmdza1IxTytmTnVwTnM5NUJoZnFLT2hoaUR3QW9CMUprVVJFZnR3aGtvNmx4T25kcjEyVHZHUDJUcndnSXlSY29FT2dFd0EwejV0MUp0eUdnOUkwVUdRYUJJOEwxWlNSVEdJZDUvNGdRUTRMZzROUmpvTlRaUDdubGY4QUZNOEo0TXpoK2pJZEFaZ0JweUUyNmsyNUUrTU13VTRyVWVqMEtMQlhNQXg0UzREOFNHeVp3ZGlKL0RvME9PcDRlcXJDQk05bklDdzVLYmZsQm5zdEpDT3FlYkNKZW1xSUlMR0J5SE96WFlKbm92Si8xQVFBSkFjbkhIZENaNVVTZTZqN1J1aXBIMXdpNWhwQUJ5VXdtWjF1cFF1QWRBNVF6S1FYdHl3Q0FCQjBLZjJOWFNiYkk3TG5nY0pCT2NqN1U0Uk9ZZVdPZ3drNWdaQ01Ta0k2cDBxV0NoOFFVZ0F3SExpSkhFUWg4ZVN3UURERTc3Zkh6TnVHUnA4YWRoTlNIRE5EWS9Ga3NnTy9HUTZCME0vaVNXUUdwbmtrT25hZmY0ZDlCTkFkOHhtbDJUN3crRGRsRTBVczl0aW5PbzdKbS9PczNUN0JNVE05a0EzS0FBSktvVlVLcUZWQ3FoVlFxb1ZVS3FGVkNxaFZRcW9WVUtxRlZDcWhWUXFvVlVLcUZWQ3FoVlFxb1ZVS2luSE4vOW9BREFNQkFBSUFBd0FBQUJEenp6UlR6enp6enp6enp6enp6enp6VHp6enp6eVJ6enp6enp6enp6enp6enp6enp3elR6enlUenp6enp6enp6enp6enp6enp6enp5anp5aHp6enp6enp6enp6enp6enp6enp6enp4end6enp6enp6enp6enp6enp6enp6enp6enl6enp6enp6enp6enp6OVBmenp6enp6enp6enpEenp6enp6enp6UW9NTU9EN0h6enp6enp6ekx6enp6enl1QUFNTTkrNHNNUE9MM3p6enp3THp6enp6eUVJV1kzenp3MjAwd1A4QTg4ODg4Qzg4ODg4OEtRODg4ODg4ODg4NkQwODg4ODhDODg4ODg4cUU4ODg4ODg4ODhyRGQ4ODg4OEM4ODg4ODhxRzg4ODg4ODg4OGdEVzg4ODg4Qzg4ODg4OGpTODg4ODg4ODg4SkdWODg4ODhDODg4ODg4cEEvODg4ODg4ODhDSDg4ODg4OEM4ODg4ODhNRDE4ODg4ODg4OEpIODg4ODg4Qzg4ODg4OG9EYjg4ODg4ODg1REQ4ODg4ODhDODg4ODg4L0NDLzhBUFBQUFB3UjkvUFBQUFBBdlBQUFBQUE9DQWZ0L1BPOEF5dlBQUFBQUEF2UFBQUFBQUERqUTQwcUF4VDNQUFBQUFBQQXZQUFBQUFBQUExmUUF3RGovQUR6enp6enp6elB6enp6enp6enp6eTJLL3dBODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODhFODhVODg4ODg4ODg4ODg4ODg4ODg4ODg4MGM4OHN3ODg4ODg4ODg4ODg4ODg4ODg4OHM4ODg4ODhjODg4ODg4ODg4ODg4ODg4ODhFODg4ODg4ODg4akJCQkJCQkJCQkJCQkIvOEFQUFBQUFAvRUFDWVJBUUFDQVFNRUFnSURBUUFBQUFBQUFBRUFFU0VRTURGQVFXRnhJS0ZSY0lHUnNmRC8yZ0FJQVFNQkFUOFEvUm8xd2xzYW5ZQjZWSEpuZjc5VEdHb3FyZGNRNUp5V0p5UytnYmw0SjV2aGtPQ1k0dVpUSWlLcDFFY01Xc1pTL251OHZ2U1FkeElMbE9BZkF1aGNaeXFkbkExNzZmWVp4ZFRKajdtZjhQVzF4L2xwOUxkRlFkYlE4ajNvYUR3YnBwUlVuazJuZ2VOQlFHNktMNGcwM0JzdlpWcnhCU2VlZ2l4YlB1amZoZjhBak9saS9IWXVORjYzcUNVeGxVY3g4OUNnV3k3MkRTbUhuZnI5d2lWaGlGcVlUQitvSTVOY0x5emx1UHhvNjdIUTVRd3h1aG9sbGlYREJtT3dORVZDVmY0empvZ0ZNRnovQUVqdEN0Y2ppZmNIbzdWYmg5Q1djc1ROY3Y2UC84UUFKaEVCQUFJQUJRUURBQU1CQUFBQUFBQUFBUUFSRUNFd01WRkJZWEdoSUVDeFlIQ0I4UC9hQUFnQkFnRUJQeEQralg2MmN3bEV1ZFpUNnV3RnpvdGVabVN1QUtESE16Sm5LcHM1UG9ER3JXZHI0WkdOc3BScVpabGZVQVdPS201Q2FoZGNkWDFpZE1VSHNNYjB2aTR0YnFiVUdkU1I5TmZ2V0p2L0FPZnVsNldIdmFydndrRi85ZGRJNXJ4Zzc4anF1L0ZEZmkwaGt2R0N0TzdxdS84QWI5aHN1enBITTk4RmF1cmNqaGlXVkVwclJvTHpMbmdmUUNtZDlIdzVyeXF1K1dGWUhYUXI4RkhKMWhWWkJNOVlLeXFEOGdWb25NRGhjamJwcjh3SU41a0hwdVovbVBjUkduSFBOam1iVHZ6Z1o2N3Y5SFAyWkJyZUJPVFBtYmtEbVp2bmNBYlZFdjhBMG0vMGtWcW1NZnJEYkxNZXJqNmpkdTlLOVJxMk95RzVrZXh4L09qV2ZuLy94QUFxRUFFQUFRSUNDUVVCQVFFQUFBQUFBQUFCRVFBaE1hRVFNRUZSWVhHQmtmRWdRTEhCOEZEUjRmL2FBQWdCQVFBQlB4RFVXUmI3akdwY0ljMVNZdm9SVzhsNXJYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4VlhpcThWWGlxOFZYaXE4Vlc0STVNVk13NjE2azRoeVdva2hsYm4yQXFNWGNWR0lodVA5b0JZaitDZ2tKSlU4V09EY292Z1N5ZGJMZGZpMUJnUDRxQ1FralVZTTdqYVVJSkdUVXFCS3dGUTNOdHpmei9rcUhBZHB2b0JicWJ0UVhTNE1PUEgrV2srUlNCSjZ1U0g0ZnpjRndmeDlNUzJMWXF3ZnpyeTlsemw2QzVzV0gzL0FEemFURzRvUkJMam9tVXgyYzZnRGQvUXZibTV5MFhCdXY4QTBiRzMyZEZ6OVAzZjNDUERpWWU1dXZ5R2tTUU51ekE1SmZ1VUV2MkVJWGNObnQ4UjJsKzJqYTcxYy9iWTJvM2c1Y1hoUXEzWE5nNGJtZkxEU2tXeWRvTnliU2pIcXRKZTR2cHZ6OXVSTGNJcktudE1KS2lCMWFMZkd3YUw4NU9kVHFSd2VXTEhxa2dDeFlQNHN6MG9NQlByelk5RjlyTEQydFpWN0JxTllxZ281a1RFRHNGNkhFWmg4aEJ5bzVXNFd2dkJrMWNsTWtxSEl3T21xSi94d2k5em9sRkN2YkRaSHpRUkRPNXZXSXpvc3VtSDBqN0hPcXlyV1JXNkRxVGZ3T0hkS1V1eFE2UUsvYi9kRHdMeFgzVW9EdlUrc0ZZTHRQRmJjUkJjQndjWHRRVVlReU9YdDU0MHpPTEY5eFBveDFHelgzeDhWa3JIOTErMys2ZHgwblFtL0VubkpWMll6OVBFYmF6T3F5cldNVEtUd0xHUnFRUUFWYkFWZkNkZ2lPR042d2NhTWhyWVNqd1lmTGpwTGUwU2cxdkhHUlh5eEhXZVpVMkU0SW5rQ3ozMVN0ek80UUpPNVBYV1oxV1Zhd29IZjV2VURXOXBYWXBzUlBhRU9qZktuRmQrRWZqaFJBbE5sUDFYN2VzSW13TWljUnBGZWJWaTVyZG9wM1laRmw2TnM2ZVlWak4yRW5yNWtEV002ckt0WVFUZjU2UmZaQ2hSQTdxL08zNEpTUXlEQk5uV1ZGaVhBUVphNmF1TzFqTXFSbUg4S0tZZXJuM05PUXBKU3dPM1NTZmF3eTZ6T3F5cldRQ0l2ZTRhWnQwWDg2ZTBCWnVzK21MZkEvZlBXWjFXVmF5RzhidTJtYmQzN24rUGFZM1hkK2ZUTU41eWZyV1oxV1ZheTJON3B1YlJlMDdkWkdNN1dtVWJ4OEgxck02ckt0WktONitIMXBqM3Q5bC8zMmwwcGxjOU1vakhaejYxbWRWbFdzL1djSDFwZzN4N1A5dlo3S3ArdzlIR0R1ays5Wm5WWlZySWZISCsybWQ4bVgxN1B4ano5SEZydkwvZXN6cXNxMWtjVDZaWDNwanV4RHVmWHM3cVJQZEVmZm90NUdUSFdaMVdWYXkwKzJlY3RLNjhUK0p6OW54M0Y2L1JPbERDVllDakp3QWREV1oxV1ZhenlnNTltbTlrWERrSDJkeTd3WEFUNk5OaUp0dk1HdHpxc3Exa0tsek9nL0I2TGd6ZnQ4aCsvWlFCY1F1VUQ1ZE5ucGw3ajZhM09xeXJXUitTa2RVZWlWMlVyaElNZzlsRVRaZzRxL0JOTStscGJpcDhGMXVkVmxXdGUzQVRtUmxHa0c3RVRnSStWMzlrWmpJamZZWkJwbkV4NXlGZmhyYzZyS3RiQVJFejJTWGZCNjZUaHJnQ0grQ2RmWWhKUW5yMnpKU3F5M2RMUVVkOUxaTmF6cXNxMXJuWit6dmNPK25oWXJJTWxZSlFKdmJUb3lkUFlIYzFpTmdXSGVYb2FjMVlCWW9HNENOd0VHdHpxc3ExcmhRc3U5c2VqRDBwTGJ6c1JHRTAzOENCYmE5V3pqejE5eTFFYlZzSEZwRDlqVFlZQWNBZzAzVU1lMnlCMkpkdGRuVlpWcnRpMW9iRSt3bm1Pa1VFVVM0bEFaSFlYQVhaOHVldHhlejRpN2cydkNqb0VMbUw5bnhtNkFRS01BWFZvekppNXY0blFnNmE3T3F5clhCMWdBRjlrT0kxWkVwT3diQndmUWFka0ZiWEJjVGc5eW9LTkd3ZmRpR3FscU8yS2Z4WXlwUzVtSFk5dzJmUG9jcnZzTVA0SHp5MStkVmxXdkpZb0hCUGkrTzhwWU9HdWZ0L293UWdzUjJwelloQmM0N1RtZHF3c3VURGs3bmg2aDRaTFhPcGgxWDRVWTJCVFluYytIRDA3cUZybVptOTJVR2RRMEFOZm5WWlY3QzBrV0RTOENiVGgycVRSSGJ1Vy9XUHBCYlNSZEJNSHJTRFJzSE1tL1ZialFNQUpFWkUwVFlEaXZ1R0xVZmxrS052aS9BNzBxaXFyZFgwOEZCUVAweithZ3ppZUFld3pxc3E5amdxamNsU1EzbFlPRzA1TitMVFRsaFFPWStsMnhOMnNjMjFsd3JFZXdWbnVBeFpjNnhwaHZMeTRIRDB4RjRNWm9iWGdTMDRBSzVlT1J6dSt5MzNhcXdHNjNzNENjUUhaaS9UQ3BTSlhnc2NmbzdVaUJCaEVoSFVRd25FRWN4YkZObURmQWJqdHlIQ2piREFZQTRIc3drNTFXanVaOXJaUjFyZlZzSFB1VS9GTkYzMUdLNTkzMHNkdUZrY0FvcGw3aVhmQnlMOFNzRE9FUS82OGZhT0VNWXRRUUJnV3BzWGNqOW43WU1MUWhJbERHdVZHT2UydUdIS2xHWkE0UjBTT1pRYXpnYjNBNnhVTWpVRW5oRzQ0R2Z0cjNlTTl2eG9HSXhMME1rbUQ3Y1dERUJQSkMvU2pjSFpGUFlSUFdqTzNBd09BZTM0QUxIMys0YWJ6dTRjdjU5NEx1QnpxQU5KYkRITVVJZ2x4L25HUHNzT2ZwTUxhdzRPNythM0V1eU45QUFHQjZVQkRoU1IybXgzL3dBdUJoSzRHK29MdDFpK3NCR0c1M1VrNEh5L2toeExnYjZTY1JaYWtCRFV0K2ZsL3dDTzN3VGtLZ3VzcmJySjduaXcvd0NVR1lFdHp0L2hvc2NkMjJveGJOeGpRQWdJTmNna0pKVXpFT0RjcURhOFZXOWh6dDcxRmhFN3FtNHJ6dFc0QnUvMVFZQ1BhS1VBN3dwdmZOWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxWG1xODFYbXE4MVhtcTgxVjQrYWdHUjFYb0FJQURXZi9aIi8+CjwvZGVmcz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==i["b"].Unsupported&&Object(i["d"])(()=>{var t;return!(null===(t=window.trustwallet)||void 0===t||null===(t=t.solana)||void 0===t||!t.isTrust)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)})}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var t;return!(null===(t=this._wallet)||void 0===t||!t.isConnected)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==i["b"].Installed)throw new s["i"];this._connecting=!0;const e=window.trustwallet.solana;if(!e.isConnected)try{await e.connect()}catch(t){throw new s["c"](null===t||void 0===t?void 0:t.message,t)}if(!e.publicKey)throw new s["a"];let r;try{r=new o["e"](e.publicKey.toBytes())}catch(t){throw new s["j"](null===t||void 0===t?void 0:t.message,t)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:o}=await i.signAndSendTransaction(t,s);return o}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{const{signature:e}=await r.signMessage(t);return e}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},b675:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return u}));r("14d9");var n,i=r("ba10"),s=r.n(i),o=r("52c3");(function(t){t["Installed"]="Installed",t["NotDetected"]="NotDetected",t["Loadable"]="Loadable",t["Unsupported"]="Unsupported"})(n||(n={}));class a extends s.a{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,r={}){const n=this.publicKey;if(!n)throw new o["h"];return t.feePayer=t.feePayer||n,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}}function c(t){if("undefined"===typeof window||"undefined"===typeof document)return;const e=[];function r(){const r=t();if(r)for(const t of e)t()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function u(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}},b9be:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d}));var n=r("8df2"),i=r("633a"),s=(r("64b9"),r("d6e3")),o=r("753b"),a=r("d99e"),c=(r("7f6a"),r("0f06")),u=r("f7f2");const l=Object(n["struct"])([Object(n["u32"])("mintAuthorityOption"),Object(i["b"])("mintAuthority"),Object(i["c"])("supply"),Object(n["u8"])("decimals"),Object(i["a"])("isInitialized"),Object(n["u32"])("freezeAuthorityOption"),Object(i["b"])("freezeAuthority")]),h=l.span;function d(e,r,n=s["c"]){if(!r)throw new o["a"];if(!r.owner.equals(n))throw new o["c"];if(r.data.length<h)throw new o["d"];const i=l.decode(r.data.slice(0,h));let d=t.alloc(0);if(r.data.length>h){if(r.data.length<=c["a"])throw new o["d"];if(r.data.length===u["a"])throw new o["d"];if(r.data[c["a"]]!=a["b"].Mint)throw new o["i"];d=r.data.slice(c["a"]+a["a"])}return{address:e,mintAuthority:i.mintAuthorityOption?i.mintAuthority:null,supply:i.supply,decimals:i.decimals,isInitialized:i.isInitialized,freezeAuthority:i.freezeAuthorityOption?i.freezeAuthority:null,tlvData:d}}}).call(this,r("1c35").Buffer)},ba93:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r("64b9"),i=r("d6e3");function s(e,r,n,s,a=i["c"],c=i["a"]){return o(e,r,n,s,t.alloc(0),a,c)}function o(t,e,r,s,o,a=i["c"],c=i["a"]){const u=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:n["h"].programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new n["j"]({keys:u,programId:c,data:o})}}).call(this,r("1c35").Buffer)},bbae:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=t=>{const e=t.decode.bind(t),r=t.encode.bind(t);return{decode:e,encode:r}}},bfcb:function(t,e,r){"use strict";r.d(e,"a",(function(){return u}));var n=r("7ee5"),i=r("b675"),s=r("52c3"),o=r("6f02"),a=r("64b9");const c="Phantom";class u extends n["a"]{constructor(t={}){super(),this.name=c,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"===typeof window||"undefined"===typeof document?i["b"].Unsupported:i["b"].NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new s["d"]),this.emit("disconnect"))},this._accountChanged=t=>{const e=this._publicKey;if(e){try{t=new a["e"](t.toBytes())}catch(r){return void this.emit("error",new s["j"](null===r||void 0===r?void 0:r.message,r))}e.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==i["b"].Unsupported&&(Object(i["c"])()?(this._readyState=i["b"].Loadable,this.emit("readyStateChange",this._readyState)):Object(i["d"])(()=>{var t,e;return!!(null!==(t=window.phantom)&&void 0!==t&&null!==(t=t.solana)&&void 0!==t&&t.isPhantom||null!==(e=window.solana)&&void 0!==e&&e.isPhantom)&&(this._readyState=i["b"].Installed,this.emit("readyStateChange",this._readyState),!0)}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===i["b"].Installed&&await this.connect()}async connect(){try{var t;if(this.connected||this.connecting)return;if(this.readyState===i["b"].Loadable){const t=encodeURIComponent(window.location.href),e=encodeURIComponent(window.location.origin);return void(window.location.href=`https://phantom.app/ul/browse/${t}?ref=${e}`)}if(this.readyState!==i["b"].Installed)throw new s["i"];this._connecting=!0;const r=(null===(t=window.phantom)||void 0===t?void 0:t.solana)||window.solana;if(!r.isConnected)try{await r.connect()}catch(e){throw new s["c"](null===e||void 0===e?void 0:e.message,e)}if(!r.publicKey)throw new s["a"];let n;try{n=new a["e"](r.publicKey.toBytes())}catch(e){throw new s["j"](null===e||void 0===e?void 0:e.message,e)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new s["e"](null===e||void 0===e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,r={}){try{const i=this._wallet;if(!i)throw new s["h"];try{const{signers:n,...s}=r;Object(o["a"])(t)?(null===n||void 0===n?void 0:n.length)&&t.sign(n):(t=await this.prepareTransaction(t,e,s),(null===n||void 0===n?void 0:n.length)&&t.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:a}=await i.signAndSendTransaction(t,s);return a}catch(n){if(n instanceof s["f"])throw n;throw new s["k"](null===n||void 0===n?void 0:n.message,n)}}catch(n){throw this.emit("error",n),n}}async signTransaction(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signTransaction(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const r=this._wallet;if(!r)throw new s["h"];try{return await r.signAllTransactions(t)||t}catch(e){throw new s["m"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const r=this._wallet;if(!r)throw new s["h"];try{const{signature:e}=await r.signMessage(t);return e}catch(e){throw new s["l"](null===e||void 0===e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}},caeb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWalletAdapterCompatibleStandardWallet=void 0;const n=r("74a3"),i=r("10d7");function s(t){return i.StandardConnect in t.features&&i.StandardEvents in t.features&&(n.SolanaSignAndSendTransaction in t.features||n.SolanaSignTransaction in t.features)}e.isWalletAdapterCompatibleStandardWallet=s},d6e3:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o}));var n=r("64b9");const i=new n["e"]("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new n["e"]("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),o=new n["e"]("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new n["e"]("So11111111111111111111111111111111111111112"),new n["e"]("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP")},d99e:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),function(t){t[t["Uninitialized"]=0]="Uninitialized",t[t["Mint"]=1]="Mint",t[t["Account"]=2]="Account"}(n||(n={}));const i=1},e1c8:function(t,e,r){"use strict";function n(t){return"version"in t}Object.defineProperty(e,"__esModule",{value:!0}),e.isVersionedTransaction=void 0,e.isVersionedTransaction=n},e729:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n="solana:signMessage"},f7f2:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r("8df2"),i=r("633a");r("d6e3"),r("753b");const s=Object(n["struct"])([Object(n["u8"])("m"),Object(n["u8"])("n"),Object(i["a"])("isInitialized"),Object(i["b"])("signer1"),Object(i["b"])("signer2"),Object(i["b"])("signer3"),Object(i["b"])("signer4"),Object(i["b"])("signer5"),Object(i["b"])("signer6"),Object(i["b"])("signer7"),Object(i["b"])("signer8"),Object(i["b"])("signer9"),Object(i["b"])("signer10"),Object(i["b"])("signer11")]),o=s.span},fbe3:function(t,e,r){"use strict";var n;r.d(e,"a",(function(){return n})),function(t){t[t["InitializeMint"]=0]="InitializeMint",t[t["InitializeAccount"]=1]="InitializeAccount",t[t["InitializeMultisig"]=2]="InitializeMultisig",t[t["Transfer"]=3]="Transfer",t[t["Approve"]=4]="Approve",t[t["Revoke"]=5]="Revoke",t[t["SetAuthority"]=6]="SetAuthority",t[t["MintTo"]=7]="MintTo",t[t["Burn"]=8]="Burn",t[t["CloseAccount"]=9]="CloseAccount",t[t["FreezeAccount"]=10]="FreezeAccount",t[t["ThawAccount"]=11]="ThawAccount",t[t["TransferChecked"]=12]="TransferChecked",t[t["ApproveChecked"]=13]="ApproveChecked",t[t["MintToChecked"]=14]="MintToChecked",t[t["BurnChecked"]=15]="BurnChecked",t[t["InitializeAccount2"]=16]="InitializeAccount2",t[t["SyncNative"]=17]="SyncNative",t[t["InitializeAccount3"]=18]="InitializeAccount3",t[t["InitializeMultisig2"]=19]="InitializeMultisig2",t[t["InitializeMint2"]=20]="InitializeMint2",t[t["GetAccountDataSize"]=21]="GetAccountDataSize",t[t["InitializeImmutableOwner"]=22]="InitializeImmutableOwner",t[t["AmountToUiAmount"]=23]="AmountToUiAmount",t[t["UiAmountToAmount"]=24]="UiAmountToAmount",t[t["InitializeMintCloseAuthority"]=25]="InitializeMintCloseAuthority",t[t["TransferFeeExtension"]=26]="TransferFeeExtension",t[t["ConfidentialTransferExtension"]=27]="ConfidentialTransferExtension",t[t["DefaultAccountStateExtension"]=28]="DefaultAccountStateExtension",t[t["Reallocate"]=29]="Reallocate",t[t["MemoTransferExtension"]=30]="MemoTransferExtension",t[t["CreateNativeMint"]=31]="CreateNativeMint",t[t["InitializeNonTransferableMint"]=32]="InitializeNonTransferableMint",t[t["InterestBearingMintExtension"]=33]="InterestBearingMintExtension",t[t["CpiGuardExtension"]=34]="CpiGuardExtension",t[t["InitializePermanentDelegate"]=35]="InitializePermanentDelegate",t[t["TransferHookExtension"]=36]="TransferHookExtension",t[t["MetadataPointerExtension"]=39]="MetadataPointerExtension",t[t["GroupPointerExtension"]=40]="GroupPointerExtension",t[t["GroupMemberPointerExtension"]=41]="GroupMemberPointerExtension"}(n||(n={}))}}]);